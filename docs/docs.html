<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>DragonRuby Game Toolkit Documentation</title>
    <link href="docs.css?ver=1698979611" rel="stylesheet" type="text/css" media="all">
  </head>
  <body>
    <div id='table-of-contents'>
      <li><a class='header-1' href='index.html'>Docs and Samples</a></li>
      <li><a class='header-1' href='docs.html'>Docs</a></li>
      <li><a class='header-1' href='samples.html'>Samples</a></li>
<h1>Table Of Contents</h1>
<ul>
<li><a class='header-1' href='#--welcome'>Welcome</a></li>
<li><a class='header-1' href='#--tips-for-learning-dragonruby-game-toolkit'>Tips for Learning DragonRuby Game Toolkit</a></li>
<ul><li><a class='header-2' href='#---tip-#1--join-the-community'>Tip #1: Join the Community</a></li></ul><ul><li><a class='header-2' href='#---tip-#2--read-the-book'>Tip #2: Read the Book</a></li></ul><ul><li><a class='header-2' href='#---tip-#3--watch-the-tutorial-video'>Tip #3: Watch the Tutorial Video</a></li></ul><ul><li><a class='header-2' href='#---tip-#4--go-through-the-sample-apps-in-order'>Tip #4: Go Through the Sample Apps in Order</a></li></ul><li><a class='header-1' href='#--getting-started-tutorial'>Getting Started Tutorial</a></li>
<ul><li><a class='header-2' href='#---introduction'>Introduction</a></li></ul><ul><li><a class='header-2' href='#---prerequisites'>Prerequisites</a></li></ul><ul><li><a class='header-2' href='#---the-game-loop'>The Game Loop</a></li></ul><ul><li><a class='header-2' href='#---breakdown-of-the--tick--method'>Breakdown Of The <code>tick</code> Method</a></li></ul><ul><li><a class='header-2' href='#---rendering-a-sprite'>Rendering A Sprite</a></li></ul><ul><li><a class='header-2' href='#---coordinate-system-and-virtual-canvas'>Coordinate System and Virtual Canvas</a></li></ul><ul><li><a class='header-2' href='#---game-state'>Game State</a></li></ul><ul><li><a class='header-2' href='#---there-is-no-delta-time'>There Is No Delta Time</a></li></ul><ul><li><a class='header-2' href='#---handling-user-input'>Handling User Input</a></li></ul><ul><li><a class='header-2' href='#---coding-on-a-raspberry-pi'>Coding On A Raspberry Pi</a></li></ul><ul><li><a class='header-2' href='#---conclusion'>Conclusion</a></li></ul><li><a class='header-1' href='#--starting-a-new-dragonruby-project'>Starting a New DragonRuby Project</a></li>
<ul><li><a class='header-2' href='#---considerations-for-public-git-repositories'>Considerations For Public Git Repositories</a></li></ul><ul><ul><li><a class='header-3' href='#----option-1-(recommended)'>Option 1 (Recommended)</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----option-2-(restrictions-apply)'>Option 2 (Restrictions Apply)</a></li></ul></ul><ul><li><a class='header-2' href='#---considerations-for-private-git-repos'>Considerations For Private Git Repos</a></li></ul><li><a class='header-1' href='#--deploying-to-itch-io'>Deploying To Itch.io</a></li>
<ul><li><a class='header-2' href='#---creating-your-game-landing-page'>Creating Your Game Landing Page</a></li></ul><ul><li><a class='header-2' href='#---update-your-game-s-metadata'>Update Your Game's Metadata</a></li></ul><ul><li><a class='header-2' href='#---building-your-game-for-distribution'>Building Your Game For Distribution</a></li></ul><ul><ul><li><a class='header-3' href='#----browser-game-settings'>Browser Game Settings</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----consider-adding-pause-when-game-is-in-background'>Consider Adding Pause When Game is In Background</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----consider-adding-a-request-to-review-your-game-in-game'>Consider Adding a Request to Review Your Game In-Game</a></li></ul></ul><li><a class='header-1' href='#--deploying-to-mobile-devices'>Deploying To Mobile Devices</a></li>
<ul><li><a class='header-2' href='#---deploying-to-ios'>Deploying to iOS</a></li></ul><ul><li><a class='header-2' href='#---deploying-to-android'>Deploying to Android</a></li></ul><li><a class='header-1' href='#--deploying-to-steam'>Deploying To Steam</a></li>
<ul><li><a class='header-2' href='#---testing-on-your-steam-deck'>Testing on Your Steam Deck</a></li></ul><ul><ul><li><a class='header-3' href='#----easy-setup'>Easy Setup</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----advanced-setup'>Advanced Setup</a></li></ul></ul><ul><li><a class='header-2' href='#---setting-up-the-game-on-the-partner-site'>Setting up the game on the Partner Site</a></li></ul><ul><ul><li><a class='header-3' href='#----getting-your-app-id'>Getting your App ID</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----specifing-supported-operating-systems-for-your-game'>Specifing Supported Operating Systems for your game</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----setting-up-steampipe-depots'>Setting up SteamPipe Depots</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----setting-up-launch-options'>Setting up Launch Options</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----publish-changes'>Publish Changes</a></li></ul></ul><ul><li><a class='header-2' href='#---configuring--dragonruby-publish-'>Configuring <code>dragonruby-publish</code></a></li></ul><ul><ul><li><a class='header-3' href='#----setting-a-branch-live'>Setting a branch live</a></li></ul></ul><ul><li><a class='header-2' href='#---publishing-build'>Publishing Build</a></li></ul><ul><li><a class='header-2' href='#---questions/need-help-'>Questions/Need Help?</a></li></ul><li><a class='header-1' href='#--dragonruby-s-philosophy'>DragonRuby's Philosophy</a></li>
<ul><li><a class='header-2' href='#---challenge-the-status-quo'>Challenge The Status Quo</a></li></ul><ul><li><a class='header-2' href='#---continuity-of-design'>Continuity of Design</a></li></ul><ul><li><a class='header-2' href='#---release-early-and-often'>Release Early and Often</a></li></ul><ul><li><a class='header-2' href='#---sustainable-and-ethical-monetization'>Sustainable And Ethical Monetization</a></li></ul><ul><li><a class='header-2' href='#---sustainable-and-ethical-open-source'>Sustainable And Ethical Open Source</a></li></ul><ul><li><a class='header-2' href='#---people-over-entities'>People Over Entities</a></li></ul><ul><li><a class='header-2' href='#---building-a-game-should-be-fun-and-bring-happiness'>Building A Game Should Be Fun And Bring Happiness</a></li></ul><ul><li><a class='header-2' href='#---real-world-application-drives-features'>Real World Application Drives Features</a></li></ul><li><a class='header-1' href='#--frequently-asked-questions--comments--and-concerns'>Frequently Asked Questions, Comments, and Concerns</a></li>
<ul><li><a class='header-2' href='#---frequently-asked-questions'>Frequently Asked Questions</a></li></ul><ul><ul><li><a class='header-3' href='#----what-is-dragonruby-llp-'>What is DragonRuby LLP?</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----what-is-dragonruby-'>What is DragonRuby?</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----how-is-dragonruby-different-than-mri-'>How is DragonRuby different than MRI?</a></li></ul></ul><ul><li><a class='header-2' href='#---frequent-comments-about-ruby-as-a-language-choice'>Frequent Comments About Ruby as a Language Choice</a></li></ul><ul><ul><li><a class='header-3' href='#----but-ruby-is-dead-'>But Ruby is dead.</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----but-ruby-is-slow-'>But Ruby is slow.</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----dynamic-languages-are-slow-'>Dynamic languages are slow.</a></li></ul></ul><ul><li><a class='header-2' href='#---frequent-concerns'>Frequent Concerns</a></li></ul><ul><ul><li><a class='header-3' href='#----dragonruby-is-not-open-source--that-s-not-right-'>DragonRuby is not open source. That's not right.</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----dragonruby-is-for-pay--you-should-offer-a-free-version-'>DragonRuby is for pay. You should offer a free version.</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----but-still--you-should-offer-a-free-version--so-i-can-try-it-out-and-see-if-i-like-it-'>But still, you should offer a free version. So I can try it out and see if I like it.</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----i-still-think-you-should-do-a-free-version--think-of-all-people-who-would-give-it-a-shot-'>I still think you should do a free version. Think of all people who would give it a shot.</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----what-if-i-build-something-with-dragonruby--but-dragonruby-llp-becomes-insolvent-'>What if I build something with DragonRuby, but DragonRuby LLP becomes insolvent.</a></li></ul></ul><li><a class='header-1' href='#--recipies-'>RECIPIES:</a></li>
<ul><li><a class='header-2' href='#---how-to-determine-what-frame-you-are-on'>How To Determine What Frame You Are On</a></li></ul><ul><li><a class='header-2' href='#---how-to-get-current-framerate'>How To Get Current Framerate</a></li></ul><ul><li><a class='header-2' href='#---how-to-render-a-sprite-using-an-array'>How To Render A Sprite Using An Array</a></li></ul><ul><li><a class='header-2' href='#---more-sprite-properties-as-an-array'>More Sprite Properties As An Array</a></li></ul><ul><li><a class='header-2' href='#---rendering-a-sprite-using-a--hash-'>Rendering a Sprite Using a <code>Hash</code></a></li></ul><ul><li><a class='header-2' href='#---rendering-a-sprite-using-a--class-'>Rendering a Sprite Using a <code>Class</code></a></li></ul><ul><li><a class='header-2' href='#---how-to-render-a-label'>How To Render A Label</a></li></ul><ul><li><a class='header-2' href='#---a-colored-label'>A Colored Label</a></li></ul><ul><li><a class='header-2' href='#---extended-label-properties'>Extended Label Properties</a></li></ul><ul><li><a class='header-2' href='#---rendering-a-label-as-a--hash-'>Rendering A Label As A <code>Hash</code></a></li></ul><ul><li><a class='header-2' href='#---getting-the-size-of-a-piece-of-text'>Getting The Size Of A Piece Of Text</a></li></ul><ul><li><a class='header-2' href='#---rendering-labels-with-new-line-characters-and-wrapping'>Rendering Labels With New Line Characters And Wrapping</a></li></ul><ul><li><a class='header-2' href='#---how-to-play-a-sound'>How To Play A Sound</a></li></ul><ul><li><a class='header-2' href='#---using--args-state--to-store-your-game-state'>Using <code>args.state</code> To Store Your Game State</a></li></ul><ul><li><a class='header-2' href='#---accessing-files'>Accessing files</a></li></ul><ul><li><a class='header-2' href='#---troubleshoot-performance'>Troubleshoot Performance</a></li></ul><li><a class='header-1' href='#---runtime--(-args-gtk-)'><code>Runtime</code> (<code>args.gtk</code>)</a></li>
<ul><li><a class='header-2' href='#---indie-and-pro-functions'>Indie and Pro Functions</a></li></ul><ul><ul><li><a class='header-3' href='#-----get_pixels-'><code>get_pixels</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----dlopen-'><code>dlopen</code></a></li></ul></ul><ul><li><a class='header-2' href='#---environment-and-utility-functions'>Environment and Utility Functions</a></li></ul><ul><ul><li><a class='header-3' href='#-----calcstringbox-'><code>calcstringbox</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----request_quit-'><code>request_quit</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----quit_requested--'><code>quit_requested?</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----set_window_fullscreen-'><code>set_window_fullscreen</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----window_fullscreen--'><code>window_fullscreen?</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----set_window_scale-'><code>set_window_scale</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----platform--'><code>platform?</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----production--'><code>production?</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----platform_mappings-'><code>platform_mappings</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----open_url-'><code>open_url</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----system-'><code>system</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----exec-'><code>exec</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----show_cursor-'><code>show_cursor</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----hide_cursor-'><code>hide_cursor</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----cursor_shown--'><code>cursor_shown?</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----set_mouse_grab-'><code>set_mouse_grab</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----set_system_cursor-'><code>set_system_cursor</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----set_cursor-'><code>set_cursor</code></a></li></ul></ul><ul><li><a class='header-2' href='#---file-io-functions'>File IO Functions</a></li></ul><ul><ul><li><a class='header-3' href='#-----list_files-'><code>list_files</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----stat_file-'><code>stat_file</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----read_file-'><code>read_file</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----write_file-'><code>write_file</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----append_file-'><code>append_file</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----delete_file-'><code>delete_file</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----delete_file_if_exist-'><code>delete_file_if_exist</code></a></li></ul></ul><ul><li><a class='header-2' href='#---xml-and-json'>XML and JSON</a></li></ul><ul><ul><li><a class='header-3' href='#-----parse_json-'><code>parse_json</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----parse_json_file-'><code>parse_json_file</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----parse_xml-'><code>parse_xml</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----parse_xml_file-'><code>parse_xml_file</code></a></li></ul></ul><ul><li><a class='header-2' href='#---network-io-functions'>Network IO Functions</a></li></ul><ul><ul><li><a class='header-3' href='#-----http_get-'><code>http_get</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----http_post-'><code>http_post</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----http_post_body-'><code>http_post_body</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----start_server!-'><code>start_server!</code></a></li></ul></ul><ul><li><a class='header-2' href='#---developer-support-functions'>Developer Support Functions</a></li></ul><ul><ul><li><a class='header-3' href='#-----version-'><code>version</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----version_pro--'><code>version_pro?</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----reset-'><code>reset</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----reset_next_tick-'><code>reset_next_tick</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----reset_sprite-'><code>reset_sprite</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----reset_sprites-'><code>reset_sprites</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----calcspritebox-'><code>calcspritebox</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----current_framerate-'><code>current_framerate</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----framerate_diagnostics_primitives-'><code>framerate_diagnostics_primitives</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----warn_array_primitives!-'><code>warn_array_primitives!</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----benchmark-'><code>benchmark</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----notify!-'><code>notify!</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----notify_extended!-'><code>notify_extended!</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----slowmo!-'><code>slowmo!</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----show_console-'><code>show_console</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----hide_console-'><code>hide_console</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----enable_console-'><code>enable_console</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----disable_console-'><code>disable_console</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----start_recording-'><code>start_recording</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----stop_recording-'><code>stop_recording</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----cancel_recording-'><code>cancel_recording</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----start_replay-'><code>start_replay</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----stop_replay-'><code>stop_replay</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----get_base_dir-'><code>get_base_dir</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----get_game_dir-'><code>get_game_dir</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----get_game_dir_url-'><code>get_game_dir_url</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----open_game_dir-'><code>open_game_dir</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----write_file_root-'><code>write_file_root</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----append_file_root-'><code>append_file_root</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----argv-'><code>argv</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----cli_arguments-'><code>cli_arguments</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----download_stb_rb(_raw)-'><code>download_stb_rb(_raw)</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----reload_history-'><code>reload_history</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----reload_history_pending-'><code>reload_history_pending</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----reload_if_needed-'><code>reload_if_needed</code></a></li></ul></ul><li><a class='header-1' href='#--state-(-args-state-)'>State (<code>args.state</code>)</a></li>
<ul><li><a class='header-2' href='#----entity_id-'><code>entity_id</code></a></li></ul><ul><li><a class='header-2' href='#----entity_type-'><code>entity_type</code></a></li></ul><ul><li><a class='header-2' href='#----created_at-'><code>created_at</code></a></li></ul><ul><li><a class='header-2' href='#----created_at_elapsed-'><code>created_at_elapsed</code></a></li></ul><ul><li><a class='header-2' href='#----global_created_at-'><code>global_created_at</code></a></li></ul><ul><li><a class='header-2' href='#----global_created_at_elapsed-'><code>global_created_at_elapsed</code></a></li></ul><ul><li><a class='header-2' href='#----as_hash-'><code>as_hash</code></a></li></ul><ul><li><a class='header-2' href='#----new_entity-'><code>new_entity</code></a></li></ul><ul><li><a class='header-2' href='#----new_entity_strict-'><code>new_entity_strict</code></a></li></ul><ul><li><a class='header-2' href='#----args-state-tick_count-'><code>args.state.tick_count</code></a></li></ul><li><a class='header-1' href='#--inputs-(-args-inputs-)'>Inputs (<code>args.inputs</code>)</a></li>
<ul><li><a class='header-2' href='#----last_active-'><code>last_active</code></a></li></ul><ul><li><a class='header-2' href='#----locale-'><code>locale</code></a></li></ul><ul><li><a class='header-2' href='#----up-'><code>up</code></a></li></ul><ul><li><a class='header-2' href='#----down-'><code>down</code></a></li></ul><ul><li><a class='header-2' href='#----left-'><code>left</code></a></li></ul><ul><li><a class='header-2' href='#----right-'><code>right</code></a></li></ul><ul><li><a class='header-2' href='#----left_right-'><code>left_right</code></a></li></ul><ul><li><a class='header-2' href='#----up_down-'><code>up_down</code></a></li></ul><ul><li><a class='header-2' href='#----text-'><code>text</code></a></li></ul><ul><li><a class='header-2' href='#---mouse-(-args-inputs-mouse-)'>Mouse (<code>args.inputs.mouse</code>)</a></li></ul><ul><ul><li><a class='header-3' href='#-----has_focus-'><code>has_focus</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----x-'><code>x</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----y-'><code>y</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----inside_rect--rect-'><code>inside_rect? rect</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----inside_circle--center_point--radius-'><code>inside_circle? center_point, radius</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----moved-'><code>moved</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----button_left-'><code>button_left</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----button_middle-'><code>button_middle</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----button_right-'><code>button_right</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----button_bits-'><code>button_bits</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----wheel-'><code>wheel</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----click--or--down----previous_click----up-'><code>click</code> OR <code>down</code>, <code>previous_click</code>, <code>up</code></a></li></ul></ul><ul><li><a class='header-2' href='#---touch'>Touch</a></li></ul><ul><ul><li><a class='header-3' href='#-----args-inputs-touch-'><code>args.inputs.touch</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----args-inputs-finger_left-'><code>args.inputs.finger_left</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----args-inputs-finger_right-'><code>args.inputs.finger_right</code></a></li></ul></ul><ul><li><a class='header-2' href='#---controller-(-args-inputs-controller_(one-four)-)'>Controller (<code>args.inputs.controller_(one-four)</code>)</a></li></ul><ul><ul><li><a class='header-3' href='#-----active-'><code>active</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----up-'><code>up</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----down-'><code>down</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----left-'><code>left</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----right-'><code>right</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----left_right-'><code>left_right</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----up_down-'><code>up_down</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----(left|right)_analog_x_raw-'><code>(left|right)_analog_x_raw</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----(left|right)_analog_y_raw-'><code>(left|right)_analog_y_raw</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----(left|right)_analog_x_perc-'><code>(left|right)_analog_x_perc</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----(left|right)_analog_y_perc-'><code>(left|right)_analog_y_perc</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----directional_up-'><code>directional_up</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----directional_down-'><code>directional_down</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----directional_left-'><code>directional_left</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----directional_right-'><code>directional_right</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----(a|b|x|y|l1|r1|l2|r2|l3|r3|start|select)-'><code>(a|b|x|y|l1|r1|l2|r2|l3|r3|start|select)</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----truthy_keys-'><code>truthy_keys</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----key_down-'><code>key_down</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----key_held-'><code>key_held</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----key_up-'><code>key_up</code></a></li></ul></ul><ul><li><a class='header-2' href='#---keyboard-(-args-inputs-keyboard-)'>Keyboard (<code>args.inputs.keyboard</code>)</a></li></ul><ul><ul><li><a class='header-3' href='#-----active-'><code>active</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----has_focus-'><code>has_focus</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----up-'><code>up</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----down-'><code>down</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----left-'><code>left</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----right-'><code>right</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----left_right-'><code>left_right</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----up_down-'><code>up_down</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#----keyboard-properties'>keyboard properties</a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----char-'><code>char</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----keys-'><code>keys</code></a></li></ul></ul><li><a class='header-1' href='#--grid-(-args-grid-)'>Grid (<code>args.grid</code>)</a></li>
<ul><li><a class='header-2' href='#----name-'><code>name</code></a></li></ul><ul><li><a class='header-2' href='#----bottom-'><code>bottom</code></a></li></ul><ul><li><a class='header-2' href='#----top-'><code>top</code></a></li></ul><ul><li><a class='header-2' href='#----left-'><code>left</code></a></li></ul><ul><li><a class='header-2' href='#----right-'><code>right</code></a></li></ul><ul><li><a class='header-2' href='#----rect-'><code>rect</code></a></li></ul><ul><li><a class='header-2' href='#----origin_bottom_left!-'><code>origin_bottom_left!</code></a></li></ul><ul><li><a class='header-2' href='#----origin_center!-'><code>origin_center!</code></a></li></ul><ul><li><a class='header-2' href='#----orientation-'><code>orientation</code></a></li></ul><ul><li><a class='header-2' href='#----w-'><code>w</code></a></li></ul><ul><li><a class='header-2' href='#----h-'><code>h</code></a></li></ul><ul><li><a class='header-2' href='#---grid-hd-properties'>Grid HD Properties</a></li></ul><ul><ul><li><a class='header-3' href='#-----hd_left-'><code>hd_left</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----hd_right-'><code>hd_right</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----hd_bottom-'><code>hd_bottom</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----hd_top-'><code>hd_top</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----hd_offset_x-'><code>hd_offset_x</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----hd_offset_y-'><code>hd_offset_y</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----window_width-'><code>window_width</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----window_height-'><code>window_height</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----native_width-'><code>native_width</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----native_height-'><code>native_height</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----native_scale-'><code>native_scale</code></a></li></ul></ul><ul><ul><li><a class='header-3' href='#-----native_scale_enum-'><code>native_scale_enum</code></a></li></ul></ul><li><a class='header-1' href='#--geometry-(-args-geometry-)'>Geometry (<code>args.geometry</code>)</a></li>
<ul><li><a class='header-2' href='#----intersect_rect--'><code>intersect_rect?</code></a></li></ul><ul><li><a class='header-2' href='#----inside_rect--'><code>inside_rect?</code></a></li></ul><ul><li><a class='header-2' href='#----scale_rect-'><code>scale_rect</code></a></li></ul><ul><li><a class='header-2' href='#----scale_rect_extended-'><code>scale_rect_extended</code></a></li></ul><ul><li><a class='header-2' href='#----anchor_rect-'><code>anchor_rect</code></a></li></ul><ul><li><a class='header-2' href='#----angle_from-'><code>angle_from</code></a></li></ul><ul><li><a class='header-2' href='#----angle_to-'><code>angle_to</code></a></li></ul><ul><li><a class='header-2' href='#----distance-'><code>distance</code></a></li></ul><ul><li><a class='header-2' href='#----point_inside_circle--'><code>point_inside_circle?</code></a></li></ul><ul><li><a class='header-2' href='#----center_inside_rect-'><code>center_inside_rect</code></a></li></ul><ul><li><a class='header-2' href='#----ray_test-'><code>ray_test</code></a></li></ul><ul><li><a class='header-2' href='#----line_rise_run-'><code>line_rise_run</code></a></li></ul><ul><li><a class='header-2' href='#----rotate_point-'><code>rotate_point</code></a></li></ul><ul><li><a class='header-2' href='#----find_intersect_rect-'><code>find_intersect_rect</code></a></li></ul><ul><li><a class='header-2' href='#----find_all_intersect_rect-'><code>find_all_intersect_rect</code></a></li></ul><ul><li><a class='header-2' href='#----find_intersect_rect_quad_tree-'><code>find_intersect_rect_quad_tree</code></a></li></ul><ul><li><a class='header-2' href='#----find_all_intersect_rect_quad_tree-'><code>find_all_intersect_rect_quad_tree</code></a></li></ul><ul><li><a class='header-2' href='#----create_quad_tree-'><code>create_quad_tree</code></a></li></ul><li><a class='header-1' href='#--audio-(-args-audio-)'>Audio (<code>args.audio</code>)</a></li>
<ul><li><a class='header-2' href='#---one-time-sounds'>One-Time Sounds</a></li></ul><ul><li><a class='header-2' href='#---looping-audio'>Looping Audio</a></li></ul><ul><li><a class='header-2' href='#---setting-additional-audio-properties'>Setting Additional Audio Properties</a></li></ul><ul><li><a class='header-2' href='#---advanced-audio-manipulate-(crossfade)'>Advanced Audio Manipulate (Crossfade)</a></li></ul><ul><li><a class='header-2' href='#---audio-encoding-trouble-shooting'>Audio encoding trouble shooting</a></li></ul><ul><li><a class='header-2' href='#---audio-synthesis'>Audio synthesis</a></li></ul><ul><ul><li><a class='header-3' href='#----sound-source'>Sound source</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----example-'>Example:</a></li></ul></ul><li><a class='header-1' href='#--easing-(-args-easing-)'>Easing (<code>args.easing</code>)</a></li>
<ul><li><a class='header-2' href='#----ease-'><code>ease</code></a></li></ul><ul><ul><li><a class='header-3' href='#----examples'>Examples</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----easing-definitions'>Easing Definitions</a></li></ul></ul><li><a class='header-1' href='#--pixel-arrays-(-args-pixel_arrays-)'>Pixel Arrays (<code>args.pixel_arrays</code>)</a></li>
<ul><li><a class='header-2' href='#---related-sample-apps'>Related Sample Apps</a></li></ul><li><a class='header-1' href='#--cvars-(-args-cvars-)'>CVars (<code>args.cvars</code>)</a></li>
<li><a class='header-1' href='#--outputs-(-args-outputs-)'>Outputs (<code>args.outputs</code>)</a></li>
<ul><li><a class='header-2' href='#---render-order'>Render Order</a></li></ul><ul><li><a class='header-2' href='#----solids-'><code>solids</code></a></li></ul><ul><ul><li><a class='header-3' href='#----rendering-a-solid-using-an-array'>Rendering a solid using an Array</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----rendering-a-solid-using-an-array-with-colors-and-alpha'>Rendering a solid using an Array with colors and alpha</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----rendering-a-solid-using-a-hash'>Rendering a solid using a Hash</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----rendering-a-solid-using-a-class'>Rendering a solid using a Class</a></li></ul></ul><ul><li><a class='header-2' href='#----borders-'><code>borders</code></a></li></ul><ul><li><a class='header-2' href='#----sprites-'><code>sprites</code></a></li></ul><ul><ul><li><a class='header-3' href='#----rendering-a-sprite-using-an-array'>Rendering a sprite using an Array</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----rendering-a-sprite-using-an-array-with-colors-and-alpha'>Rendering a sprite using an Array with colors and alpha</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----rendering-a-sprite-using-a-hash'>Rendering a sprite using a Hash</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----rendering-a-sprite-using-a-class'>Rendering a sprite using a Class</a></li></ul></ul><ul><li><a class='header-2' href='#----labels-'><code>labels</code></a></li></ul><ul><ul><li><a class='header-3' href='#----rendering-a-label-using-an-array'>Rendering a label using an Array</a></li></ul></ul><ul><ul><li><a class='header-3' href='#----rendering-a-label-using-a-hash'>Rendering a label using a Hash</a></li></ul></ul><ul><li><a class='header-2' href='#----screenshots-'><code>Screenshots</code></a></li></ul><ul><ul><li><a class='header-3' href='#----chroma-key-(making-a-color-transparent)'>Chroma key (Making a color transparent)</a></li></ul></ul><li><a class='header-1' href='#--layout-(-args-layout-)'>Layout (<code>args.layout</code>)</a></li>
<ul><li><a class='header-2' href='#----rect-'><code>rect</code></a></li></ul><ul><li><a class='header-2' href='#----debug_primitives-'><code>debug_primitives</code></a></li></ul><li><a class='header-1' href='#---array-'><code>Array</code></a></li>
<ul><li><a class='header-2' href='#----map_2d-'><code>map_2d</code></a></li></ul><ul><li><a class='header-2' href='#----include_any--'><code>include_any?</code></a></li></ul><ul><li><a class='header-2' href='#----any_intersect_rect--'><code>any_intersect_rect?</code></a></li></ul><ul><li><a class='header-2' href='#----map-'><code>map</code></a></li></ul><ul><li><a class='header-2' href='#----each-'><code>each</code></a></li></ul><ul><li><a class='header-2' href='#----reject_nil-'><code>reject_nil</code></a></li></ul><ul><li><a class='header-2' href='#----reject_false-'><code>reject_false</code></a></li></ul><ul><li><a class='header-2' href='#----product-'><code>product</code></a></li></ul><li><a class='header-1' href='#---numeric-'><code>Numeric</code></a></li>
<ul><li><a class='header-2' href='#----frame_index-'><code>frame_index</code></a></li></ul><ul><li><a class='header-2' href='#----elapsed_time-'><code>elapsed_time</code></a></li></ul><ul><li><a class='header-2' href='#----elapsed--'><code>elapsed?</code></a></li></ul><ul><li><a class='header-2' href='#----new--'><code>new?</code></a></li></ul><li><a class='header-1' href='#---kernel-'><code>Kernel</code></a></li>
<ul><li><a class='header-2' href='#----tick_count-'><code>tick_count</code></a></li></ul><ul><li><a class='header-2' href='#----global_tick_count-'><code>global_tick_count</code></a></li></ul></ul>    </div>
    <div id='content'>
<h1 id='--welcome'>Welcome <a style='font-size: small; float: right;' href='#--welcome'>link</a></h1> 
<p>
Welcome to DragonRuby Game Toolkit!
</p>
<p>
The information contained here is all available in your the zip file at <code>./docs/docs.html</code>. You can browse the docs in a local website by starting up DragonRuby and going to <code>http://localhost:9001</code>.
</p>
<h1 id='--tips-for-learning-dragonruby-game-toolkit'>Tips for Learning DragonRuby Game Toolkit <a style='font-size: small; float: right;' href='#--tips-for-learning-dragonruby-game-toolkit'>link</a></h1> 
<p>
The following tips will help you learn the DragonRuby quickly.
</p>
<h2 id='---tip-#1--join-the-community'>Tip #1: Join the Community <a style='font-size: small; float: right;' href='#---tip-#1--join-the-community'>link</a></h2> 
<p>
Our Discord server is extremely supportive and helpful. It's the best place to get answers to your questions. The developers of DragonRuby are also on this server if you have any feedback or bug reports.
</p>
<p>
The Link to Our Discord Server is: <a href='http://discord.dragonruby.org'>http://discord.dragonruby.org</a>.
</p>
<p>
The News Letter will keep you in the loop with regards to current DragonRuby Events: <a href='http://dragonrubydispatch.com'>http://dragonrubydispatch.com</a>.
</p>
<h2 id='---tip-#2--read-the-book'>Tip #2: Read the Book <a style='font-size: small; float: right;' href='#---tip-#2--read-the-book'>link</a></h2> 
<p>
Brett Chalupa (one of our community members) has written a book to help you get started: <a href='https://book.dragonriders.community/'>https://book.dragonriders.community/</a>
</p>
<h2 id='---tip-#3--watch-the-tutorial-video'>Tip #3: Watch the Tutorial Video <a style='font-size: small; float: right;' href='#---tip-#3--watch-the-tutorial-video'>link</a></h2> 
<p>
Here are some videos to help you get the lay of the land.
</p>
<ol>
<li> Building Tetris - Part 1: <a href='https://youtu.be/xZMwRSbC4rY'>https://youtu.be/xZMwRSbC4rY</a></li>
<li> Building Tetris - Part 2: <a href='https://youtu.be/C3LLzDUDgz4'>https://youtu.be/C3LLzDUDgz4</a></li>
</ol>
<h2 id='---tip-#4--go-through-the-sample-apps-in-order'>Tip #4: Go Through the Sample Apps in Order <a style='font-size: small; float: right;' href='#---tip-#4--go-through-the-sample-apps-in-order'>link</a></h2> 
<p>
The sample apps are located in the <code>./samples</code> directory. The samples are ordered by increasing difficulty and cover all aspects of the game engine.
</p>
<h1 id='--getting-started-tutorial'>Getting Started Tutorial <a style='font-size: small; float: right;' href='#--getting-started-tutorial'>link</a></h1> 
<p>
This is a tutorial written by Ryan C Gordon (a Juggernaut in the industry who has contracted to Valve, Epic, Activision, and EA... check out his Wikipedia page: <a href='https://en.wikipedia.org/wiki/Ryan_C._Gordon'>https://en.wikipedia.org/wiki/Ryan_C._Gordon</a>).
</p>
<h2 id='---introduction'>Introduction <a style='font-size: small; float: right;' href='#---introduction'>link</a></h2> 
<p>
Welcome!
</p>
<p>
Here's just a little push to get you started if you're new to programming or game development.
</p>
<p>
If you want to write a game, it's no different than writing any other program for any other framework: there are a few simple rules that might be new to you, but more or less programming is programming no matter what you are building.
</p>
<p>
Did you not know that? Did you think you couldn't write a game because you're a "web guy" or you're writing Java at a desk job? Stop letting people tell you that you can't, because you already have everything you need.
</p>
<p>
Here, we're going to be programming in a language called "Ruby." In the interest of full disclosure, I (Ryan Gordon) wrote the C parts of this toolkit and Ruby looks a little strange to me (Amir Rajan wrote the Ruby parts, discounting the parts I mangled), but I'm going to walk you through the basics because we're all learning together, and if you mostly think of yourself as someone that writes C (or C++, C#, Objective-C), PHP, or Java, then you're only a step behind me right now.
</p>
<h2 id='---prerequisites'>Prerequisites <a style='font-size: small; float: right;' href='#---prerequisites'>link</a></h2> 
<p>
Here's the most important thing you should know: Ruby lets you do some complicated things really easily, and you can learn that stuff later. I'm going to show you one or two cool tricks, but that's all.
</p>
<p>
Do you know what an if statement is? A for-loop? An array? That's all you'll need to start.
</p>
<h2 id='---the-game-loop'>The Game Loop <a style='font-size: small; float: right;' href='#---the-game-loop'>link</a></h2> 
<p>
Ok, here are few rules with regards to game development with GTK:
</p>
<ul>
<li>Your game is all going to happen under one function ...</li>
<li>that runs 60 times a second ...</li>
<li>and has to tell the computer what to draw each time.</li>
</ul>
<p>
That's an entire video game in one run-on sentence.
</p>
<p>
Here's that function. You're going to want to put this in mygame/app/main.rb, because that's where we'll look for it by default. Load it up in your favorite text editor.
</p>
<pre>def tick args
  args.outputs.labels &lt;&lt; [580, 400, 'Hello World!']
end
</pre>
<p>
Now run <code>dragonruby</code> ...did you get a window with "Hello World!" written in it? Good, you're officially a game developer!
</p>
<h2 id='---breakdown-of-the--tick--method'>Breakdown Of The <code>tick</code> Method <a style='font-size: small; float: right;' href='#---breakdown-of-the--tick--method'>link</a></h2> 
<p>
<code>mygame/app/main.rb</code>, is where the Ruby source code is located. This looks a little strange, so I'll break it down line by line. In Ruby, a '#' character starts a single-line comment, so I'll talk about this inline.
</p>
<pre># This "def"ines a function, named "tick," which takes a single argument
# named "args". DragonRuby looks for this function and calls it every
# frame, 60 times a second. "args" is a magic structure with lots of
# information in it. You can set variables in there for your own game state,
# and every frame it will updated if keys are pressed, joysticks moved,
# mice clicked, etc.
def tick args

  # One of the things in "args" is the "outputs" object that your game uses
  # to draw things. Afraid of rendering APIs? No problem. In DragonRuby,
  # you use arrays to draw things and we figure out the details.
  # If you want to draw text on the screen, you give it an array (the thing
  # in the [ brackets ]), with an X and Y coordinate and the text to draw.
  # The "&lt;&lt;" thing says "append this hash onto the list of them at
  # args.outputs.labels)
  args.outputs.labels &lt;&lt; { x: 580, y: 400, text: 'Hello World!' }
end
</pre>
<p>
Once your <code>tick</code> function finishes, we look at all the arrays you made and figure out how to draw it. You don't need to know about graphics APIs. You're just setting up some arrays! DragonRuby clears out these arrays every frame, so you just need to add what you need _right now_ each time.
</p>
<h2 id='---rendering-a-sprite'>Rendering A Sprite <a style='font-size: small; float: right;' href='#---rendering-a-sprite'>link</a></h2> 
<p>
Now let's spice this up a little.
</p>
<p>
We're going to add some graphics. Each 2D image in DragonRuby is called a "sprite," and to use them, you just make sure they exist in a reasonable file format (png, jpg, gif, bmp, etc) and specify them by filename. The first time you use one, DragonRuby will load it and keep it in video memory for fast access in the future. If you use a filename that doesn't exist, you get a fun checkerboard pattern!
</p>
<p>
There's a "dragonruby.png" file included, just to get you started. Let's have it draw every frame with our text:
</p>
<pre>def tick args
  args.outputs.labels  &lt;&lt; { x: 580, y: 400, text: 'Hello World!' }
  args.outputs.sprites &lt;&lt; { x: 576, y: 100, w: 128, h: 101, path: 'dragonruby.png' }
end
</pre>
<p>
(Pro Tip: you don't have to restart DragonRuby to test your changes; when you save main.rb, DragonRuby will notice and reload your program.)
</p>
<p>
That <code>.sprites</code> line says "add a sprite to the list of sprites we're drawing, and draw it at position (576, 100) at a size of 128x101 pixels". You can find the image to draw at dragonruby.png.
</p>
<h2 id='---coordinate-system-and-virtual-canvas'>Coordinate System and Virtual Canvas <a style='font-size: small; float: right;' href='#---coordinate-system-and-virtual-canvas'>link</a></h2> 
<p>
Quick note about coordinates: (0, 0) is the bottom left corner of the screen, and positive numbers go up and to the right. This is more "geometrically correct," even if it's not how you remember doing 2D graphics, but we chose this for a simpler reason: when you're making Super Mario Brothers and you want Mario to jump, you should be able to add to Mario's y position as he goes up and subtract as he falls. It makes things easier to understand.
</p>
<p>
Also: your game screen is _always_ 1280x720 pixels. If you resize the window, we will scale and letterbox everything appropriately, so you never have to worry about different resolutions.
</p>
<p>
Ok, now we have an image on the screen, let's animate it:
</p>
<pre>def tick args
  args.state.rotation  ||= 0

  args.state.rotation  -= 1

  args.outputs.labels  &lt;&lt; { x: 580, y: 400, text: 'Hello World!' }
  args.outputs.sprites &lt;&lt; { x: 576,
                            y: 100,
                            w: 128,
                            h: 101,
                            path: 'dragonruby.png',
                            angle: args.state.rotation }
end
</pre>
<p>
Now you can see that this function is getting called a lot!
</p>
<h2 id='---game-state'>Game State <a style='font-size: small; float: right;' href='#---game-state'>link</a></h2> 
<p>
Here's a fun Ruby thing: <code>args.state.rotation ||= 0</code> is shorthand for "if args.state.rotation isn't initialized, set it to zero." It's a nice way to embed your initialization code right next to where you need the variable.
</p>
<p>
<code>args.state</code> is a place you can hang your own data. It's an open data structure that allows you to define properties that are arbitrarily nested. You don't need to define any kind of class.
</p>
<p>
In this case, the current rotation of our sprite, which is happily spinning at 60 frames per second. If you don't specify rotation (or alpha, or color modulation, or a source rectangle, etc), DragonRuby picks a reasonable default, and the array is ordered by the most likely things you need to tell us: position, size, name.
</p>
<h2 id='---there-is-no-delta-time'>There Is No Delta Time <a style='font-size: small; float: right;' href='#---there-is-no-delta-time'>link</a></h2> 
<p>
One thing we decided to do in DragonRuby is not make you worry about delta time: your function runs at 60 frames per second (about 16 milliseconds) and that's that. Having to worry about framerate is something massive triple-AAA games do, but for fun little 2D games? You'd have to work really hard to not hit 60fps. All your drawing is happening on a GPU designed to run Fortnite quickly; it can definitely handle this.
</p>
<p>
Since we didn't make you worry about delta time, you can just move the rotation by 1 every time and it works without you having to keep track of time and math. Want it to move faster? Subtract 2.
</p>
<h2 id='---handling-user-input'>Handling User Input <a style='font-size: small; float: right;' href='#---handling-user-input'>link</a></h2> 
<p>
Now, let's move that image around.
</p>
<pre>def tick args
  args.state.rotation ||= 0
  args.state.x ||= 576
  args.state.y ||= 100

  if args.inputs.mouse.click
    args.state.x = args.inputs.mouse.x - 64
    args.state.y = args.inputs.mouse.y - 50
  end

  args.outputs.labels  &lt;&lt; { x: 580, y: 400, text: 'Hello World!' }
  args.outputs.sprites &lt;&lt; { x: args.state.x,
                            y: args.state.y,
                            w: 128,
                            h: 101,
                            path: 'dragonruby.png',
                            angle: args.state.rotation }

  args.state.rotation -= 1
end
</pre>
<p>
Everywhere you click your mouse, the image moves there. We set a default location for it with <code>args.state.x ||= 576</code>, and then we change those variables when we see the mouse button in action. You can get at the keyboard and game controllers in similar ways.
</p>
<h2 id='---coding-on-a-raspberry-pi'>Coding On A Raspberry Pi <a style='font-size: small; float: right;' href='#---coding-on-a-raspberry-pi'>link</a></h2> 
<p>
We have only tested DragonRuby on a Raspberry Pi 3, Models B and B+, but we believe it _should_ work on any model with comparable specs.
</p>
<p>
If you're running DragonRuby Game Toolkit on a Raspberry Pi, or trying to run a game made with the Toolkit on a Raspberry Pi, and it's really really slow-- like one frame every few seconds--then there's likely a simple fix.
</p>
<p>
You're probably running a desktop environment: menus, apps, web browsers, etc. This is okay! Launch the terminal app and type:
</p>
<pre>do raspi-config
</pre>
<p>
It'll ask you for your password (if you don't know, try "raspberry"), and then give you a menu of options. Find your way to "Advanced Options", then "GL Driver", and change this to "GL (Full KMS)"  ... not "fake KMS," which is also listed there. Save and reboot. In theory, this should fix the problem.
</p>
<p>
If you're _still_ having problems and have a Raspberry Pi 2 or better, go back to raspi-config and head over to "Advanced Options", "Memory split," and give the GPU 256 megabytes. You might be able to avoid this for simple games, as this takes RAM away from the system and reserves it for graphics. You can also try 128 megabytes as a gentler option.
</p>
<p>
Note that you can also run DragonRuby without X11 at all: if you run it from a virtual terminal it will render fullscreen and won't need the "Full KMS" option. This might be attractive if you want to use it as a game console sort of thing, or develop over ssh, or launch it from RetroPie, etc.
</p>
<h2 id='---conclusion'>Conclusion <a style='font-size: small; float: right;' href='#---conclusion'>link</a></h2> 
<p>
There is a lot more you can do with DragonRuby, but now you've already got just about everything you need to make a simple game. After all, even the most fancy games are just creating objects and moving them around. Experiment a little. Add a few more things and have them interact in small ways. Want something to go away? Just don't add it to <code>args.output</code> anymore.
</p>
<h1 id='--starting-a-new-dragonruby-project'>Starting a New DragonRuby Project <a style='font-size: small; float: right;' href='#--starting-a-new-dragonruby-project'>link</a></h1> 
<p>
The DragonRuby zip that contains the engine is a complete, self contained project structure. To create a new project, unzip the zip file again in its entirety and use that as a starting point for another game. This is the recommended approach to starting a new project.
</p>
<h2 id='---considerations-for-public-git-repositories'>Considerations For Public Git Repositories <a style='font-size: small; float: right;' href='#---considerations-for-public-git-repositories'>link</a></h2> 
<p>
You can open source your game's code given the following options.
</p>
<h3 id='----option-1-(recommended)'>Option 1 (Recommended) <a style='font-size: small; float: right;' href='#----option-1-(recommended)'>link</a></h3> 
<p>
Your public repository needs only to contain the contents of <code>./mygame</code>. This approach is the cleanest and doesn't require your <code>.gitignore</code> to be polluted with DragonRuby specific files.
</p>
<h3 id='----option-2-(restrictions-apply)'>Option 2 (Restrictions Apply) <a style='font-size: small; float: right;' href='#----option-2-(restrictions-apply)'>link</a></h3> 
<p>
IMPORTANT: Do NOT commit <code>dragonruby-publish(.exe)</code>, or <code>dragonruby-bind(.exe)</code>.
</p>
<pre>dragonruby
dragonruby.exe
dragonruby-publish
dragonruby-publish.exe
dragonruby-bind
dragonruby-bind.exe
/tmp/
/builds/
/logs/
/samples/
/docs/
/.dragonruby/
</pre>
<p>
If you'd like people who do not own a DragonRuby license to run your game, you may include the <code>dragonruby(.exe)</code> binary within the repo. This permission is granted in good-faith and can be revoked if abused.
</p>
<h2 id='---considerations-for-private-git-repos'>Considerations For Private Git Repos <a style='font-size: small; float: right;' href='#---considerations-for-private-git-repos'>link</a></h2> 
<p>
The following <code>.gitignore</code> should be used for private repositories (commercial games).
</p>
<pre>/tmp/
/logs/
</pre>
<p>
You'll notice that everything else is committed to source control (even the <code>./samples</code>, <code>./docs</code>, and <code>./builds</code> directory).
</p>
<p>
The DragonRuby binary/package is designed to be committed in its entirety with your source code (it’s why we keep it small). This protects the “shelf life” for commercial games. 3 years from now, we might be on a vastly different version of the engine. But you know that the code you’ve written will definitely work with the version that was committed to source control. For private repositories, it's strongly recommended that you do NOT keep DragonRuby Game Toolkit in a shared location and instead unzip a clean copy for every game (and commit everything to source control).
</p>
<p>
IMPORTANT: File access functions are sandoxed and assume that the <code>dragonruby</code> binary lives alongside the game you are building. Do not expect file access functions to return correct values if you are attempting to run the <code>dragonruby</code> binary from a shared location. It's recommended that the directory structure contained in the zip is not altered and games are built using that starter template.
</p>
<h1 id='--deploying-to-itch-io'>Deploying To Itch.io <a style='font-size: small; float: right;' href='#--deploying-to-itch-io'>link</a></h1> 
<p>
Once you've built your game, you're all set to deploy! Good luck in your game dev journey and if you get stuck, come to the Discord channel!
</p>
<h2 id='---creating-your-game-landing-page'>Creating Your Game Landing Page <a style='font-size: small; float: right;' href='#---creating-your-game-landing-page'>link</a></h2> 
<p>
Log into Itch.io and go to <a href='https://itch.io/game/new'>https://itch.io/game/new</a>.
</p>
<ul>
<li>Title: Give your game a Title. This value represents your `gametitle`.</li>
<li>Project URL: Set your project url. This value represents your `gameid`.</li>
<li>Classification: Keep this as Game.</li>
<li>Kind of Project: Select HTML from the drop down list. Don't worry,
  the HTML project type _also supports binary downloads_.</li>
<li>Uploads: Skip this section for now.</li>
</ul>
<p>
You can fill out all the other options later.
</p>
<h2 id='---update-your-game-s-metadata'>Update Your Game's Metadata <a style='font-size: small; float: right;' href='#---update-your-game-s-metadata'>link</a></h2> 
<p>
Point your text editor at mygame/metadata/game_metadata.txt and make it look like this:
</p>
<p>
NOTE: Remove the <code>#</code> at the beginning of each line.
</p>
<pre>devid=bob
devtitle=Bob The Game Developer
gameid=mygame
gametitle=My Game
version=0.1
</pre>
<p>
The <code>devid</code> property is the username you use to log into Itch.io. The <code>devtitle</code> is your name or company name (it can contain spaces). The <code>gameid</code> is the Project URL value. The <code>gametitle</code> is the name of your game (it can contain spaces). The <code>version</code> can be any <code>major.minor</code> number format.
</p>
<h2 id='---building-your-game-for-distribution'>Building Your Game For Distribution <a style='font-size: small; float: right;' href='#---building-your-game-for-distribution'>link</a></h2> 
<p>
Open up the terminal and run this from the command line:
</p>
<pre>./dragonruby-publish --only-package mygame
</pre>
<p>
(if you're on Windows, don't put the "./" on the front. That's a Mac and Linux thing.)
</p>
<p>
A directory called <code>./build</code> will be created that contains your binaries. You can upload this to Itch.io manually.
</p>
<h3 id='----browser-game-settings'>Browser Game Settings <a style='font-size: small; float: right;' href='#----browser-game-settings'>link</a></h3> 
<p>
For the HTML version of your game, the following configuration is required for your game to run correctly:
</p>
<ul>
<li>Check the checkbox labeled <code>This file will be played in the browser</code> for the html version of your game (it's one of the zip files you'll upload).</li>
<li>Ensure that <code>Embed options -&gt; SharedArrayBuffer support</code> is checked.</li>
<li>Be sure to set the <code>Viewport dimensions</code> to <code>1280x720</code> for landscape games or your game will not be positioned correctly on your Itch.io page.</li>
<li>Be sure to set the <code>Viewport dimensions</code> to <code>540x960</code> for portrait games or your game will not be positioned correctly on your Itch.io page.</li>
</ul>
<p>
For subsequent updates you can use an automated deployment to Itch.io:
</p>
<pre>./dragonruby-publish mygame
</pre>
<p>
DragonRuby will package _and publish_ your game to itch.io! Tell your friends to go to your game's very own webpage and buy it!
</p>
<p>
If you make changes to your game, just re-run dragonruby-publish and it'll update the downloads for you.
</p>
<h3 id='----consider-adding-pause-when-game-is-in-background'>Consider Adding Pause When Game is In Background <a style='font-size: small; float: right;' href='#----consider-adding-pause-when-game-is-in-background'>link</a></h3> 
<p>
It's a good idea to pause the game if it doesn't have focus. Here's an example of how to do that
</p>
<pre>def tick args
  # if the keyboard doesn't have focus, and the game is in production mode, and it isn't the first tick
  if !args.inputs.keyboard.has_focus &amp;&amp; args.gtk.production &amp;&amp; args.state.tick_count != 0
    args.outputs.background_color = [0, 0, 0]
    args.outputs.labels &lt;&lt; { x: 640, y: 360, text: "Game Paused (click to resume).", alignment_enum: 1, r: 255, g: 255, b: 255 }
    # consider setting all audio volume to 0.0
  else
    # perform your regular tick function
  end
end
</pre>
<p>
If you want your game to run at full speed even when it's in the background, add the following line to <code>mygame/metadata/cvars.txt</code>:
</p>
<pre>renderer.background_sleep=0
</pre>
<h3 id='----consider-adding-a-request-to-review-your-game-in-game'>Consider Adding a Request to Review Your Game In-Game <a style='font-size: small; float: right;' href='#----consider-adding-a-request-to-review-your-game-in-game'>link</a></h3> 
<p>
Getting reviews of your game are extremely important and it's recommended that you put an option to review within the game itself. You can use <code>args.gtk.open_url</code> plus a review URL. Here's an example:
</p>
<pre>def tick args
  # render the review button
  args.state.review_button ||= { x: 640 - 50, y: 360 - 25, w: 100, h: 50, path: :pixel, r: 0, g: 0, b: 0 }
  args.outputs.sprites &lt;&lt; args.state.review_button
  args.outputs.labels &lt;&lt; { x: 640, y: 360, anchor_x: 0.5, anchor_y: 0.5, text: "Review" }

  # check to see if the review button was clicked
  if args.inputs.mouse.intersect_rect? args.state.review_button
    # open platform specific review urls
    if args.gtk.platform? :ios
      # your app id is provided at Apple's Developer Portal (numeric value)
      args.gtk.openurl "itms-apps://itunes.apple.com/app/idYOURGAMEID?action=write-review"
    elsif args.gtk.platform? :android
      # your app id is the name of your android package
      args.gtk.openurl ""https://play.google.com/store/apps/details?id=YOURGAMEID"
    elsif args.gtk.platform? :web
      # if they are playing the web version of the game, take them to the purchase page on itch
      args.gtk.openurl "https://amirrajan.itch.io/YOURGAMEID/purchase"
    else
      # if they are playing the desktop version of the game, take them to itch's rating page
      args.gtk.openurl "https://amirrajan.itch.io/YOURGAMEID/rate?source=game"
    end
  end
end
</pre>
<h1 id='--deploying-to-mobile-devices'>Deploying To Mobile Devices <a style='font-size: small; float: right;' href='#--deploying-to-mobile-devices'>link</a></h1> 
<p>
If you have a Pro subscription, you also have the capability to deploy to mobile devices.
</p>
<h2 id='---deploying-to-ios'>Deploying to iOS <a style='font-size: small; float: right;' href='#---deploying-to-ios'>link</a></h2> 
<p>
To deploy to iOS, you need to have a Mac running MacOS Catalina, an iOS device, and an active/paid Developer Account with Apple. From the Console type: <code>$wizards.ios.start</code> and you will be guided through the deployment process.
</p>
<ul>
<li><code>$wizards.ios.start env: :dev</code> will deploy to an iOS device connected via USB.</li>
<li><code>$wizards.ios.start env: :hotload</code> will deploy to an iOS device connected via USB with hotload enabled.</li>
<li><code>$wizards.ios.start env: :sim</code> will deploy to the iOS simulator.</li>
<li><code>$wizards.ios.start env: :prod</code> will package your game for distribution via Apple's AppStore.</li>
</ul>
<h2 id='---deploying-to-android'>Deploying to Android <a style='font-size: small; float: right;' href='#---deploying-to-android'>link</a></h2> 
<p>
To deploy to Android, you need to have an Android emulator/device, and an environment that is able to run Android SDK. <code>dragonruby-publish</code> will create an APK for you. From there, you can sign the APK and install it to your device. The signing and installation procedure varies from OS to OS. Here's an example of what the command might look like:
</p>
<pre># generating a keystore
keytool -genkey -v -keystore APP.keystore -alias mygame -keyalg RSA -keysize 2048 -validity 10000

# deploying to a local device/emulator
apksigner sign --ks mygame.keystore mygame-android.apk
adb install mygame-android.apk
# read logs of device
adb logcat -e mygame

# signing for Google Play
apksigner sign --min-sdk-version 21 --ks ./profiles/APP.keystore ./builds/APP-googleplay.aab
</pre>
<h1 id='--deploying-to-steam'>Deploying To Steam <a style='font-size: small; float: right;' href='#--deploying-to-steam'>link</a></h1> 
<p>
If you have a Indie or Pro subscription, you also get streamlined deployment to Steam via <code>dragonruby-publish</code>. Please note that games developed using the Standard license can deploy to Steam using the Steamworks toolchain <a href='https://partner.steamgames.com/doc/store/releasing'>https://partner.steamgames.com/doc/store/releasing</a>.
</p>
<h2 id='---testing-on-your-steam-deck'>Testing on Your Steam Deck <a style='font-size: small; float: right;' href='#---testing-on-your-steam-deck'>link</a></h2> 
<h3 id='----easy-setup'>Easy Setup <a style='font-size: small; float: right;' href='#----easy-setup'>link</a></h3> 
<ol>
<li> Run <code>dragonruby-publish --only-package</code>.</li>
<li> Find the Linux build of your game under the <code>./builds</code> directory and load it onto an SD Card.</li>
<li> Restart the Steam Deck in Desktop Mode.</li>
<li> Copy your game binary onto an SD card.</li>
<li> Find the game on the SD card and double click binary.</li>
</ol>
<h3 id='----advanced-setup'>Advanced Setup <a style='font-size: small; float: right;' href='#----advanced-setup'>link</a></h3> 
<ol>
<li> Restart the Steam Deck in Desktop Mode.</li>
<li> Open up Konsole and set an admin password via <code>passwd</code>.</li>
<li> Disable readonly mode: <code>sudo steamos-readonly disable</code>.</li>
<li> Update pacman <code>sudo pacman-key --populate archlinux</code>.</li>
<li> Update sshd_config <code>sudo vim /etc/ssh/sshd_config</code> and uncomment the <code>PubkeyAuthentication yes</code> line.</li>
<li> Enable ssh: <code>sudo systemctl enable sshd</code>.</li>
<li> Start ssh: <code>sudo systemctl start sshd</code>.</li>
<li> Run <code>dragonruby-publish --only-package</code>.</li>
<li> Use <code>scp</code> to copy the game over from your dev machine without needing an SD Card: <code>scp -R ./builds/SOURCE.bin deck@IP_ADDRESS:/home/deck/Downloads</code></li>
</ol>
<p>
Note: Steps 2 through 7 need only be done once.
</p>
<p>
Note: <code>scp</code> comes pre-installed on Mac and Linux. You can download the tool for Windows from <a href='https://winscp.net/eng/index.php'>https://winscp.net/eng/index.php</a>
</p>
<h2 id='---setting-up-the-game-on-the-partner-site'>Setting up the game on the Partner Site <a style='font-size: small; float: right;' href='#---setting-up-the-game-on-the-partner-site'>link</a></h2> 
<h3 id='----getting-your-app-id'>Getting your App ID <a style='font-size: small; float: right;' href='#----getting-your-app-id'>link</a></h3> 
<p>
You'll need to create a product on Steam. This is unfortunately manual and requires identity verification for taxation purposes. Valve offers pretty robust documentation on all this, though. Eventually, you'll have an App ID for your game.
</p>
<p>
Go to https://partner.steamgames.com/apps/view/$APPID, where $APPID is your game's App ID.
</p>
<h3 id='----specifing-supported-operating-systems-for-your-game'>Specifing Supported Operating Systems for your game <a style='font-size: small; float: right;' href='#----specifing-supported-operating-systems-for-your-game'>link</a></h3> 
<p>
Find the "Supported Operating Systems" section and make sure these things are checked:
</p>
<ul>
<li>Windows: 64 Bit Only</li>
<li>macOS: 64 Bit (Intel) and Apple Silicon</li>
<li>Linux: Including SteamOS</li>
</ul>
<p>
Click the "Save" button below it.
</p>
<h3 id='----setting-up-steampipe-depots'>Setting up SteamPipe Depots <a style='font-size: small; float: right;' href='#----setting-up-steampipe-depots'>link</a></h3> 
<p>
Click the "SteamPipe" tab at the top of the page, click on "depots"
</p>
<p>
Click the "Add a new depot" button. Give it a name like "My Game Name Linux Depot" and take whatever depot ID it offers you.
</p>
<p>
You'll see this new depot is listed on the page now. Fix its settings:
</p>
<ul>
<li>Language: All Languages</li>
<li>For DLC: Base App</li>
<li>Operating System: Linux + SteamOS</li>
<li>Architecture: 64-bit OS only</li>
<li>Platform: All</li>
</ul>
<p>
Do this again, make a "My Game Name Windows Depot", set it to the same things, except "Operating System," which should be "Windows," of course.
</p>
<p>
Do this again, make a "My Game Name Mac Depot", set it to the same things, except "Operating System," which should be "macOS," of course.
</p>
<p>
Push the big green "Save" button on the page. Now we have a place to upload platform-specific builds of your game.
</p>
<h3 id='----setting-up-launch-options'>Setting up Launch Options <a style='font-size: small; float: right;' href='#----setting-up-launch-options'>link</a></h3> 
<p>
Click on the "Installation" tab near the top of the page, then "General Installation".
</p>
<p>
Under "Launch Options," click the "Add new launch option" button, edit the new section that just popped up, and set it like this:
</p>
<p>
(Whenever you see "mygamename" in here, this should be whatever your game_metadata's "gameid" value is set to. If you see "My Game Name", it's whatever your game_metadata's "gametitle" value is set to, but you'll have to check in case we mangled it to work as a filename.)
</p>
<ul>
<li>Executable: mygamename.exe</li>
<li>Launch Type: Launch (Default)</li>
<li>Operating System: Windows</li>
<li>CPU Architecture: 64-bit only</li>
<li>Everything else can be default/blank.</li>
</ul>
<p>
Click the "Update" button on that section.
</p>
<p>
Add another launch option, as before:
</p>
<ul>
<li>Executable: My Game Name.app</li>
<li>Launch Type: Launch (Default)</li>
<li>Operating System: macOS</li>
</ul>
<p>
Add another launch option, as before:
</p>
<ul>
<li>Executable: mygamename</li>
<li>Launch Type: Launch (Default)</li>
<li>Operating System: Linux + SteamOS</li>
<li>CPU Architecture: 64-bit only</li>
</ul>
<h3 id='----publish-changes'>Publish Changes <a style='font-size: small; float: right;' href='#----publish-changes'>link</a></h3> 
<p>
Go to the "Publish" tab at near the top of the page. Click the "View Diffs" button and make sure it looks sane (it should just be the things we've changed in here), then click "Prepare for Publishing", then "Publish to Steam" and follow the instructions to publish these changes.
</p>
<p>
Go to https://partner.steamgames.com/apps/associated/$APPID For each package, make sure all three depots are included.
</p>
<h2 id='---configuring--dragonruby-publish-'>Configuring <code>dragonruby-publish</code> <a style='font-size: small; float: right;' href='#---configuring--dragonruby-publish-'>link</a></h2> 
<p>
You only have to do this part once when first setting up your game. Note that this capability is only available for Indie and Pro license tiers. If you have a Standard DragonRuby License, you'll need to use the Steamworks toolchains directly.
</p>
<p>
Go add a text file to your game's <code>metadata</code> directory called <code>steam_metadata.txt</code> ... note that this file will be filtered out <code>dragonruby-publish</code> packages the game and will not be distributed with the published game.
</p>
<pre>steam.publish=true
steam.branch=public
steam.username=AAA
steam.appid=BBB
steam.linux_depotid=CCC
steam.windows_depotid=DDD
steam.mac_depotid=EEE
</pre>
<p>
If steam.publish is set to <code>false</code> then dragonruby-publish will not attempt to upload to Steam. <code>false</code> is the default if this file, or this setting, is missing.
</p>
<p>
Where "AAA" is the login name on the Steamworks Partner Site to use for publishing builds, "BBB" is your game-specific AppID provided by Steam, "CCC", "DDD", and "EEE" are the DepotIDs you created for Linux, Windows, and macOS builds, respectively.
</p>
<h3 id='----setting-a-branch-live'>Setting a branch live <a style='font-size: small; float: right;' href='#----setting-a-branch-live'>link</a></h3> 
<p>
Once your build is uploaded, you can assign it to a specific branch through the interface on the Partner site. You can make arbitrary branches here, like "beta" or "nightly" or "fixing-weird-bug" or whatever. The one that goes to the end users without them switching branches, is "default" and you should assume this is where paying customers live, so be careful before you set a build live there.
</p>
<p>
You can have dragonruby-publish set the builds it publishes live on a branch immediately, if you prefer. Simply add...
</p>
<pre>steam.branch=XXX
</pre>
<p>
...to steam_metadata.txt, where "XXX" is the branch name from the partner website. If this is blank or unspecified, it will _not_ set the build live on _any_ branch. Setting the value to <code>public</code> will push to production.
</p>
<p>
A reasonable strategy is to create a (possibly passworded) branch called "staging" and have dragonruby-publish always push to there automatically. Then you can test from a Steam install, pushing as often as you like, and when you are satisfied, manually set the latest build live on default for the general public to download.
</p>
<p>
If you are feeling brave, you can always just set all published builds live on default, too. After all, if you break it, you can always just push a fix right away. :) (or use the Partner Site to roll back to a known-good build, you know.)
</p>
<h2 id='---publishing-build'>Publishing Build <a style='font-size: small; float: right;' href='#---publishing-build'>link</a></h2> 
<p>
Run dragonuby-publish as you normally would. When it is time to publish to Steam, it will set up any tools it needs, attempt to log you into Steam, and upload the latest version of your game.
</p>
<p>
Steam login is handled by Valve's <code>steamcmd</code> command line program, not <code>dragonruby-publish</code>. DragonRuby does not ever have access to your login credentials. You may need to take steps to get an authorization token in place if necessary, so you don't have to deal with Steam Guard in automated build processes (documentation on how to do this is forthcoming, or read Valve's SteamCMD manual for details).
</p>
<p>
You (currently) have to set the new build live on the partner site before users will receive it. Optionally automating this step is coming soon!
</p>
<h2 id='---questions/need-help-'>Questions/Need Help? <a style='font-size: small; float: right;' href='#---questions/need-help-'>link</a></h2> 
<p>
You probably have several. Please come visit the Discord and ask questions, and we'll do our best to help, and update this document.
</p>
<h1 id='--dragonruby-s-philosophy'>DragonRuby's Philosophy <a style='font-size: small; float: right;' href='#--dragonruby-s-philosophy'>link</a></h1> 
<p>
The following tenants of DragonRuby are what set us apart from other game engines. Given that Game Toolkit is a relatively new engine, there are definitely features that are missing. So having a big check list of "all the cool things" is not this engine's forte. This is compensated with a strong commitment to the following principles.
</p>
<h2 id='---challenge-the-status-quo'>Challenge The Status Quo <a style='font-size: small; float: right;' href='#---challenge-the-status-quo'>link</a></h2> 
<p>
Game engines of today are in a local maximum and don't take into consideration the challenges of this day and age. Unity and GameMaker specifically rot your brain. It's not sufficient to say:
</p>
<blockquote>
<p>
But that's how we've always done it.
</p>
</blockquote>
<p>
It's a hard pill to swallow, but forget blindly accepted best practices and try to figure out the underlying motivation for a specific approach to game development. Collaborate with us.
</p>
<h2 id='---continuity-of-design'>Continuity of Design <a style='font-size: small; float: right;' href='#---continuity-of-design'>link</a></h2> 
<p>
There is a programming idiom in software called "The Pit of Success". The term normalizes upfront pain as a necessity/requirement in the hopes that the investment will yield dividends "when you become successful" or "when the code becomes more complicated". This approach to development is strongly discouraged by us. It leads to over-architected and unnecessary code; creates barriers to rapid prototyping and shipping a game; and overwhelms beginners who are new to the engine or programming in general.
</p>
<p>
DragonRuby's philosophy is to provide multiple options across the "make it fast" vs "make it right" spectrum, with incremental/intuitive transitions between the options provided. A concrete example of this philosophy would be render primitives: the spectrum of options allows renderable constructs that take the form of tuples/arrays (easy to pickup, simple, and fast to code/prototype with), hashes (a little more work, but gives you the ability to add additional properties), open and strict entities (more work than hashes, but yields cleaner apis), and finally - if you really need full power/flexibility in rendering - classes (which take the most amount of code and programming knowledge to create).
</p>
<h2 id='---release-early-and-often'>Release Early and Often <a style='font-size: small; float: right;' href='#---release-early-and-often'>link</a></h2> 
<p>
The biggest mistake game devs make is spending too much time in isolation building their game. Release something, however small, and release it soon.
</p>
<p>
Stop worrying about everything being pixel perfect. Don't wait until your game is 100% complete. Build your game publicly and iterate. Post in the #show-and-tell channel in the community Discord. You'll find a lot of support and encouragement there.
</p>
<p>
Real artists ship. Remember that.
</p>
<h2 id='---sustainable-and-ethical-monetization'>Sustainable And Ethical Monetization <a style='font-size: small; float: right;' href='#---sustainable-and-ethical-monetization'>link</a></h2> 
<p>
We all aspire to put food on the table doing what we love. Whether it is building games, writing tools to support game development, or anything in between.
</p>
<p>
Charge a fair amount of money for the things you create. It's expected and encouraged within the community. Give what you create away for free to those that can't afford it.
</p>
<p>
If you are gainfully employed, pay full price for the things you use. If you do end up getting something at a discount, pay the difference "forward" to someone else.
</p>
<h2 id='---sustainable-and-ethical-open-source'>Sustainable And Ethical Open Source <a style='font-size: small; float: right;' href='#---sustainable-and-ethical-open-source'>link</a></h2> 
<p>
This goes hand in hand with sustainable and ethical monetization. The current state of open source is not sustainable. There is an immense amount of contributor burnout. Users of open source expect everything to be free, and few give back. This is a problem we want to fix (we're still trying to figure out the best solution).
</p>
<p>
So, don't be "that guy" in the Discord that says "DragonRuby should be free and open source!" You will be personally flogged by Amir.
</p>
<h2 id='---people-over-entities'>People Over Entities <a style='font-size: small; float: right;' href='#---people-over-entities'>link</a></h2> 
<p>
We prioritize the endorsement of real people over faceless entities. This game engine, and other products we create, are not insignificant line items of a large company. And you aren't a generic "commodity" or "corporate resource". So be active in the community Discord and you'll reap the benefits as more devs use DragonRuby.
</p>
<h2 id='---building-a-game-should-be-fun-and-bring-happiness'>Building A Game Should Be Fun And Bring Happiness <a style='font-size: small; float: right;' href='#---building-a-game-should-be-fun-and-bring-happiness'>link</a></h2> 
<p>
We will prioritize the removal of pain. The aesthetics of Ruby make it such a joy to work with, and we want to capture that within the engine.
</p>
<h2 id='---real-world-application-drives-features'>Real World Application Drives Features <a style='font-size: small; float: right;' href='#---real-world-application-drives-features'>link</a></h2> 
<p>
We are bombarded by marketing speak day in and day out. We don't do that here. There are things that are really great in the engine, and things that need a lot of work. Collaborate with us so we can help you reach your goals. Ask for features you actually need as opposed to anything speculative.
</p>
<p>
We want DragonRuby to *actually* help you build the game you want to build (as opposed to sell you something piece of demoware that doesn't work).
</p>
<h1 id='--frequently-asked-questions--comments--and-concerns'>Frequently Asked Questions, Comments, and Concerns <a style='font-size: small; float: right;' href='#--frequently-asked-questions--comments--and-concerns'>link</a></h1> 
<p>
Here are questions, comments, and concerns that frequently come up.
</p>
<h2 id='---frequently-asked-questions'>Frequently Asked Questions <a style='font-size: small; float: right;' href='#---frequently-asked-questions'>link</a></h2> 
<h3 id='----what-is-dragonruby-llp-'>What is DragonRuby LLP? <a style='font-size: small; float: right;' href='#----what-is-dragonruby-llp-'>link</a></h3> 
<p>
DragonRuby LLP is a partnership of four devs who came together with the goal of bringing the aesthetics and joy of Ruby, everywhere possible.
</p>
<p>
Under DragonRuby LLP, we offer a number of products (with more on the way):
</p>
<ul>
<li>Game Toolkit (GTK): A 2D game engine that is compatible with modern
  gaming platforms.</li>
<li>RubyMotion (RM): A compiler toolchain that allows you to build native, cross-platform mobile
  apps. <a href='http://rubymotion.com'>http://rubymotion.com</a></li>
</ul>
<p>
All of the products above leverage a shared core called DragonRuby.
</p>
<p>
NOTE: From an official branding standpoint each one of the products is suffixed with "A DragonRuby LLP Product" tagline. Also, DragonRuby is _one word, title cased_.
</p>
<p>
NOTE: We leave the "A DragonRuby LLP Product" off of this one because that just sounds really weird.
</p>
<p>
NOTE: Devs who use DragonRuby are "Dragon Riders/Riders of Dragons". That's a bad ass identifier huh?
</p>
<h3 id='----what-is-dragonruby-'>What is DragonRuby? <a style='font-size: small; float: right;' href='#----what-is-dragonruby-'>link</a></h3> 
<p>
The response to this question requires a few subparts. First we need to clarify some terms. Specifically _language specification_ vs _runtime_.
</p>
<h4>Okay... so what is the difference between a language specification and a runtime?</h4>
<p>
A runtime is an _implementation_ of a language specification. When people say "Ruby," they are usually referring to "the Ruby 3.0+ language specification implemented via the CRuby/MRI Runtime."
</p>
<p>
But, there are many Ruby Runtimes: CRuby/MRI, JRuby, Truffle, Rubinius, Artichoke, and (last but certainly not least) DragonRuby.
</p>
<h4>Okay... what language specification does DragonRuby use then?</h4>
<p>
DragonRuby's goal is to be compliant with the ISO/IEC 30170:2012 standard. It's syntax is Ruby 2.x compatible, but also contains semantic changes that help it natively interface with platform specific libraries.
</p>
<h4>So... why another runtime?</h4>
<p>
The elevator pitch is:
</p>
<p>
DragonRuby is a Multilevel Cross-platform Runtime. The "multiple levels" within the runtime allows us to target platforms no other Ruby can target: PC, Mac, Linux, Raspberry Pi, WASM, iOS, Android, Nintendo Switch, PS4, Xbox, and Stadia.
</p>
<h4>What does Multilevel Cross-platform mean?</h4>
<p>
There are complexities associated with targeting all the platforms we support. Because of this, the runtime had to be architected in such a way that new platforms could be easily added (which lead to us partitioning the runtime internally):
</p>
<ul>
<li>Level 1 we leverage a good portion of mRuby.</li>
<li>Level 2 consists of optimizations to mRuby we've made given that our
  target platforms are well known.</li>
<li>Level 3 consists of portable C libraries and their Ruby
  C-Extensions.</li>
</ul>
<p>
Levels 1 through 3 are fairly commonplace in many runtime implementations (with level 1 being the most portable, and level 3 being the fastest). But the DragonRuby Runtime has taken things a bit further:
</p>
<ul>
<li>Level 4 consists of shared abstractions around hardware I/O and operating
  system resources. This level leverages open source and proprietary   components within Simple DirectMedia Layer (a low level multimedia   component library that has been in active development for 22 years   and counting).</li>
<li>Level 5 is a code generation layer which creates metadata that allows
  for native interoperability with host runtime libraries. It also   includes OS specific message pump orchestrations.</li>
<li>Level 6 is a Ahead of Time/Just in Time Ruby compiler built with LLVM. This
  compiler outputs _very_ fast platform specific bitcode, but only   supports a subset of the Ruby language specification.</li>
</ul>
<p>
These levels allow us to stay up to date with open source implementations of Ruby; provide fast, native code execution on proprietary platforms; ensure good separation between these two worlds; and provides a means to add new platforms without going insane.
</p>
<h4>Cool cool. So given that I understand everything to this point, can we answer the original question? What is DragonRuby?</h4>
<p>
DragonRuby is a Ruby runtime implementation that takes all the lessons we've learned from MRI/CRuby, and merges it with the latest and greatest compiler and OSS technologies.
</p>
<h3 id='----how-is-dragonruby-different-than-mri-'>How is DragonRuby different than MRI? <a style='font-size: small; float: right;' href='#----how-is-dragonruby-different-than-mri-'>link</a></h3> 
<p>
DragonRuby supports a subset of MRI apis. Our target is to support all of mRuby's standard lib. There are challenges to this given the number of platforms we are trying to support (specifically console).
</p>
<h4>Does DragonRuby support Gems?</h4>
<p>
DragonRuby does not support gems because that requires the installation of MRI Ruby on the developer's machine (which is a non-starter given that we want DragonRuby to be a zero dependency runtime). While this seems easy for Mac and Linux, it is much harder on Windows and Raspberry Pi. mRuby has taken the approach of having a git repository for compatible gems and we will most likely follow suite: <a href='https://github.com/mruby/mgem-list'>https://github.com/mruby/mgem-list</a>.
</p>
<h4>Does DragonRuby have a REPL/IRB?</h4>
<p>
You can use DragonRuby's Console within the game to inspect object and execute small pieces of code. For more complex pieces of code create a file called <code>repl.rb</code> and put it in <code>mygame/app/repl.rb</code>:
</p>
<ul>
<li>Any code you write in there will be executed when you change the file. You can organize different pieces of code using the <code>repl</code> method:</li>
</ul>
<pre>repl do
  puts "hello world"
  puts 1 + 1
end
</pre>
<ul>
<li>If you use the `repl` method, the code will be executed and the DragonRuby Console will automatically open so you can see the results (on Mac and Linux, the results will also be printed to the terminal).</li>
<li>All <code>puts</code> statements will also be saved to <code>logs/puts.txt</code>. So if you want to stay in your editor and not look at the terminal, or the DragonRuby Console, you can <code>tail</code> this file.</li>
</ul>
<p>
4. To ignore code in <code>repl.rb</code>, instead of commenting it out, prefix <code>repl</code> with the letter <code>x</code> and it'll be ignored.
</p>
<pre>xrepl do # &lt;------- line is prefixed with an "x"
  puts "hello world"
  puts 1 + 1
end

# This code will be executed when you save the file.
repl do
  puts "Hello"
end

repl do
  puts "This code will also be executed."
end

# use xrepl to "comment out" code
xrepl do
  puts "This code will not be executed because of the x in front of repl".
end
</pre>
<h4>Does DragonRuby support <code>pry</code> or have any other debugging facilities?</h4>
<p>
<code>pry</code> is a gem that assumes you are using the MRI Runtime (which is incompatible with DragonRuby). Eventually DragonRuby will have a pry based experience that is compatible with a debugging infrastructure called LLDB. Take the time to read about LLDB as it shows the challenges in creating something that is compatible.
</p>
<p>
You can use DragonRuby's replay capabilities to troubleshoot:
</p>
<ol>
<li> DragonRuby is hot loaded which gives you a very fast feedback loop (if the game throws an exception, it's because of the code you just added).</li>
<li> Use <code>./dragonruby mygame --record</code> to create a game play recording that you can use to find the exception (you can replay a recording by executing <code>./dragonruby mygame --replay last_replay.txt</code> or through the DragonRuby Console using <code>$gtk.recording.start_replay "last_replay.txt"</code>.</li>
<li> DragonRuby also ships with a unit testing facility. You can invoke the following command to run a test: <code>./dragonruby mygame --test tests/some_ruby_file.rb</code>.</li>
<li> Get into the habit of adding debugging facilities within the game itself. You can add drawing primitives to <code>args.outputs.debug</code> that will render on top of your game but will be ignored in a production release.</li>
<li> Debugging something that runs at 60fps is (imo) not that helpful. The exception you are seeing could have been because of a change that occurred many frames ago.</li>
</ol>
<h2 id='---frequent-comments-about-ruby-as-a-language-choice'>Frequent Comments About Ruby as a Language Choice <a style='font-size: small; float: right;' href='#---frequent-comments-about-ruby-as-a-language-choice'>link</a></h2> 
<h3 id='----but-ruby-is-dead-'>But Ruby is dead. <a style='font-size: small; float: right;' href='#----but-ruby-is-dead-'>link</a></h3> 
<p>
Let's check the official source for the answer to this question: isrubydead.com: <a href='https://isrubydead.com/'>https://isrubydead.com/</a>.
</p>
<p>
On a more serious note, Ruby's _quantity_ levels aren't what they used to be. And that's totally fine. Everyone chases the new and shiny.
</p>
<p>
What really matters is _quality/maturity_. Here's a StackOverflow Survey sorted by highest paid developers: <a href='https://insights.stackoverflow.com/survey/2021#section-top-paying-technologies-top-paying-technologies'>https://insights.stackoverflow.com/survey/2021#section-top-paying-technologies-top-paying-technologies</a>.
</p>
<p>
Let's stop making this comment shall we?
</p>
<h3 id='----but-ruby-is-slow-'>But Ruby is slow. <a style='font-size: small; float: right;' href='#----but-ruby-is-slow-'>link</a></h3> 
<p>
That doesn't make any sense. A language specification can't be slow... it's a language spec. Sure, an _implementation/runtime_ can be slow though, but then we'd have to talk about which runtime.
</p>
<p>
Here's a some quick demonstrations of how well DragonRuby Game Toolkit Performs:
</p>
<ul>
<li>DragonRuby vs Unity: <a href='https://youtu.be/MFR-dvsllA4'>https://youtu.be/MFR-dvsllA4</a></li>
<li>DragonRuby vs PyGame: <a href='https://youtu.be/fuRGs6j6fPQ'>https://youtu.be/fuRGs6j6fPQ</a></li>
</ul>
<h3 id='----dynamic-languages-are-slow-'>Dynamic languages are slow. <a style='font-size: small; float: right;' href='#----dynamic-languages-are-slow-'>link</a></h3> 
<p>
They are certainly slower than statically compiled languages. With the processing power and compiler optimizations we have today, dynamic languages like Ruby are _fast enough_.
</p>
<p>
Unless you are writing in some form of intermediate representation by hand, your language of choice also suffers this same fallacy of slow. Like, nothing is faster than a low level assembly-like language. So unless you're writing in that, let's stop making this comment.
</p>
<p>
NOTE: If you _are_ hand writing LLVM IR, we are always open to bringing on new partners with such a skill set. Email us ^_^.
</p>
<h2 id='---frequent-concerns'>Frequent Concerns <a style='font-size: small; float: right;' href='#---frequent-concerns'>link</a></h2> 
<h3 id='----dragonruby-is-not-open-source--that-s-not-right-'>DragonRuby is not open source. That's not right. <a style='font-size: small; float: right;' href='#----dragonruby-is-not-open-source--that-s-not-right-'>link</a></h3> 
<p>
The current state of open source is unsustainable. Contributors work for free, most all open source repositories are severely under-staffed, and burnout from core members is rampant.
</p>
<p>
We believe in open source very strongly. Parts of DragonRuby are in fact, open source. Just not all of it (for legal reasons, and because the IP we've created has value). And we promise that we are looking for (or creating) ways to _sustainably_ open source everything we do.
</p>
<p>
If you have ideas on how we can do this, email us!
</p>
<p>
If the reason above isn't sufficient, then definitely use something else.
</p>
<p>
All this being said, we do have parts of the engine open sourced on GitHub: <a href='https://github.com/dragonruby/dragonruby-game-toolkit-contrib/'>https://github.com/dragonruby/dragonruby-game-toolkit-contrib/</a>
</p>
<h3 id='----dragonruby-is-for-pay--you-should-offer-a-free-version-'>DragonRuby is for pay. You should offer a free version. <a style='font-size: small; float: right;' href='#----dragonruby-is-for-pay--you-should-offer-a-free-version-'>link</a></h3> 
<p>
If you can afford to pay for DragonRuby, you should (and will). We don't tell authors that they should give us their books for free, and only require payment if we read the entire thing. It's time we stop asking that of software products.
</p>
<p>
That being said, we will _never_ put someone out financially. We have income assistance for anyone that can't afford a license to any one of our products.
</p>
<p>
You qualify for a free, unrestricted license to DragonRuby products if any of the following items pertain to you:
</p>
<ul>
<li>Your income is below $2,000.00 (USD) per month.</li>
<li>You are under 18 years of age.</li>
<li>You are a student of any type: traditional public school, home
  schooling, college, bootcamp, or online.</li>
<li>You are a teacher, mentor, or parent who wants to teach a kid how to code.</li>
<li>You work/worked in public service or at a charitable organization:
  for example public office, army, or any 501(c)(3) organization.</li>
</ul>
<p>
Just contact Amir at amir.rajan@dragonruby.org with a short explanation of your current situation and he'll set you up. No questions asked.
</p>
<h3 id='----but-still--you-should-offer-a-free-version--so-i-can-try-it-out-and-see-if-i-like-it-'>But still, you should offer a free version. So I can try it out and see if I like it. <a style='font-size: small; float: right;' href='#----but-still--you-should-offer-a-free-version--so-i-can-try-it-out-and-see-if-i-like-it-'>link</a></h3> 
<p>
You can try our web-based sandbox environment at <a href='http://fiddle.dragonruby.org'>http://fiddle.dragonruby.org</a>. But it won't do the runtime justice. Or just come to our Discord Channel at <a href='http://discord.dragonruby.org'>http://discord.dragonruby.org</a> and ask questions. We'd be happy to have a one on one video chat with you and show off all the cool stuff we're doing.
</p>
<p>
Seriously just buy it. Get a refund if you don't like it. We make it stupid easy to do so.
</p>
<h3 id='----i-still-think-you-should-do-a-free-version--think-of-all-people-who-would-give-it-a-shot-'>I still think you should do a free version. Think of all people who would give it a shot. <a style='font-size: small; float: right;' href='#----i-still-think-you-should-do-a-free-version--think-of-all-people-who-would-give-it-a-shot-'>link</a></h3> 
<p>
Free isn't a sustainable financial model. We don't want to spam your email. We don't want to collect usage data off of you either. We just want to provide quality toolchains to quality developers (as opposed to a large quantity of developers).
</p>
<p>
The people that pay for DragonRuby and make an effort to understand it are the ones we want to build a community around, partner with, and collaborate with. So having that small monetary wall deters entitled individuals that don't value the same things we do.
</p>
<h3 id='----what-if-i-build-something-with-dragonruby--but-dragonruby-llp-becomes-insolvent-'>What if I build something with DragonRuby, but DragonRuby LLP becomes insolvent. <a style='font-size: small; float: right;' href='#----what-if-i-build-something-with-dragonruby--but-dragonruby-llp-becomes-insolvent-'>link</a></h3> 
<p>
We want to be able to work on the stuff we love, every day of our lives. And we'll go to great lengths to make that continues.
</p>
<p>
But, in the event that sad day comes, our partnership bylaws state that _all_ DragonRuby IP that can be legally open sourced, will be released under a permissive license.
</p>
<h1 id='--recipies-'>RECIPIES: <a style='font-size: small; float: right;' href='#--recipies-'>link</a></h1> 
<h2 id='---how-to-determine-what-frame-you-are-on'>How To Determine What Frame You Are On <a style='font-size: small; float: right;' href='#---how-to-determine-what-frame-you-are-on'>link</a></h2> 
<p>
There is a property on <code>state</code> called <code>tick_count</code> that is incremented by DragonRuby every time the <code>tick</code> method is called. The following code renders a label that displays the current <code>tick_count</code>.
</p>
<pre>def tick args
  args.outputs.labels &lt;&lt; [10, 670, "#{args.state.tick_count}"]
end
</pre>
<h2 id='---how-to-get-current-framerate'>How To Get Current Framerate <a style='font-size: small; float: right;' href='#---how-to-get-current-framerate'>link</a></h2> 
<p>
Current framerate is a top level property on the Game Toolkit Runtime and is accessible via <code>args.gtk.current_framerate</code>.
</p>
<pre>def tick args
  args.outputs.labels &lt;&lt; [10, 710, "framerate: #{args.gtk.current_framerate.round}"]
end
</pre>
<h2 id='---how-to-render-a-sprite-using-an-array'>How To Render A Sprite Using An Array <a style='font-size: small; float: right;' href='#---how-to-render-a-sprite-using-an-array'>link</a></h2> 
<p>
All file paths should use the forward slash <code>/</code> *not* backslash <code></code>. Game Toolkit includes a number of sprites in the <code>sprites</code> folder (everything about your game is located in the <code>mygame</code> directory).
</p>
<p>
The following code renders a sprite with a <code>width</code> and <code>height</code> of <code>100</code> in the center of the screen.
</p>
<p>
<code>args.outputs.sprites</code> is used to render a sprite.
</p>
<p>
NOTE: Rendering using an <code>Array</code> is "quick and dirty". It's generally recommended that       you render using <code>Hashes</code> long term.
</p>
<pre>def tick args
  args.outputs.sprites &lt;&lt; [
    640 - 50,                 # X
    360 - 50,                 # Y
    100,                      # W
    100,                      # H
    'sprites/square-blue.png' # PATH
 ]
end
</pre>
<h2 id='---more-sprite-properties-as-an-array'>More Sprite Properties As An Array <a style='font-size: small; float: right;' href='#---more-sprite-properties-as-an-array'>link</a></h2> 
<p>
Here are all the properties you can set on a sprite.
</p>
<pre>def tick args
  args.outputs.sprites &lt;&lt; [
    100,                       # X
    100,                       # Y
    32,                        # W
    64,                        # H
    'sprites/square-blue.png', # PATH
    0,                         # ANGLE
    255,                       # ALPHA
    0,                         # RED_SATURATION
    255,                       # GREEN_SATURATION
    0                          # BLUE_SATURATION
  ]
end
</pre>
<h2 id='---rendering-a-sprite-using-a--hash-'>Rendering a Sprite Using a <code>Hash</code> <a style='font-size: small; float: right;' href='#---rendering-a-sprite-using-a--hash-'>link</a></h2> 
<p>
Using ordinal positioning can get a little unruly given so many properties you have control over.
</p>
<p>
You can represent a sprite as a <code>Hash</code>:
</p>
<pre>def tick args
  args.outputs.sprites &lt;&lt; {
    x: 640 - 50,
    y: 360 - 50,
    w: 100,
    h: 100,

    path: 'sprites/square-blue.png',
    angle: 0,

    a: 255,
    r: 255,
    g: 255,
    b: 255,

    # source_ properties have origin of bottom left
    source_x:  0,
    source_y:  0,
    source_w: -1,
    source_h: -1,

    # tile_ properties have origin of top left
    tile_x:  0,
    tile_y:  0,
    tile_w: -1,
    tile_h: -1,

    flip_vertically: false,
    flip_horizontally: false,

    angle_anchor_x: 0.5,
    angle_anchor_y: 1.0,

    blendmode_enum: 1

    # labels anchor/alignment (default is nil)
    # if these values are provided, they will be used over alignment_enum and vertical_alignment_enum
    anchor_x: 0.5,
    anchor_y: 0.5
  }
end
</pre>
<p>
The <code>blendmode_enum</code> value can be set to <code>0</code> (no blending), <code>1</code> (alpha blending), <code>2</code> (additive blending), <code>3</code> (modulo blending), <code>4</code> (multiply blending).
</p>
<h2 id='---rendering-a-sprite-using-a--class-'>Rendering a Sprite Using a <code>Class</code> <a style='font-size: small; float: right;' href='#---rendering-a-sprite-using-a--class-'>link</a></h2> 
<p>
You can represent a sprite as an <code>class</code> and manually define all sprite properties:
</p>
<pre># Create type with ALL sprite properties AND primitive_marker
# you can manually define all sprite properties
class Sprite
  attr_accessor :x, :y, :w, :h, :path, :angle, :a, :r, :g, :b,
                :flip_horizontally, :flip_vertically,
                :angle_anchor_x, :angle_anchor_y,
                :blendmode_enum,
                :anchor_x, :anchor_y
                :tile_x, :tile_y, :tile_w, :tile_h,
                :source_x, :source_y, :source_w, :source_h,
                :source_x2, :source_y2, :source_x3, :source_y3, :x2, :y2, :x3, :y3,

  def primitive_marker
    :sprite
  end
end

class BlueSquare &lt; Sprite
  def initialize(x: 0, y: 0, w: 0, h: 0k
    @x = x
    @y = y
    @w = w
    @h = h
    @path = 'sprites/square-blue.png'
  end
end

def tick args
  args.outputs.sprites &lt;&lt; BlueSquare.new(x: 640 - 50,
                                         y: 360 - 50,
                                         w: 50,
                                         h: 50)
end
</pre>
<p>
You can represent a sprite using the <code>attr_sprite</code> helper method:
</p>
<pre>class BlueSquare
  # invoke the helper function at the class level for
  # anything you want to represent as a sprite
  attr_sprite

  def initialize(x: 0, y: 0, w: 0, h: 0k
    @x = x
    @y = y
    @w = w
    @h = h
    @path = 'sprites/square-blue.png'
  end
end

def tick args
  args.outputs.sprites &lt;&lt; BlueSquare.new(x: 640 - 50,
                                         y: 360 - 50,
                                         w: 50,
                                         h: 50)
end
</pre>
<h2 id='---how-to-render-a-label'>How To Render A Label <a style='font-size: small; float: right;' href='#---how-to-render-a-label'>link</a></h2> 
<p>
<code>args.outputs.labels</code> is used to render labels.
</p>
<p>
Labels are how you display text. This code will go directly inside of the <code>def tick args</code> method.
</p>
<p>
NOTE: Rendering using an <code>Array</code> is "quick and dirty". It's generally recommended that       you render using <code>Hashes</code> long term.
</p>
<p>
Here is the minimum code:
</p>
<pre>def tick args
  #                       X    Y    TEXT
  args.outputs.labels &lt;&lt; [640, 360, "I am a black label."]
end
</pre>
<h2 id='---a-colored-label'>A Colored Label <a style='font-size: small; float: right;' href='#---a-colored-label'>link</a></h2> 
<pre>def tick args
  # A colored label
  #                       X    Y    TEXT,                   RED    GREEN  BLUE  ALPHA
  args.outputs.labels &lt;&lt; [640, 360, "I am a redish label.", 255,     128,  128,   255]
end
</pre>
<h2 id='---extended-label-properties'>Extended Label Properties <a style='font-size: small; float: right;' href='#---extended-label-properties'>link</a></h2> 
<pre>def tick args
  # A colored label
  #                       X    Y     TEXT           SIZE  ALIGNMENT  RED  GREEN  BLUE  ALPHA  FONT FILE
  args.outputs.labels &lt;&lt; [
    640,                   # X
    360,                   # Y
    "Hello world",         # TEXT
    0,                     # SIZE_ENUM
    1,                     # ALIGNMENT_ENUM
    0,                     # RED
    0,                     # GREEN
    0,                     # BLUE
    255,                   # ALPHA
    "fonts/coolfont.ttf"   # FONT
  ]
end
</pre>
<p>
A <code>SIZE_ENUM</code> of <code>0</code> represents "default size". A <code>negative</code> value will decrease the label size. A <code>positive</code> value will increase the label's size.
</p>
<p>
An <code>ALIGNMENT_ENUM</code> of <code>0</code> represents "left aligned". <code>1</code> represents "center aligned". <code>2</code> represents "right aligned".
</p>
<h2 id='---rendering-a-label-as-a--hash-'>Rendering A Label As A <code>Hash</code> <a style='font-size: small; float: right;' href='#---rendering-a-label-as-a--hash-'>link</a></h2> 
<p>
You can add additional metadata about your game within a label, which requires you to use a `Hash` instead.
</p>
<p>
If you use a <code>Hash</code> to render a label, you can set the label's size using either <code>SIZE_ENUM</code> or <code>SIZE_PX</code>. If both options are provided, <code>SIZE_PX</code> will be used.
</p>
<pre>def tick args
  args.outputs.labels &lt;&lt; {
    x:                       200,
    y:                       550,
    text:                    "dragonruby",
    # size specification can be either size_enum or size_px
    size_enum:               2,
    size_px:                 22,
    alignment_enum:          1,
    r:                       155,
    g:                       50,
    b:                       50,
    a:                       255,
    font:                    "fonts/manaspc.ttf",
    vertical_alignment_enum: 0, # 0 is bottom, 1 is middle, 2 is top
    anchor_x: 0.5,
    anchor_y: 0.5
    # You can add any properties you like (this will be ignored/won't cause errors)
    game_data_one:  "Something",
    game_data_two: {
       value_1: "value",
       value_2: "value two",
       a_number: 15
    }
  }
end
</pre>
<h2 id='---getting-the-size-of-a-piece-of-text'>Getting The Size Of A Piece Of Text <a style='font-size: small; float: right;' href='#---getting-the-size-of-a-piece-of-text'>link</a></h2> 
<p>
You can get the render size of any string using <code>args.gtk.calcstringbox</code>.
</p>
<pre>def tick args
  #                             TEXT           SIZE_ENUM  FONT
  w, h = args.gtk.calcstringbox("some string",         0, "font.ttf")

  # NOTE: The SIZE_ENUM and FONT are optional arguments.

  # Render a label showing the w and h of the text:
  args.outputs.labels &lt;&lt; [
    10,
    710,
    # This string uses Ruby's string interpolation literal: #{}
    "'some string' has width: #{w}, and height: #{h}."
  ]
end
</pre>
<h2 id='---rendering-labels-with-new-line-characters-and-wrapping'>Rendering Labels With New Line Characters And Wrapping <a style='font-size: small; float: right;' href='#---rendering-labels-with-new-line-characters-and-wrapping'>link</a></h2> 
<p>
You can use a strategy like the following to create multiple labels from a String.
</p>
<pre>def tick args
  long_string = "Lorem ipsum dolor sit amet, consectetur adipiscing elitteger dolor velit, ultricies vitae libero vel, aliquam imperdiet enim."
  max_character_length = 30
  long_strings_split = args.string.wrapped_lines long_string, max_character_length
  args.outputs.labels &lt;&lt; long_strings_split.map_with_index do |s, i|
    { x: 10, y: 600 - (i * 20), text: s }
  end
end
</pre>
<h2 id='---how-to-play-a-sound'>How To Play A Sound <a style='font-size: small; float: right;' href='#---how-to-play-a-sound'>link</a></h2> 
<p>
Sounds that end <code>.wav</code> will play once:
</p>
<pre>def tick args
  # Play a sound every second
  if (args.state.tick_count % 60) == 0
    args.outputs.sounds &lt;&lt; 'something.wav'
  end
end
</pre>
<p>
Sounds that end <code>.ogg</code> is considered background music and will loop:
</p>
<pre>def tick args
  # Start a sound loop at the beginning of the game
  if args.state.tick_count == 0
    args.outputs.sounds &lt;&lt; 'background_music.ogg'
  end
end
</pre>
<p>
If you want to play a <code>.ogg</code> once as if it were a sound effect, you can do:
</p>
<pre>def tick args
  # Play a sound every second
  if (args.state.tick_count % 60) == 0
    args.gtk.queue_sound 'some-ogg.ogg'
  end
end
</pre>
<h2 id='---using--args-state--to-store-your-game-state'>Using <code>args.state</code> To Store Your Game State <a style='font-size: small; float: right;' href='#---using--args-state--to-store-your-game-state'>link</a></h2> 
<p>
<code>args.state</code> is a open data structure that allows you to define properties that are arbitrarily nested. You don't need to define any kind of <code>class</code>.
</p>
<p>
To initialize your game state, use the <code>||=</code> operator. Any value on the right side of <code>||=</code> will only be assigned _once_.
</p>
<p>
To assign a value every frame, just use the <code>=</code> operator, but _make sure_ you've initialized a default value.
</p>
<pre>def tick args
  # initialize your game state ONCE
  args.state.player.x  ||= 0
  args.state.player.y  ||= 0
  args.state.player.hp ||= 100

  # increment the x position of the character by one every frame
  args.state.player.x += 1

  # Render a sprite with a label above the sprite
  args.outputs.sprites &lt;&lt; [
    args.state.player.x,
    args.state.player.y,
    32, 32,
    "player.png"
  ]

  args.outputs.labels &lt;&lt; [
    args.state.player.x,
    args.state.player.y - 50,
    args.state.player.hp
  ]
end
</pre>
<h2 id='---accessing-files'>Accessing files <a style='font-size: small; float: right;' href='#---accessing-files'>link</a></h2> 
<p>
DragonRuby uses a sandboxed filesystem which will automatically read from and write to a location appropriate for your platform so you don't have to worry about theses details in your code. You can just use <code>gtk.read_file</code>, <code>gtk.write_file</code>, and <code>gtk.append_file</code> with a relative path and the engine will take care of the rest.
</p>
<p>
The data directories that will be written to in a production build are:
</p>
<ul>
<li>Windows: <code>C:\Users\[username]\AppData\Roaming\[devtitle]\[gametitle]</code></li>
<li>MacOS: <code>$HOME/Library/Application Support/[gametitle]</code></li>
<li>Linux: <code>$HOME/.local/share/[gametitle]</code></li>
<li>HTML5: The data will be written to the browser's IndexedDB.</li>
</ul>
<p>
The values in square brackets are the values you set in your <code>app/metadata/game_metadata.txt</code> file.
</p>
<p>
When reading files, the engine will first look in the game's data directory and then in the game directory itself. This means that if you write a file to the data directory that already exists in your game directory, the file in the data directory will be used instead of the one that is in your game.
</p>
<p>
When running a development build you will directly write to your game directory (and thus overwrite existing files). This can be useful for built-in development tools like level editors.
</p>
<p>
For more details on the implementation of the sandboxed filesystem, see Ryan C. Gordon's PhysicsFS documentation: <a href='https://icculus.org/physfs/'>https://icculus.org/physfs/</a>
</p>
<p>
IMPORTANT: File access functions are sandoxed and assume that the <code>dragonruby</code> binary lives alongside the game you are building. Do not expect file access functions to return correct values if you are attempting to run the <code>dragonruby</code> binary from a shared location. It's recommended that the directory structure contained in the zip is not altered and games are built using that starter template.
</p>
<h2 id='---troubleshoot-performance'>Troubleshoot Performance <a style='font-size: small; float: right;' href='#---troubleshoot-performance'>link</a></h2> 
<ul>
<li>If you're using <code>Array</code>s for your primitives (<code>args.outputs.sprites &lt;&lt; []</code>), use <code>Hash</code> instead (<code>args.outputs.sprites &lt;&lt; { x: ... }</code>).</li>
<li>If you're using <code>Entity</code> for your primitives (<code>args.outputs.sprites &lt;&lt; args.state.new_entity</code>), use <code>StrictEntity</code> instead (<code>args.outputs.sprites &lt;&lt; args.state.new_entity_strict</code>).</li>
<li>Use <code>.each</code> instead of <code>.map</code> if you don't care about the return value.</li>
<li>When concatenating primitives to outputs, do them in bulk. Instead of:</li>
</ul>
<pre>args.state.bullets.each do |bullet|
  args.outputs.sprites &lt;&lt; bullet.sprite
end
</pre>
<p>
do
</p>
<pre>args.outputs.sprites &lt;&lt; args.state.bullets.map do |b|
  b.sprite
end
</pre>
<ul>
<li>Use <code>args.outputs.static_</code> variant for things that don't change often (take a look at the Basic Gorillas sample app and Dueling Starships sample app to see how <code>static_</code> is leveraged.</li>
<li>Consider using a <code>render_target</code> if you're doing some form of a camera that moves a lot of primitives (take a look at the Render Target sample apps for more info).</li>
<li>Avoid deleting or adding to an array during iteration. Instead of:</li>
</ul>
<pre>args.state.fx_queue |fx|
  fx.count_down ||= 255
  fx.countdown -= 5
  if fx.countdown &lt; 0
    args.state.fx_queue.delete fx
  end
end
</pre>
<p>
Do:
</p>
<pre>args.state.fx_queue |fx|
  fx.count_down ||= 255
  fx.countdown -= 5
end

args.state.fx_queue.reject! { |fx| fx.countdown &lt; 0 }
</pre>
<h1 id='---runtime--(-args-gtk-)'><code>Runtime</code> (<code>args.gtk</code>) <a style='font-size: small; float: right;' href='#---runtime--(-args-gtk-)'>link</a></h1> 
<p>
The <code>GTK::Runtime</code> class is the core of DragonRuby. It is globally accessible via <code>$gtk</code> or inside of the <code>tick</code> method through <code>args</code>.
</p>
<pre>def tick args
  args.gtk # accessible like this
  $gtk # or like this
end
</pre>
<h2 id='---indie-and-pro-functions'>Indie and Pro Functions <a style='font-size: small; float: right;' href='#---indie-and-pro-functions'>link</a></h2> 
<p>
The following functions are only available at the Indie and Pro License tiers.
</p>
<h3 id='-----get_pixels-'><code>get_pixels</code> <a style='font-size: small; float: right;' href='#-----get_pixels-'>link</a></h3> 
<p>
Given a <code>file_path</code> to a sprite, this function returns a one dimensional array of hexadecimal values representing the ARGB of each pixel in a sprite.
</p>
<p>
See the following sample app for a full demonstration of how to use this function: <code>./samples/07_advanced_rendering/06_pixel_arrays_from_file</code>
</p>
<h3 id='-----dlopen-'><code>dlopen</code> <a style='font-size: small; float: right;' href='#-----dlopen-'>link</a></h3> 
<p>
Loads a precompiled C Extension into your game.
</p>
<p>
See the sample apps at <code>./samples/12_c_extensions</code> for detailed walkthroughs of creating C extensions.
</p>
<h2 id='---environment-and-utility-functions'>Environment and Utility Functions <a style='font-size: small; float: right;' href='#---environment-and-utility-functions'>link</a></h2> 
<p>
The following functions will help in interacting with the OS and rendering pipeline.
</p>
<h3 id='-----calcstringbox-'><code>calcstringbox</code> <a style='font-size: small; float: right;' href='#-----calcstringbox-'>link</a></h3> 
<p>
Returns the render width and render height as a tuple for a piece of text. The parameters this method takes are:
</p>
<ul>
<li><code>text</code>: the text you want to get the width and height of.</li>
<li><code>size_enum</code>: number representing the render size for the text. This
  parameter is optional and defaults to <code>0</code> which represents a   baseline font size in units specific to DragonRuby (a negative value   denotes a size smaller than what would be comfortable to read on a   handheld device postive values above <code>0</code> represent larger font sizes).</li>
<li><code>font</code>: path to a font file that the width and height will be based
  off of. This field is optional and defaults to the DragonRuby's   default font.</li>
</ul>
<pre>def tick args
  text = "a piece of text"
  size_enum = 5 # "large font size"

  # path is relative to your game directory (eg mygame/fonts/courier-new.ttf)
  font = "fonts/courier-new.ttf"

  # get the render width and height
  string_w, string_h = args.gtk.calcstringbox text, size_enum, font

  # render the label
  args.outputs.labels &lt;&lt; {
    x: 100,
    y: 100,
    text: text,
    size_enum: size_enum,
    font: font
  }

  # render a border around the label based on the results from calcstringbox
  args.outputs.borders &lt;&lt; {
    x: 100,
    y: 100,
    w: string_w,
    h: string_h,
    r: 0,
    g: 0,
    b: 0
  }
end
</pre>
<h3 id='-----request_quit-'><code>request_quit</code> <a style='font-size: small; float: right;' href='#-----request_quit-'>link</a></h3> 
<p>
Call this function to exit your game. You will be given one additional tick if you need to perform any housekeeping before that game closes.
</p>
<pre>def tick args
  # exit the game after 600 frames (10 seconds)
  if args.state.tick_count == 600
    args.gtk.request_quit
  end
end
</pre>
<h3 id='-----quit_requested--'><code>quit_requested?</code> <a style='font-size: small; float: right;' href='#-----quit_requested--'>link</a></h3> 
<p>
This function will return <code>true</code> if the game is about to exit (either from the user closing the game or if <code>request_quit</code> was invoked).
</p>
<h3 id='-----set_window_fullscreen-'><code>set_window_fullscreen</code> <a style='font-size: small; float: right;' href='#-----set_window_fullscreen-'>link</a></h3> 
<p>
This function takes in a single boolean parameter. <code>true</code> to make the game fullscreen, <code>false</code> to return the game back to windowed mode.
</p>
<pre>def tick args
  # make the game full screen after 600 frames (10 seconds)
  if args.state.tick_count == 600
    args.gtk.set_window_fullscreen true
  end

  # return the game to windowed mode after 20 seconds
  if args.state.tick_count == 1200
    args.gtk.set_window_fullscreen false
  end
end
</pre>
<h3 id='-----window_fullscreen--'><code>window_fullscreen?</code> <a style='font-size: small; float: right;' href='#-----window_fullscreen--'>link</a></h3> 
<p>
Returns true if the window is currently in fullscreen mode.
</p>
<h3 id='-----set_window_scale-'><code>set_window_scale</code> <a style='font-size: small; float: right;' href='#-----set_window_scale-'>link</a></h3> 
<p>
This function takes in a float value and uses that to resize the game window to a percentage of 1280x720 (or 720x1280 in portrait mode). The valid scale options are 0.1, 0.25, 0.5, 0.75, 1.25, 1.5, 2.0, 2.5, 3.0, and 4.0. The float value you pass in will be floored to the nearest valid scale option.
</p>
<h3 id='-----platform--'><code>platform?</code> <a style='font-size: small; float: right;' href='#-----platform--'>link</a></h3> 
<p>
You can ask DragonRuby which platform your game is currently being run on. This can be useful if you want to perform different pieces of logic based on where the game is running.
</p>
<p>
The raw platform string value is available via <code>args.gtk.platform</code> which takes in a <code>symbol</code> representing the platform's categorization/mapping.
</p>
<p>
You can see all available platform categorizations via the <code>args.gtk.platform_mappings</code> function.
</p>
<p>
Here's an example of how to use <code>args.gtk.platform? category_symbol</code>:
</p>
<pre>def tick args
  label_style = { x: 640, y: 360, anchor_x: 0.5, anchor_y: 0.5 }
  if    args.gtk.platform? :macos
    args.outputs.labels &lt;&lt; { text: "I am running on MacOS.", **label_style }
  elsif args.gtk.platform? :win
    args.outputs.labels &lt;&lt; { text: "I am running on Windows.", **label_style }
  elsif args.gtk.platform? :linux
    args.outputs.labels &lt;&lt; { text: "I am running on Linux.", **label_style }
  elsif args.gtk.platform? :web
    args.outputs.labels &lt;&lt; { text: "I am running on a web page.", **label_style }
  elsif args.gtk.platform? :android
    args.outputs.labels &lt;&lt; { text: "I am running on Android.", **label_style }
  elsif args.gtk.platform? :ios
    args.outputs.labels &lt;&lt; { text: "I am running on iOS.", **label_style }
  elsif args.gtk.platform? :touch
    args.outputs.labels &lt;&lt; { text: "I am running on a device that supports touch (either iOS/Android native or mobile web).", **label_style }
  elsif args.gtk.platform? :steam
    args.outputs.labels &lt;&lt; { text: "I am running via steam (covers both desktop and steamdeck).", **label_style }
  elsif args.gtk.platform? :steam_deck
    args.outputs.labels &lt;&lt; { text: "I am running via steam on the Steam Deck (not steam desktop).", **label_style }
  elsif args.gtk.platform? :steam_desktop
    args.outputs.labels &lt;&lt; { text: "I am running via steam on desktop (not steam deck).", **label_style }
  end
end
</pre>
<h3 id='-----production--'><code>production?</code> <a style='font-size: small; float: right;' href='#-----production--'>link</a></h3> 
<p>
Returns true if the game is being run in a released/shipped state.
</p>
<p>
If you want to simulate a production build. Add an empty file called <code>DRAGONRUBY_PRODUCTION_BUILD</code> inside of the <code>metadata</code> folder. This will turn of all logging and all creation of temp files used for development purposes.
</p>
<h3 id='-----platform_mappings-'><code>platform_mappings</code> <a style='font-size: small; float: right;' href='#-----platform_mappings-'>link</a></h3> 
<p>
These are the current platform categorizations (<code>args.gtk.platform_mappings</code>):
</p>
<pre>{
  "Mac OS X"   =&gt; [:desktop, :macos, :osx, :mac, :macosx], # may also include :steam and :steam_desktop run via steam
  "Windows"    =&gt; [:desktop, :windows, :win],              # may also include :steam and :steam_desktop run via steam
  "Linux"      =&gt; [:desktop, :linux, :nix],                # may also include :steam and :steam_desktop run via steam
  "Emscripten" =&gt; [:web, :wasm, :html, :emscripten],       # may also include :touch if running in the web browser on mobile
  "iOS"        =&gt; [:mobile, :ios, :touch],
  "Android"    =&gt; [:mobile, :android, :touch],
  "Steam Deck" =&gt; [:steamdeck, :steam_deck, :steam],
}
</pre>
<p>
Given the mappings above, <code>args.gtk.platform? :desktop</code> would return <code>true</code> if the game is running on a player's computer irrespective of OS (MacOS, Linux, and Windows are all categorized as <code>:desktop</code> platforms).
</p>
<h3 id='-----open_url-'><code>open_url</code> <a style='font-size: small; float: right;' href='#-----open_url-'>link</a></h3> 
<p>
Given a uri represented as a string. This fuction will open the uri in the user's default browser.
</p>
<pre>def tick args
  # open a url after 600 frames (10 seconds)
  if args.state.tick_count == 600
    args.gtk.open_url "http://dragonruby.org"
  end
end
</pre>
<h3 id='-----system-'><code>system</code> <a style='font-size: small; float: right;' href='#-----system-'>link</a></h3> 
<p>
Given an OS dependent cli command represented as a string, this function executes the command and <code>puts</code> the results to the DragonRuby Console (returns <code>nil</code>).
</p>
<pre>def tick args
  # execute ls on the current directory in 10 seconds
  if args.state.tick_count == 600
    args.gtk.system "ls ."
  end
end
</pre>
<h3 id='-----exec-'><code>exec</code> <a style='font-size: small; float: right;' href='#-----exec-'>link</a></h3> 
<p>
Given an OS dependent cli command represented as a string, this function executes the command and returns a <code>string</code> representing the results.
</p>
<pre>def tick args
  # execute ls on the current directory in 10 seconds
  if args.state.tick_count == 600
    results = args.gtk.exec "ls ."
    puts "The results of the command are:"
    puts results
  end
end
</pre>
<h3 id='-----show_cursor-'><code>show_cursor</code> <a style='font-size: small; float: right;' href='#-----show_cursor-'>link</a></h3> 
<p>
Shows the mouse cursor.
</p>
<h3 id='-----hide_cursor-'><code>hide_cursor</code> <a style='font-size: small; float: right;' href='#-----hide_cursor-'>link</a></h3> 
<p>
Hides the mouse cursor.
</p>
<h3 id='-----cursor_shown--'><code>cursor_shown?</code> <a style='font-size: small; float: right;' href='#-----cursor_shown--'>link</a></h3> 
<p>
Returns <code>true</code> if the mouse cursor is visible.
</p>
<h3 id='-----set_mouse_grab-'><code>set_mouse_grab</code> <a style='font-size: small; float: right;' href='#-----set_mouse_grab-'>link</a></h3> 
<p>
Takes in a numeric parameter representing the mouse grab mode.
</p>
<ul>
<li><code>0</code>: Ungrabs the mouse.</li>
<li><code>1</code>: Grabs the mouse.</li>
<li><code>2</code>: Hides the cursor, grabs the mouse and puts it in relative position mode accessible via <code>args.inputs.mouse.relative_(x|y)</code>.</li>
</ul>
<h3 id='-----set_system_cursor-'><code>set_system_cursor</code> <a style='font-size: small; float: right;' href='#-----set_system_cursor-'>link</a></h3> 
<p>
Takes in a string value of <code>"arrow"</code>, <code>"ibeam"</code>, <code>"wait"</code>, or <code>"hand"</code> and sets the mouse curosor to the corresponding system cursor (if available on the OS).
</p>
<h3 id='-----set_cursor-'><code>set_cursor</code> <a style='font-size: small; float: right;' href='#-----set_cursor-'>link</a></h3> 
<p>
Replaces the mouse cursor with a sprite. Takes in a <code>path</code> to the sprite, and optionally an <code>x</code> and <code>y</code> value representing the realtive positioning the sprite will have to the mouse cursor.
</p>
<pre>def tick args
  if args.state.tick_count == 0
    # assumes a sprite of size 80x80 and centers the sprite
    # relative to the cursor position.
    args.gtk.set_cursor "sprites/square/blue.png", 40, 40
  end
end
</pre>
<h2 id='---file-io-functions'>File IO Functions <a style='font-size: small; float: right;' href='#---file-io-functions'>link</a></h2> 
<p>
The following functions give you the ability to interact with the file system.
</p>
<p>
IMPORTANT: File access functions are sandoxed and assume that the <code>dragonruby</code> binary lives alongside the game you are building. Do not expect these functions to return correct values if you are attempting to run the <code>dragonruby</code> binary from a shared location. It's recommended that the directory structure contained in the zip is not altered and games are built using that starter template.
</p>
<h3 id='-----list_files-'><code>list_files</code> <a style='font-size: small; float: right;' href='#-----list_files-'>link</a></h3> 
<p>
This function takes in one parameter. The parameter is the directory path and assumes the the game directory is the root. The method returns an <code>Array</code> of <code>String</code> representing all files within the directory. Use <code>stat_file</code> to determine whether a specific path is a file or a directory.
</p>
<h3 id='-----stat_file-'><code>stat_file</code> <a style='font-size: small; float: right;' href='#-----stat_file-'>link</a></h3> 
<p>
This function takes in one parameter. The parameter is the file path and assumes the the game directory is the root. The method returns <code>nil</code> if the file doesn't exist otherwise it returns a <code>Hash</code> with the following information:
</p>
<pre># {
#   path: String,
#   file_size: Int,
#   mod_time: Int,
#   create_time: Int,
#   access_time: Int,
#   readonly: Boolean,
#   file_type: Symbol (:regular, :directory, :symlink, :other),
# }

def tick args
  if args.inputs.mouse.click
    args.gtk.write_file "last-mouse-click.txt", "Mouse was clicked at #{args.state.tick_count}."
  end

  file_info = args.gtk.stat_file "last-mouse-click.txt"

  if file_info
    args.outputs.labels &lt;&lt; {
      x: 30,
      y: 30.from_top,
      text: file_info.to_s,
      size_enum: -3
    }
  else
    args.outputs.labels &lt;&lt; {
      x: 30,
      y: 30.from_top,
      text: "file does not exist, click to create file",
      size_enum: -3
    }
  end
end
</pre>
<h3 id='-----read_file-'><code>read_file</code> <a style='font-size: small; float: right;' href='#-----read_file-'>link</a></h3> 
<p>
Given a file path, a string will be returned representing the contents of the file. <code>nil</code> will be returned if the file does not exist. You can use <code>stat_file</code> to get additional information of a file.
</p>
<h3 id='-----write_file-'><code>write_file</code> <a style='font-size: small; float: right;' href='#-----write_file-'>link</a></h3> 
<p>
This function takes in two parameters. The first parameter is the file path and assumes the the game directory is the root. The second parameter is the string that will be written. The method **overwrites** whatever is currently in the file. Use <code>append_file</code> to append to the file as opposed to overwriting.
</p>
<pre>def tick args
  if args.inputs.mouse.click
    args.gtk.write_file "last-mouse-click.txt", "Mouse was clicked at #{args.state.tick_count}."
  end
end
</pre>
<h3 id='-----append_file-'><code>append_file</code> <a style='font-size: small; float: right;' href='#-----append_file-'>link</a></h3> 
<p>
This function takes in two parameters. The first parameter is the file path and assumes the the game directory is the root. The second parameter is the string that will be written. The method appends to whatever is currently in the file (a new file is created if one does not alread exist). Use <code>write_file</code> to overwrite the file's contents as opposed to appending.
</p>
<pre>def tick args
  if args.inputs.mouse.click
    args.gtk.write_file "last-mouse-click.txt", "Mouse was clicked at #{args.state.tick_count}."
  end
end
</pre>
<h3 id='-----delete_file-'><code>delete_file</code> <a style='font-size: small; float: right;' href='#-----delete_file-'>link</a></h3> 
<p>
This function takes in a single parameters. The parameter is the file path that should be deleted. This function will raise an exception if the path requesting to be deleted does not exist.
</p>
<p>
Notes:
</p>
<ul>
<li>Use <code>delete_if_exist</code> to only delete the file if it exists.</li>
<li>Use <code>stat_file</code> to determine if a path exists.</li>
<li>Use <code>list_files</code> to determine if a directory is empty.</li>
<li>You cannot delete files outside of your sandboxed game environment.</li>
</ul>
<p>
Here is a list of reasons an exception could be raised:
</p>
<p>
  - If the path is not found.   - If the path is still open (for reading or writing).   - If the path is not a file or directory.   - If the path is a circular symlink.   - If you do not have permissions to delete the path.   - If the directory attempting to be deleted is not empty.
</p>
<pre>def tick args
  if args.inputs.mouse.click
    args.gtk.write_file "last-mouse-click.txt", "Mouse was clicked at #{args.state.tick_count}."
  end
end
</pre>
<h3 id='-----delete_file_if_exist-'><code>delete_file_if_exist</code> <a style='font-size: small; float: right;' href='#-----delete_file_if_exist-'>link</a></h3> 
<p>
Has the same behavior as <code>delete_file</code> except this function does not throw an exception.
</p>
<h2 id='---xml-and-json'>XML and JSON <a style='font-size: small; float: right;' href='#---xml-and-json'>link</a></h2> 
<p>
The following functions help with parsing xml and json.
</p>
<h3 id='-----parse_json-'><code>parse_json</code> <a style='font-size: small; float: right;' href='#-----parse_json-'>link</a></h3> 
<p>
Given a json string, this function returns a hash representing the json data.
</p>
<pre>sh = args.gtk.parse_json '{ "name": "John Doe", "aliases": ["JD"] }'
structure of hash: { "name"=&gt;"John Doe", "aliases"=&gt;["JD"] }
</pre>
<h3 id='-----parse_json_file-'><code>parse_json_file</code> <a style='font-size: small; float: right;' href='#-----parse_json_file-'>link</a></h3> 
<p>
Same behavior as <code>parse_json_file</code> except a file path is read for the json string.
</p>
<h3 id='-----parse_xml-'><code>parse_xml</code> <a style='font-size: small; float: right;' href='#-----parse_xml-'>link</a></h3> 
<p>
Given xml data as a string, this function will return a hash that represents the xml data in the following recursive structure:
</p>
<pre>
type: :element,
name: "Person",
children: [...]

</pre>
<h3 id='-----parse_xml_file-'><code>parse_xml_file</code> <a style='font-size: small; float: right;' href='#-----parse_xml_file-'>link</a></h3> 
<p>
Function has the same behavior as <code>parse_xml</code> except that the parameter must be a file path that contains xml contents.
</p>
<h2 id='---network-io-functions'>Network IO Functions <a style='font-size: small; float: right;' href='#---network-io-functions'>link</a></h2> 
<p>
The following functions help with interacting with the network.
</p>
<h3 id='-----http_get-'><code>http_get</code> <a style='font-size: small; float: right;' href='#-----http_get-'>link</a></h3> 
<p>
Returns an object that represents an http response which will eventually have a value. This http_get method is invoked asynchronously. Check for completion before attempting to read results.
</p>
<pre>def tick args
  # perform an http get and print the response when available
  args.state.result ||= args.gtk.http_get "https://httpbin.org/html"

  if args.state.result &amp;&amp; args.state.result[:complete] &amp;&amp; !args.state.printed
    if args.state.result[:http_response_code] == 200
      puts "The response was successful. The body is:"
      puts args.state.result[:response_data]
    else
      puts "The response failed. Status code:"
      puts args.state.result[:http_response_code]
    end
    # set a flag denoting that the response has been printed
    args.state.printed = true

    # show the console
    args.gtk.show_console
  end
end
</pre>
<h3 id='-----http_post-'><code>http_post</code> <a style='font-size: small; float: right;' href='#-----http_post-'>link</a></h3> 
<p>
Returns an object that represents an http response which will eventually have a value. This http_post method is invoked asynchronously. Check for completion before attempting to read results.
</p>
<ul>
<li>First parameter: The url to send the request to.</li>
<li>Second parameter: Hash that represents form fields to send.</li>
<li>Third parameter: Headers. Note: Content-Type must be form encoded
                   flavor. If you are unsure of what to pass in, set the content type                    to application/x-www-form-urlencoded</li>
</ul>
<pre>def tick args
  # perform an http get and print the response when available

  args.state.form_fields ||= { "userId" =&gt; "1698979610" }
  args.state.result ||= args.gtk.http_post "http://httpbin.org/post",
                                           args.state.form_fields,
                                           ["Content-Type: application/x-www-form-urlencoded"]


  if args.state.result &amp;&amp; args.state.result[:complete] &amp;&amp; !args.state.printed
    if args.state.result[:http_response_code] == 200
      puts "The response was successful. The body is:"
      puts args.state.result[:response_data]
    else
      puts "The response failed. Status code:"
      puts args.state.result[:http_response_code]
    end
    # set a flag denoting that the response has been printed
    args.state.printed = true

    # show the console
    args.gtk.show_console
  end
end
</pre>
<h3 id='-----http_post_body-'><code>http_post_body</code> <a style='font-size: small; float: right;' href='#-----http_post_body-'>link</a></h3> 
<p>
Returns an object that represents an http response which will eventually have a value. This http_post_body method is invoked asynchronously. Check for completion before attempting to read results.
</p>
<ul>
<li>First parameter: The url to send the request to.</li>
<li>Second parameter: String that represents the body that will be sent</li>
<li>Third parameter: Headers. Be sure to populate the Content-Type that
                   matches the data you are sending.</li>
</ul>
<pre>def tick args
  # perform an http get and print the response when available

  args.state.json ||= "{ "userId": "#{Time.now.to_i}"}"
  args.state.result ||= args.gtk.http_post_body "http://httpbin.org/post",
                                                args.state.json,
                                                ["Content-Type: application/json", "Content-Length: #{args.state.json.length}"]


  if args.state.result &amp;&amp; args.state.result[:complete] &amp;&amp; !args.state.printed
    if args.state.result[:http_response_code] == 200
      puts "The response was successful. The body is:"
      puts args.state.result[:response_data]
    else
      puts "The response failed. Status code:"
      puts args.state.result[:http_response_code]
    end
    # set a flag denoting that the response has been printed
    args.state.printed = true

    # show the console
    args.gtk.show_console
  end
end
</pre>
<h3 id='-----start_server!-'><code>start_server!</code> <a style='font-size: small; float: right;' href='#-----start_server!-'>link</a></h3> 
<p>
Starts a in-game http server that can be process http requests. When your game is running in development mode. A dev server is started at <code>http://localhost:9001</code>
</p>
<p>
You can start an in-game http server in production via:
</p>
<pre>def tick args
  # server explicitly enabled in production
  args.gtk.start_server! port: 9001, enable_in_prod: true
end
</pre>
<p>
Here's how you would responde to http requests:
</p>
<pre>def tick args
  # server explicitly enabled in production
  args.gtk.start_server! port: 9001, enable_in_prod: true

  # loop through pending requests and respond to them
  args.inputs.http_requests.each do |request|
    puts "#{request}"
    request.respond 200, "ok"
  end
end
</pre>
<h2 id='---developer-support-functions'>Developer Support Functions <a style='font-size: small; float: right;' href='#---developer-support-functions'>link</a></h2> 
<p>
The following functions help support the development process. It is not recommended to use this functions in "production" game logic.
</p>
<h3 id='-----version-'><code>version</code> <a style='font-size: small; float: right;' href='#-----version-'>link</a></h3> 
<p>
Returns a string representing the version of DragonRuby you are running.
</p>
<h3 id='-----version_pro--'><code>version_pro?</code> <a style='font-size: small; float: right;' href='#-----version_pro--'>link</a></h3> 
<p>
Returns <code>true</code> if the version of DragonRuby is NOT Standard Edition.
</p>
<h3 id='-----reset-'><code>reset</code> <a style='font-size: small; float: right;' href='#-----reset-'>link</a></h3> 
<p>
Resets DragonRuby's internal state as if it were just started. <code>args.state.tick_count</code> is set to <code>0</code> and <code>args.state</code> is cleared of any values. This function is helpful when you are developing your game and want to reset everything as if the game just booted up.
</p>
<pre>def tick args
end

# reset the game if this file is hotloaded/required
# (removes the need to press "r" when I file is updated)
$gtk.reset
</pre>
<p>
NOTE: <code>args.gtk.reset</code> does not reset global variables or instance of classes you have have constructed. If you want to also reset global variables or instances of classes when $gtk.reset is called. Define a <code>reset</code> method. Here's an example:
</p>
<pre>class Game
  def initialize
    puts "Game initialize called"
  end
end

def tick args
  $game ||= Game.new

  if args.state.tick_count == 0
    puts "tick_count is 0"
  end

  # if r is pressed on the keyboard, reset the game
  if args.inputs.keyboard.key_down.r
    args.gtk.reset
  end
end

# custom reset function
def reset
  puts "Custom reset function was called."
  $game = nil
end
</pre>
<h3 id='-----reset_next_tick-'><code>reset_next_tick</code> <a style='font-size: small; float: right;' href='#-----reset_next_tick-'>link</a></h3> 
<p>
Has the same behavior as <code>reset</code> except the reset occurs before <code>tick</code> is executed again. <code>reset</code> resets the environment immediately (while the <code>tick</code> method is inflight). It's recommended that <code>reset</code> should be called outside of the tick method (invoked when a file is saved/hotloaded), and <code>reset_next_tick</code> be used inside of the <code>tick</code> method so you don't accidentally blow away state the your game depends on to complete the current <code>tick</code> without exceptions.
</p>
<pre>def tick args
  # reset the game if "r" is pressed on the keyboard
  if args.inputs.keyboard.key_down.r
    args.gtk.reset_next_tick # use reset_next_tick instead of reset
  end
end

# reset the game if this file is hotloaded/required
# (removes the need to press "r" when I file is updated)
$gtk.reset
</pre>
<h3 id='-----reset_sprite-'><code>reset_sprite</code> <a style='font-size: small; float: right;' href='#-----reset_sprite-'>link</a></h3> 
<p>
Sprites when loaded are cached. Given a string parameter, this method invalidates the cache record of a sprite so that updates on from the disk can be loaded.
</p>
<h3 id='-----reset_sprites-'><code>reset_sprites</code> <a style='font-size: small; float: right;' href='#-----reset_sprites-'>link</a></h3> 
<p>
Sprites when loaded are cached. This method invalidates the cache record of all sprites so that updates on from the disk can be loaded. This function is automatically called when <code>args.gtk.reset</code> (<code>$gtk.reset</code>) is invoked.
</p>
<h3 id='-----calcspritebox-'><code>calcspritebox</code> <a style='font-size: small; float: right;' href='#-----calcspritebox-'>link</a></h3> 
<p>
Given a path to a sprite, this method returns the <code>width</code> and <code>height</code> of a sprite as a tuple.
</p>
<p>
NOTE: This method should be used for development purposes only and is       expensive to call every frame. Do not use this method to set the       size of sprite when rendering (hard code those values since you       know what they are beforehand).
</p>
<h3 id='-----current_framerate-'><code>current_framerate</code> <a style='font-size: small; float: right;' href='#-----current_framerate-'>link</a></h3> 
<p>
Returns a float value representing the framerate of your game. This is an approximation/moving average of your framerate and should eventually settle to 60fps.
</p>
<pre>def tick args
  # render a label to the screen that shows the current framerate
  # formatted as a floating point number with two decimal places
  args.outputs.labels &lt;&lt; { x: 30, y: 30.from_top, text: "#{args.gtk.current_framerate.to_sf}" }
end
</pre>
<h3 id='-----framerate_diagnostics_primitives-'><code>framerate_diagnostics_primitives</code> <a style='font-size: small; float: right;' href='#-----framerate_diagnostics_primitives-'>link</a></h3> 
<p>
Returns a set of primitives that can be rendered to the screen which provide more detailed information about the speed of your simulation (framerate, draw call count, mouse position, etc).
</p>
<pre>def tick args
  args.outputs.primitives &lt;&lt; args.gtk.framerate_diagnostics_primitives
end
</pre>
<h3 id='-----warn_array_primitives!-'><code>warn_array_primitives!</code> <a style='font-size: small; float: right;' href='#-----warn_array_primitives!-'>link</a></h3> 
<p>
This function helps you audit your game of usages of array-based primitives. While array-based primitives are simple to create and use, they are slower to process than <code>Hash</code> or <code>Class</code> based primitives.
</p>
<pre>def tick args
  # enable array based primitives warnings
  args.gtk.warn_array_primitives!

  # array-based primitive elsewhere in code
  # an log message will be posted giving the location of the array
  # based primitive usage
  args.outputs.sprites &lt;&lt; [100, 100, 200, 200, "sprites/square/blue.png"]

  # instead of using array based primitives, migrate to hashes as needed
  args.outputs.sprites &lt;&lt; {
    x: 100,
    y: 100,
    w: 200,
    h: 200, path:
    "sprites/square/blue.png"
  }
end
</pre>
<h3 id='-----benchmark-'><code>benchmark</code> <a style='font-size: small; float: right;' href='#-----benchmark-'>link</a></h3> 
<p>
You can use this function to compare the relative performance of blocks of code.
</p>
<pre>def tick args
  # press r to run benchmark
  if args.inputs.keyboard.key_down.r
    args.gtk.console.show
    args.gtk.benchmark iterations: 1000, # number of iterations
                       # label for experiment
                       using_numeric_map: -&gt; () {
                         # experiment body
                         v = 100.map_with_index do |i|
                           i * 100
                         end
                       },
                       # label for experiment
                       using_numeric_times: -&gt; () {
                         # experiment body
                         v = []
                         100.times do |i|
                           v &lt;&lt; i * 100
                         end
                       }
  end
end
</pre>
<h3 id='-----notify!-'><code>notify!</code> <a style='font-size: small; float: right;' href='#-----notify!-'>link</a></h3> 
<p>
Given a string, this function will present a message at the bottom of your game. This method is only invoked in dev mode and is useful for debugging.
</p>
<p>
An optional parameter of duration (number value representing ticks) can also be passed in. The default value if <code>300</code> ticks (5 seconds).
</p>
<pre>def tick args
  if args.inputs.mouse.click
    args.gtk.notify! "Mouse was clicked!"
  end

  if args.inputs.keyboard.key_down.r
    # optional duration parameter
    args.gtk.notify! "R key was pressed!", 600 # present message for 10 seconds/600 frames
  end
end
</pre>
<h3 id='-----notify_extended!-'><code>notify_extended!</code> <a style='font-size: small; float: right;' href='#-----notify_extended!-'>link</a></h3> 
<p>
Has similar behavior as notify! except you have additional options to show messages in a production environment.
</p>
<pre>def tick args
  if args.inputs.mouse.click
    args.gtk.notify_extended! message: "message",
                              duration: 300,
                              env: :prod
  end
end
</pre>
<h3 id='-----slowmo!-'><code>slowmo!</code> <a style='font-size: small; float: right;' href='#-----slowmo!-'>link</a></h3> 
<p>
Given a numeric value representing the factor of 60fps. This function will bring your simulation loop down to slower rate. This method is intended to be used for debugging purposes.
</p>
<pre>def tick args
  # set your simulation speed to (15 fps): args.gtk.slowmo! 4
  # set your simulation speed to (1 fps): args.gtk.slowmo! 60
  # set your simulation speed to (30 fps):
  args.gtk.slowmo! 2
end
</pre>
<p>
Remove this line from your tick method will automatically set your simulation speed back to 60 fps.
</p>
<h3 id='-----show_console-'><code>show_console</code> <a style='font-size: small; float: right;' href='#-----show_console-'>link</a></h3> 
<p>
Shows the DragonRuby console. Useful when debugging/customizing an in-game dev workflow.
</p>
<h3 id='-----hide_console-'><code>hide_console</code> <a style='font-size: small; float: right;' href='#-----hide_console-'>link</a></h3> 
<p>
Shows the DragonRuby console. Useful when debugging/customizing an in-game dev workflow.
</p>
<h3 id='-----enable_console-'><code>enable_console</code> <a style='font-size: small; float: right;' href='#-----enable_console-'>link</a></h3> 
<p>
Enables the DragonRuby Console so that it can be presented by pressing the tilde key (the key next to the number 1 key).
</p>
<h3 id='-----disable_console-'><code>disable_console</code> <a style='font-size: small; float: right;' href='#-----disable_console-'>link</a></h3> 
<p>
Disables the DragonRuby Console so that it won't show up even if you press the tilde key or call <code>args.gtk.show_console</code>.
</p>
<h3 id='-----start_recording-'><code>start_recording</code> <a style='font-size: small; float: right;' href='#-----start_recording-'>link</a></h3> 
<p>
Resets the game to tick <code>0</code> and starts recording gameplay. Useful for visual regression tests/verification.
</p>
<h3 id='-----stop_recording-'><code>stop_recording</code> <a style='font-size: small; float: right;' href='#-----stop_recording-'>link</a></h3> 
<p>
Function takes in a destination file for the currently recording gameplay. This file can be used to replay a recording.
</p>
<h3 id='-----cancel_recording-'><code>cancel_recording</code> <a style='font-size: small; float: right;' href='#-----cancel_recording-'>link</a></h3> 
<p>
Function cancels a gameplay recording session and discards the replay.
</p>
<h3 id='-----start_replay-'><code>start_replay</code> <a style='font-size: small; float: right;' href='#-----start_replay-'>link</a></h3> 
<p>
Given a file that represents a recording, this method will run the recording against the current codebase.
</p>
<p>
You can start a replay from the command line also:
</p>
<pre>first argument: the game directory
--replay switch is the file path relative to the game directory
--speed switch is optional. a value of 4 will run the replay and game at 4x speed
cli command example is in the context of Linux and Mac, for Windows the binary would be ./dragonruby.exe
dragonruby ./mygame --replay ./replay.txt --speed 4
</pre>
<h3 id='-----stop_replay-'><code>stop_replay</code> <a style='font-size: small; float: right;' href='#-----stop_replay-'>link</a></h3> 
<p>
Function stops a replay that is currently executing.
</p>
<h3 id='-----get_base_dir-'><code>get_base_dir</code> <a style='font-size: small; float: right;' href='#-----get_base_dir-'>link</a></h3> 
<p>
Returns the path to the location of the dragonruby binary. In production mode, this value will be the same as the value returned by <code>get_game_dir</code>. Function should only be used for debugging/development workflows.
</p>
<h3 id='-----get_game_dir-'><code>get_game_dir</code> <a style='font-size: small; float: right;' href='#-----get_game_dir-'>link</a></h3> 
<p>
Returns the location within sandbox storage that the game is running. When developing your game, this value will be your <code>mygame</code> directory. In production, it'll return a value that is OS specific (eg the Roaming directory on Windows or the Application Support directory on Mac).
</p>
<p>
Invocations of ~(write|append)_file will write to this sandboxed directory.
</p>
<h3 id='-----get_game_dir_url-'><code>get_game_dir_url</code> <a style='font-size: small; float: right;' href='#-----get_game_dir_url-'>link</a></h3> 
<p>
Returns a url encoded string representing the sandbox location for game data.
</p>
<h3 id='-----open_game_dir-'><code>open_game_dir</code> <a style='font-size: small; float: right;' href='#-----open_game_dir-'>link</a></h3> 
<p>
Opens the game directory in the OS's file explorer. This should be used for debugging purposes only.
</p>
<h3 id='-----write_file_root-'><code>write_file_root</code> <a style='font-size: small; float: right;' href='#-----write_file_root-'>link</a></h3> 
<p>
Given a file path and contents, the contents will be written to a directory outside of the game directory. This method should be used for development purposes only. In production this method will write to the same sandboxed location as <code>write_file</code>.
</p>
<h3 id='-----append_file_root-'><code>append_file_root</code> <a style='font-size: small; float: right;' href='#-----append_file_root-'>link</a></h3> 
<p>
Has the same behavior as <code>write_file_root</code> except that it appends the contents as opposed to overwriting them.
</p>
<h3 id='-----argv-'><code>argv</code> <a style='font-size: small; float: right;' href='#-----argv-'>link</a></h3> 
<p>
Returns a string representing the command line arguments passed to the DragonRuby binary. This should be used for development/debugging purposes only.
</p>
<h3 id='-----cli_arguments-'><code>cli_arguments</code> <a style='font-size: small; float: right;' href='#-----cli_arguments-'>link</a></h3> 
<p>
Returns a <code>Hash</code> for command line arguments in the format of <code>--switch value</code> (two hyphens preceding the switch flag with the value seperated by a space). This should be used for development/debugging purposes only.
</p>
<h3 id='-----download_stb_rb(_raw)-'><code>download_stb_rb(_raw)</code> <a style='font-size: small; float: right;' href='#-----download_stb_rb(_raw)-'>link</a></h3> 
<p>
These two functions can help facilitate the integration of external code files. OSS contributors are encouraged to create libraries that all fit in one file (lowering the barrier to entry for adoption).
</p>
<p>
Examples:
</p>
<pre>def tick args
end

# option 1:
# source code will be downloaded from the specified GitHub url, and saved locally with a
# predefined folder convension.
$gtk.download_stb_rb "https://github.com/xenobrain/ruby_vectormath/blob/main/vectormath_2d.rb"

# option 2:
# source code will be downloaded from the specified GitHub username, repository, and file.
# code will be saved locally with a predefined folder convension.
$gtk.download_stb_rb "xenobrain", "ruby_vectormath", "vectormath_2d.rb"

# option 3:
# source code will be downloaded from a direct/raw url and saved to a direct/raw local path.
$gtk.download_stb_rb_raw "https://raw.githubusercontent.com/xenobrain/ruby_vectormath/main/vectormath_2d.rb",
                         "lib/xenobrain/ruby_vectionmath/vectormath_2d.rb"
</pre>
<h3 id='-----reload_history-'><code>reload_history</code> <a style='font-size: small; float: right;' href='#-----reload_history-'>link</a></h3> 
<p>
Returns a <code>Hash</code> representing the code files that have be loaded for your game along with timings for the events. This should be used for development/debugging purposes only.
</p>
<h3 id='-----reload_history_pending-'><code>reload_history_pending</code> <a style='font-size: small; float: right;' href='#-----reload_history_pending-'>link</a></h3> 
<p>
Returns a <code>Hash</code> for files that have been queued for reload, but haven't been processed yet. This should be used for development/debugging purposes only.
</p>
<h3 id='-----reload_if_needed-'><code>reload_if_needed</code> <a style='font-size: small; float: right;' href='#-----reload_if_needed-'>link</a></h3> 
<p>
Given a file name, this function will queue the file for reload if it's been modified. An optional second parameter can be passed in to signify if the file should be forced loaded regardless of modified time (<code>true</code> means to force load, <code>false</code> means to load only if the file has been modified). This function should be used for development/debugging purposes only.
</p>
<h1 id='--state-(-args-state-)'>State (<code>args.state</code>) <a style='font-size: small; float: right;' href='#--state-(-args-state-)'>link</a></h1> 
<p>
Store your game state inside of this <code>state</code>. Properties with arbitrary nesting is allowed and a backing Entity will be created on your behalf.
</p>
<pre>def tick args
  args.state.player.x ||= 0
  args.state.player.y ||= 0
end
</pre>
<h2 id='----entity_id-'><code>entity_id</code> <a style='font-size: small; float: right;' href='#----entity_id-'>link</a></h2> 
<p>
Entities automatically receive an <code>entity_id</code> of type <code>Fixnum</code>.
</p>
<h2 id='----entity_type-'><code>entity_type</code> <a style='font-size: small; float: right;' href='#----entity_type-'>link</a></h2> 
<p>
Entities can have an <code>entity_type</code> which is represented as a <code>Symbol</code>.
</p>
<h2 id='----created_at-'><code>created_at</code> <a style='font-size: small; float: right;' href='#----created_at-'>link</a></h2> 
<p>
Entities have <code>created_at</code> set to <code>args.state.tick_count</code> when they are created.
</p>
<h2 id='----created_at_elapsed-'><code>created_at_elapsed</code> <a style='font-size: small; float: right;' href='#----created_at_elapsed-'>link</a></h2> 
<p>
Returns the elapsed number of ticks since creation.
</p>
<h2 id='----global_created_at-'><code>global_created_at</code> <a style='font-size: small; float: right;' href='#----global_created_at-'>link</a></h2> 
<p>
Entities have <code>global_created_at</code> set to <code>Kernel.global_tick_count</code> when they are created.
</p>
<h2 id='----global_created_at_elapsed-'><code>global_created_at_elapsed</code> <a style='font-size: small; float: right;' href='#----global_created_at_elapsed-'>link</a></h2> 
<p>
Returns the elapsed number of global ticks since creation.
</p>
<h2 id='----as_hash-'><code>as_hash</code> <a style='font-size: small; float: right;' href='#----as_hash-'>link</a></h2> 
<p>
Entity cast to a <code>Hash</code> so you can update values as if you were updating a <code>Hash</code>.
</p>
<h2 id='----new_entity-'><code>new_entity</code> <a style='font-size: small; float: right;' href='#----new_entity-'>link</a></h2> 
<p>
Creates a new Entity with a <code>type</code>, and initial properties. An option block can be passed to change the newly created entity:
</p>
<pre>def tick args
  args.state.player ||= args.state.new_entity :player, x: 0, y: 0 do |e|
    e.max_hp = 100
    e.hp     = e.max_hp * rand
  end
end
</pre>
<h2 id='----new_entity_strict-'><code>new_entity_strict</code> <a style='font-size: small; float: right;' href='#----new_entity_strict-'>link</a></h2> 
<p>
Creates a new Strict Entity. While Entities created via <code>args.state.new_entity</code> can have new properties added later on, Entities created using <code>args.state.new_entity_strict</code> must define all properties that are allowed during its initialization. Attempting to add new properties after initialization will result in an exception.
</p>
<h2 id='----args-state-tick_count-'><code>args.state.tick_count</code> <a style='font-size: small; float: right;' href='#----args-state-tick_count-'>link</a></h2> 
<p>
Returns the current tick of the game. <code>args.state.tick_count</code> is <code>0</code> when the game is first started or if the game is reset via <code>$gtk.reset</code>.
</p>
<h1 id='--inputs-(-args-inputs-)'>Inputs (<code>args.inputs</code>) <a style='font-size: small; float: right;' href='#--inputs-(-args-inputs-)'>link</a></h1> 
<p>
Access using input using <code>args.inputs</code>.
</p>
<h2 id='----last_active-'><code>last_active</code> <a style='font-size: small; float: right;' href='#----last_active-'>link</a></h2> 
<p>
This function returns the last active input which will be set to either <code>:keyboard</code>, <code>:mouse</code>, or <code>:controller</code>. The function is helpful when you need to present on screen instructions based on the input the player chose to play with.
</p>
<pre>def tick args
  if args.inputs.last_active == :controller
    args.outputs.labels &lt;&lt; { x: 60, y: 60, text: "Use the D-Pad to move around." }
  else
    args.outputs.labels &lt;&lt; { x: 60, y: 60, text: "Use the arrow keys to move around." }
  end
end
</pre>
<p>
<code>:mouse</code>, or <code>:controller</code>. The function is helpful when you need to present on screen instructions based on the input the player chose to play with.
</p>
<h2 id='----locale-'><code>locale</code> <a style='font-size: small; float: right;' href='#----locale-'>link</a></h2> 
<p>
Returns the ISO 639-1 two-letter langauge code based on OS preferences. Refer to the following link for locale strings: <a href='https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes'>https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes</a>).
</p>
<p>
Defaults to "en" if locale can't be retrieved (<code>args.inputs.locale_raw</code> will be nil in this case).
</p>
<h2 id='----up-'><code>up</code> <a style='font-size: small; float: right;' href='#----up-'>link</a></h2> 
<p>
Returns <code>true</code> if: the <code>up</code> arrow or <code>w</code> key is pressed or held on the <code>keyboard</code>; or if <code>up</code> is pressed or held on <code>controller_one</code>; or if the <code>left_analog</code> on <code>controller_one</code> is tilted upwards.
</p>
<h2 id='----down-'><code>down</code> <a style='font-size: small; float: right;' href='#----down-'>link</a></h2> 
<p>
Returns <code>true</code> if: the <code>down</code> arrow or <code>s</code> key is pressed or held on the <code>keyboard</code>; or if <code>down</code> is pressed or held on <code>controller_one</code>; or if the <code>left_analog</code> on <code>controller_one</code> is tilted downwards.
</p>
<h2 id='----left-'><code>left</code> <a style='font-size: small; float: right;' href='#----left-'>link</a></h2> 
<p>
Returns <code>true</code> if: the <code>left</code> arrow or <code>a</code> key is pressed or held on the <code>keyboard</code>; or if <code>left</code> is pressed or held on <code>controller_one</code>; or if the <code>left_analog</code> on <code>controller_one</code> is tilted to the left.
</p>
<h2 id='----right-'><code>right</code> <a style='font-size: small; float: right;' href='#----right-'>link</a></h2> 
<p>
Returns <code>true</code> if: the <code>right</code> arrow or <code>d</code> key is pressed or held on the <code>keyboard</code>; or if <code>right</code> is pressed or held on <code>controller_one</code>; or if the <code>left_analog</code> on <code>controller_one</code> is tilted to the right.
</p>
<h2 id='----left_right-'><code>left_right</code> <a style='font-size: small; float: right;' href='#----left_right-'>link</a></h2> 
<p>
Returns <code>-1</code> (left), <code>0</code> (neutral), or <code>+1</code> (right) depending on results of <code>args.inputs.left</code> and <code>args.inputs.right</code>.
</p>
<pre>args.state.player[:x] += args.inputs.left_right * args.state.speed
</pre>
<h2 id='----up_down-'><code>up_down</code> <a style='font-size: small; float: right;' href='#----up_down-'>link</a></h2> 
<p>
Returns <code>-1</code> (down), <code>0</code> (neutral), or <code>+1</code> (up) depending on results of <code>args.inputs.down</code> and <code>args.inputs.up</code>.
</p>
<pre>args.state.player[:y] += args.inputs.up_down * args.state.speed
</pre>
<h2 id='----text-'><code>text</code> <a style='font-size: small; float: right;' href='#----text-'>link</a></h2> 
<p>
Returns a string that represents the last key that was pressed on the keyboard.
</p>
<h2 id='---mouse-(-args-inputs-mouse-)'>Mouse (<code>args.inputs.mouse</code>) <a style='font-size: small; float: right;' href='#---mouse-(-args-inputs-mouse-)'>link</a></h2> 
<p>
Represents the user's mouse.
</p>
<h3 id='-----has_focus-'><code>has_focus</code> <a style='font-size: small; float: right;' href='#-----has_focus-'>link</a></h3> 
<p>
Return's true if the game has mouse focus.
</p>
<h3 id='-----x-'><code>x</code> <a style='font-size: small; float: right;' href='#-----x-'>link</a></h3> 
<p>
Returns the current <code>x</code> location of the mouse.
</p>
<h3 id='-----y-'><code>y</code> <a style='font-size: small; float: right;' href='#-----y-'>link</a></h3> 
<p>
Returns the current <code>y</code> location of the mouse.
</p>
<h3 id='-----inside_rect--rect-'><code>inside_rect? rect</code> <a style='font-size: small; float: right;' href='#-----inside_rect--rect-'>link</a></h3> 
<p>
Return. <code>args.inputs.mouse.inside_rect?</code> takes in any primitive that responds to <code>x, y, w, h</code>:
</p>
<h3 id='-----inside_circle--center_point--radius-'><code>inside_circle? center_point, radius</code> <a style='font-size: small; float: right;' href='#-----inside_circle--center_point--radius-'>link</a></h3> 
<p>
Returns <code>true</code> if the mouse is inside of a specified circle. <code>args.inputs.mouse.inside_circle?</code> takes in any primitive that responds to <code>x, y</code> (which represents the circle's center), and takes in a <code>radius</code>:
</p>
<h3 id='-----moved-'><code>moved</code> <a style='font-size: small; float: right;' href='#-----moved-'>link</a></h3> 
<p>
Returns <code>true</code> if the mouse has moved on the current frame.
</p>
<h3 id='-----button_left-'><code>button_left</code> <a style='font-size: small; float: right;' href='#-----button_left-'>link</a></h3> 
<p>
Returns <code>true</code> if the left mouse button is down.
</p>
<h3 id='-----button_middle-'><code>button_middle</code> <a style='font-size: small; float: right;' href='#-----button_middle-'>link</a></h3> 
<p>
Returns <code>true</code> if the middle mouse button is down.
</p>
<h3 id='-----button_right-'><code>button_right</code> <a style='font-size: small; float: right;' href='#-----button_right-'>link</a></h3> 
<p>
Returns <code>true</code> if the right mouse button is down.
</p>
<h3 id='-----button_bits-'><code>button_bits</code> <a style='font-size: small; float: right;' href='#-----button_bits-'>link</a></h3> 
<p>
Returns a bitmask for all buttons on the mouse: <code>1</code> for a button in the <code>down</code> state, <code>0</code> for a button in the <code>up</code> state.
</p>
<h3 id='-----wheel-'><code>wheel</code> <a style='font-size: small; float: right;' href='#-----wheel-'>link</a></h3> 
<p>
Represents the mouse wheel. Returns <code>nil</code> if no mouse wheel actions occurred. Otherwise <code>args.inputs.mouse.wheel</code> will return a <code>Hash</code> with <code>x</code>, and <code>y</code> (representing movement on each axis).
</p>
<h3 id='-----click--or--down----previous_click----up-'><code>click</code> OR <code>down</code>, <code>previous_click</code>, <code>up</code> <a style='font-size: small; float: right;' href='#-----click--or--down----previous_click----up-'>link</a></h3> 
<p>
The properties <code>args.inputs.mouse.(click|down|previous_click|up)</code> each return <code>nil</code> if the mouse button event didn't occur. And return an Entity that has an <code>x</code>, <code>y</code> properties along with helper functions to determine collision: <code>inside_rect?</code>, <code>inside_circle</code>. This value will be true if any of the mouse's buttons caused these events. To scope to a specific button use <code>.button_left</code>, <code>.button_middle</code>, <code>.button_right</code>, or <code>.button_bits</code>.
</p>
<h2 id='---touch'>Touch <a style='font-size: small; float: right;' href='#---touch'>link</a></h2> 
<p>
The following touch apis are available on touch devices (iOS, Android, Mobile Web, Surface).
</p>
<h3 id='-----args-inputs-touch-'><code>args.inputs.touch</code> <a style='font-size: small; float: right;' href='#-----args-inputs-touch-'>link</a></h3> 
<p>
Returns a <code>Hash</code> representing all touch points on a touch device.
</p>
<h3 id='-----args-inputs-finger_left-'><code>args.inputs.finger_left</code> <a style='font-size: small; float: right;' href='#-----args-inputs-finger_left-'>link</a></h3> 
<p>
Returns a <code>Hash</code> with <code>x</code> and <code>y</code> denoting a touch point that is on the left side of the screen.
</p>
<h3 id='-----args-inputs-finger_right-'><code>args.inputs.finger_right</code> <a style='font-size: small; float: right;' href='#-----args-inputs-finger_right-'>link</a></h3> 
<p>
Returns a <code>Hash</code> with <code>x</code> and <code>y</code> denoting a touch point that is on the right side of the screen.
</p>
<h2 id='---controller-(-args-inputs-controller_(one-four)-)'>Controller (<code>args.inputs.controller_(one-four)</code>) <a style='font-size: small; float: right;' href='#---controller-(-args-inputs-controller_(one-four)-)'>link</a></h2> 
<p>
Represents controllers connected to the usb ports.
</p>
<h3 id='-----active-'><code>active</code> <a style='font-size: small; float: right;' href='#-----active-'>link</a></h3> 
<p>
Returns true if any of the controller's buttons were used.
</p>
<h3 id='-----up-'><code>up</code> <a style='font-size: small; float: right;' href='#-----up-'>link</a></h3> 
<p>
Returns <code>true</code> if <code>up</code> is pressed or held on the directional or left analog.
</p>
<h3 id='-----down-'><code>down</code> <a style='font-size: small; float: right;' href='#-----down-'>link</a></h3> 
<p>
Returns <code>true</code> if <code>down</code> is pressed or held on the directional or left analog.
</p>
<h3 id='-----left-'><code>left</code> <a style='font-size: small; float: right;' href='#-----left-'>link</a></h3> 
<p>
Returns <code>true</code> if <code>left</code> is pressed or held on the directional or left analog.
</p>
<h3 id='-----right-'><code>right</code> <a style='font-size: small; float: right;' href='#-----right-'>link</a></h3> 
<p>
Returns <code>true</code> if <code>right</code> is pressed or held on the directional or left analog.
</p>
<h3 id='-----left_right-'><code>left_right</code> <a style='font-size: small; float: right;' href='#-----left_right-'>link</a></h3> 
<p>
Returns <code>-1</code> (left), <code>0</code> (neutral), or <code>+1</code> (right) depending on results of <code>args.inputs.controller_(one-four).left</code> and <code>args.inputs.controller_(one-four).right</code>.
</p>
<h3 id='-----up_down-'><code>up_down</code> <a style='font-size: small; float: right;' href='#-----up_down-'>link</a></h3> 
<p>
Returns <code>-1</code> (down), <code>0</code> (neutral), or <code>+1</code> (up) depending on results of <code>args.inputs.controller_(one-four).up</code> and <code>args.inputs.controller_(one-four).down</code>.
</p>
<h3 id='-----(left|right)_analog_x_raw-'><code>(left|right)_analog_x_raw</code> <a style='font-size: small; float: right;' href='#-----(left|right)_analog_x_raw-'>link</a></h3> 
<p>
Returns the raw integer value for the analog's horizontal movement (<code>-32,000 to +32,000</code>).
</p>
<h3 id='-----(left|right)_analog_y_raw-'><code>(left|right)_analog_y_raw</code> <a style='font-size: small; float: right;' href='#-----(left|right)_analog_y_raw-'>link</a></h3> 
<p>
Returns the raw integer value for the analog's vertical movement (<code>-32,000 to +32,000</code>).
</p>
<h3 id='-----(left|right)_analog_x_perc-'><code>(left|right)_analog_x_perc</code> <a style='font-size: small; float: right;' href='#-----(left|right)_analog_x_perc-'>link</a></h3> 
<p>
Returns a number between <code>-1</code> and <code>1</code> which represents the percentage the analog is moved horizontally as a ratio of the maximum horizontal movement.
</p>
<h3 id='-----(left|right)_analog_y_perc-'><code>(left|right)_analog_y_perc</code> <a style='font-size: small; float: right;' href='#-----(left|right)_analog_y_perc-'>link</a></h3> 
<p>
Returns a number between <code>-1</code> and <code>1</code> which represents the percentage the analog is moved vertically as a ratio of the maximum vertical movement.
</p>
<h3 id='-----directional_up-'><code>directional_up</code> <a style='font-size: small; float: right;' href='#-----directional_up-'>link</a></h3> 
<p>
Returns <code>true</code> if <code>up</code> is pressed or held on the directional.
</p>
<h3 id='-----directional_down-'><code>directional_down</code> <a style='font-size: small; float: right;' href='#-----directional_down-'>link</a></h3> 
<p>
Returns <code>true</code> if <code>down</code> is pressed or held on the directional.
</p>
<h3 id='-----directional_left-'><code>directional_left</code> <a style='font-size: small; float: right;' href='#-----directional_left-'>link</a></h3> 
<p>
Returns <code>true</code> if <code>left</code> is pressed or held on the directional.
</p>
<h3 id='-----directional_right-'><code>directional_right</code> <a style='font-size: small; float: right;' href='#-----directional_right-'>link</a></h3> 
<p>
Returns <code>true</code> if <code>right</code> is pressed or held on the directional.
</p>
<h3 id='-----(a|b|x|y|l1|r1|l2|r2|l3|r3|start|select)-'><code>(a|b|x|y|l1|r1|l2|r2|l3|r3|start|select)</code> <a style='font-size: small; float: right;' href='#-----(a|b|x|y|l1|r1|l2|r2|l3|r3|start|select)-'>link</a></h3> 
<p>
Returns <code>true</code> if the specific button is pressed or held.
</p>
<h3 id='-----truthy_keys-'><code>truthy_keys</code> <a style='font-size: small; float: right;' href='#-----truthy_keys-'>link</a></h3> 
<p>
Returns a collection of <code>Symbol</code>s that represent all keys that are in the pressed or held state.
</p>
<h3 id='-----key_down-'><code>key_down</code> <a style='font-size: small; float: right;' href='#-----key_down-'>link</a></h3> 
<p>
Returns <code>true</code> if the specific button was pressed on this frame. <code>args.inputs.controller_(one-four).key_down.BUTTON</code> will only be true on the frame it was pressed.
</p>
<h3 id='-----key_held-'><code>key_held</code> <a style='font-size: small; float: right;' href='#-----key_held-'>link</a></h3> 
<p>
Returns <code>true</code> if the specific button is being held. <code>args.inputs.controller_(one-four).key_held.BUTTON</code> will be true for all frames after <code>key_down</code> (until released).
</p>
<h3 id='-----key_up-'><code>key_up</code> <a style='font-size: small; float: right;' href='#-----key_up-'>link</a></h3> 
<p>
Returns <code>true</code> if the specific button was released. <code>args.inputs.controller_(one-four).key_up.BUTTON</code> will be true only on the frame the button was released.
</p>
<h2 id='---keyboard-(-args-inputs-keyboard-)'>Keyboard (<code>args.inputs.keyboard</code>) <a style='font-size: small; float: right;' href='#---keyboard-(-args-inputs-keyboard-)'>link</a></h2> 
<p>
Represents the user's keyboard.
</p>
<h3 id='-----active-'><code>active</code> <a style='font-size: small; float: right;' href='#-----active-'>link</a></h3> 
<p>
Returns <code>Kernel.tick_count</code> (<code>args.state.tick_count</code>) if any keys on the keyboard were pressed.
</p>
<h3 id='-----has_focus-'><code>has_focus</code> <a style='font-size: small; float: right;' href='#-----has_focus-'>link</a></h3> 
<p>
Returns <code>true</code> if the game has keyboard focus.
</p>
<h3 id='-----up-'><code>up</code> <a style='font-size: small; float: right;' href='#-----up-'>link</a></h3> 
<p>
Returns <code>true</code> if <code>up</code> or <code>w</code> is pressed or held on the keyboard.
</p>
<h3 id='-----down-'><code>down</code> <a style='font-size: small; float: right;' href='#-----down-'>link</a></h3> 
<p>
Returns <code>true</code> if <code>down</code> or <code>s</code> is pressed or held on the keyboard.
</p>
<h3 id='-----left-'><code>left</code> <a style='font-size: small; float: right;' href='#-----left-'>link</a></h3> 
<p>
Returns <code>true</code> if <code>left</code> or <code>a</code> is pressed or held on the keyboard.
</p>
<h3 id='-----right-'><code>right</code> <a style='font-size: small; float: right;' href='#-----right-'>link</a></h3> 
<p>
Returns <code>true</code> if <code>right</code> or <code>d</code> is pressed or held on the keyboard.
</p>
<h3 id='-----left_right-'><code>left_right</code> <a style='font-size: small; float: right;' href='#-----left_right-'>link</a></h3> 
<p>
Returns <code>-1</code> (left), <code>0</code> (neutral), or <code>+1</code> (right) depending on results of <code>args.inputs.keyboard.left</code> and <code>args.inputs.keyboard.right</code>.
</p>
<h3 id='-----up_down-'><code>up_down</code> <a style='font-size: small; float: right;' href='#-----up_down-'>link</a></h3> 
<p>
Returns <code>-1</code> (left), <code>0</code> (neutral), or <code>+1</code> (right) depending on results of <code>args.inputs.keyboard.up</code> and <code>args.inputs.keyboard.up</code>.
</p>
<h3 id='----keyboard-properties'>keyboard properties <a style='font-size: small; float: right;' href='#----keyboard-properties'>link</a></h3> 
<p>
The following properties represent keys on the keyboard and are available on <code>args.inputs.keyboard.KEY</code>, <code>args.inputs.keyboard.key_down.KEY</code>, <code>args.inputs.keyboard.key_held.KEY</code>, and <code>args.inputs.keyboard.key_up.KEY</code>:
</p>
<ul>
<li><code>alt</code></li>
<li><code>meta</code></li>
<li><code>control</code></li>
<li><code>shift</code></li>
<li><code>ctrl_KEY</code> (dynamic method, eg <code>args.inputs.keyboard.ctrl_a</code>)</li>
<li><code>exclamation_point</code></li>
<li><code>zero</code> - <code>nine</code></li>
<li><code>backspace</code></li>
<li><code>delete</code></li>
<li><code>escape</code></li>
<li><code>enter</code></li>
<li><code>tab</code></li>
<li><code>(open|close)_round_brace</code></li>
<li><code>(open|close)_curly_brace</code></li>
<li><code>(open|close)_square_brace</code></li>
<li><code>colon</code></li>
<li><code>semicolon</code></li>
<li><code>equal_sign</code></li>
<li><code>hyphen</code></li>
<li><code>space</code></li>
<li><code>dollar_sign</code></li>
<li><code>double_quotation_mark</code></li>
<li><code>single_quotation_mark</code></li>
<li><code>backtick</code></li>
<li><code>tilde</code></li>
<li><code>period</code></li>
<li><code>comma</code></li>
<li><code>pipe</code></li>
<li><code>underscore</code></li>
<li><code>a</code> - <code>z</code></li>
<li><code>shift</code></li>
<li><code>control</code></li>
<li><code>alt</code></li>
<li><code>meta</code></li>
<li><code>left</code></li>
<li><code>right</code></li>
<li><code>up</code></li>
<li><code>down</code></li>
<li><code>pageup</code></li>
<li><code>pagedown</code></li>
<li><code>plus</code></li>
<li><code>at</code></li>
<li><code>forward_slash</code></li>
<li><code>back_slash</code></li>
<li><code>asterisk</code></li>
<li><code>less_than</code></li>
<li><code>greater_than</code></li>
<li><code>carat</code></li>
<li><code>ampersand</code></li>
<li><code>superscript_two</code></li>
<li><code>circumflex</code></li>
<li><code>question_mark</code></li>
<li><code>section_sign</code></li>
<li><code>ordinal_indicator</code></li>
<li><code>raw_key</code> (unique numeric identifier for key)</li>
<li><code>left_right</code></li>
<li><code>up_down</code></li>
<li><code>directional_vector</code></li>
<li><code>truthy_keys</code> (array of <code>Symbols</code>)</li>
</ul>
<h3 id='-----char-'><code>char</code> <a style='font-size: small; float: right;' href='#-----char-'>link</a></h3> 
<p>
Method is available under <code>inputs.key_down</code>, <code>inputs.key_held</code>, and <code>inputs.key_up</code>.  Take note that
</p>
<p>
<code>args.inputs.keyboard.key_held.char</code> will only return the ascii value of the last key that was held. Use <code>args.inputs.keyboard.key_held.truthy_keys</code> to get an <code>Array</code> of <code>Symbols</code> representing all keys being held.
</p>
<p>
To get a picture of all key states <code>args.inputs.keyboard.keys</code> returns a <code>Hash</code> with the following keys: <code>:down</code>, <code>:held</code>, <code>:down_or_held</code>, <code>:up</code>.
</p>
<p>
NOTE: <code>args.inputs.keyboard.key_down.char</code> will be set in line with key repeat behavior of your OS.
</p>
<p>
This is a demonstration of the behavior (see <code>./samples/02_input_basics/01_keyboard</code> for a more detailed example):
</p>
<pre>def tick args
  # uncomment the line below to see the value changes at a slower rate
  # $gtk.slowmo! 30

  keyboard = args.inputs.keyboard

  args.outputs.labels &lt;&lt; { x: 30,
                           y: 720,
                           text: "use the J key to test" }

  args.outputs.labels &lt;&lt; { x: 30,
                           y: 720 - 30,
                           text: "key_down.char: #{keyboard.key_down.char.inspect}" }

  args.outputs.labels &lt;&lt; { x: 30,
                           y: 720 - 60,
                           text: "key_down.j:    #{keyboard.key_down.j}" }

  args.outputs.labels &lt;&lt; { x: 30,
                           y: 720 - 30,
                           text: "key_held.char: #{keyboard.key_held.char.inspect}" }

  args.outputs.labels &lt;&lt; { x: 30,
                           y: 720 - 60,
                           text: "key_held.j:    #{keyboard.key_held.j}" }

  args.outputs.labels &lt;&lt; { x: 30,
                           y: 720 - 30,
                           text: "key_up.char:   #{keyboard.key_up.char.inspect}" }

  args.outputs.labels &lt;&lt; { x: 30,
                           y: 720 - 60,
                           text: "key_up.j:      #{keyboard.key_up.j}" }
end
</pre>
<h3 id='-----keys-'><code>keys</code> <a style='font-size: small; float: right;' href='#-----keys-'>link</a></h3> 
<p>
Returns a <code>Hash</code> with all keys on the keyboard in their respective state. The <code>Hash</code> contains the following <code>keys</code>
</p>
<ul>
<li><code>:down</code></li>
<li><code>:held</code></li>
<li><code>:down_or_held</code></li>
<li><code>:up</code></li>
</ul>
<h1 id='--grid-(-args-grid-)'>Grid (<code>args.grid</code>) <a style='font-size: small; float: right;' href='#--grid-(-args-grid-)'>link</a></h1> 
<p>
Returns the virtual grid for the game.
</p>
<h2 id='----name-'><code>name</code> <a style='font-size: small; float: right;' href='#----name-'>link</a></h2> 
<p>
Returns either <code>:origin_bottom_left</code> or <code>:origin_center</code>.
</p>
<h2 id='----bottom-'><code>bottom</code> <a style='font-size: small; float: right;' href='#----bottom-'>link</a></h2> 
<p>
Returns the <code>y</code> value that represents the bottom of the grid.
</p>
<h2 id='----top-'><code>top</code> <a style='font-size: small; float: right;' href='#----top-'>link</a></h2> 
<p>
Returns the <code>y</code> value that represents the top of the grid.
</p>
<h2 id='----left-'><code>left</code> <a style='font-size: small; float: right;' href='#----left-'>link</a></h2> 
<p>
Returns the <code>x</code> value that represents the left of the grid.
</p>
<h2 id='----right-'><code>right</code> <a style='font-size: small; float: right;' href='#----right-'>link</a></h2> 
<p>
Returns the <code>x</code> value that represents the right of the grid.
</p>
<h2 id='----rect-'><code>rect</code> <a style='font-size: small; float: right;' href='#----rect-'>link</a></h2> 
<p>
Returns a rectangle Primitive that represents the grid.
</p>
<h2 id='----origin_bottom_left!-'><code>origin_bottom_left!</code> <a style='font-size: small; float: right;' href='#----origin_bottom_left!-'>link</a></h2> 
<p>
Change the grids coordinate system to 0, 0 at the bottom left corner.
</p>
<h2 id='----origin_center!-'><code>origin_center!</code> <a style='font-size: small; float: right;' href='#----origin_center!-'>link</a></h2> 
<p>
Change the grids coordinate system to 0, 0 at the center of the screen.
</p>
<h2 id='----orientation-'><code>orientation</code> <a style='font-size: small; float: right;' href='#----orientation-'>link</a></h2> 
<p>
Returns either <code>:portrait</code> or <code>:landscape</code>. The orientation of your game is set within <code>./mygame/metadata/game_metadata.txt</code>.
</p>
<h2 id='----w-'><code>w</code> <a style='font-size: small; float: right;' href='#----w-'>link</a></h2> 
<p>
Returns the grid's width (value is 1280 if orientation <code>:landscape</code>, and 720 if orientation is <code>:portrait</code>).
</p>
<h2 id='----h-'><code>h</code> <a style='font-size: small; float: right;' href='#----h-'>link</a></h2> 
<p>
Returns the grid's width (value is 720 if orientation <code>:landscape</code>, and 1280 if orientation is <code>:portrait</code>).
</p>
<h2 id='---grid-hd-properties'>Grid HD Properties <a style='font-size: small; float: right;' href='#---grid-hd-properties'>link</a></h2> 
<p>
The following properties are available to Pro license holders. Setting <code>hd=true</code> and <code>hd=true</code> in <code>./mygame/metadata/game_metadata.txt</code> will enable All Screen Mode.
</p>
<p>
Please review the sample app located at <code>./samples/07_advanced_rendering_hd/03_allscreen_properties</code>.
</p>
<p>
When All Screen mode is enabled, you can render outside of the 1280x720 safe area. The 1280x720 logical canvas will be centered within the screen and scaled to one of the following closest/bess-fit resolutions.
</p>
<ul>
<li>720p: 1280x720</li>
<li>HD+: 1600x900</li>
<li>1080p: 1920x1080</li>
<li>1440p: 2560x1440</li>
<li>1880p: 3200x1800</li>
<li>4k: 3840x2160</li>
<li>5k: 6400x2880</li>
</ul>
<p>
Regardless of the rendering resolution, your logical canvas will always be 1280x720 and all <code>hd_*</code> values will be at this same logical scale.
</p>
<h3 id='-----hd_left-'><code>hd_left</code> <a style='font-size: small; float: right;' href='#-----hd_left-'>link</a></h3> 
<p>
Returns the position of the left edge of the screen at the logical scale of 1280x720. For example, if the window's width is 1290x720, then <code>hd_left</code> will be -5.
</p>
<h3 id='-----hd_right-'><code>hd_right</code> <a style='font-size: small; float: right;' href='#-----hd_right-'>link</a></h3> 
<p>
Returns the position of the right edge of the screen at the logical scale of 1280x720. For example, if the window's width is 1290x720, then <code>hd_right</code> will be 1285.
</p>
<h3 id='-----hd_bottom-'><code>hd_bottom</code> <a style='font-size: small; float: right;' href='#-----hd_bottom-'>link</a></h3> 
<p>
Returns the position of the bottom edge of the screen at the logical scale of 1280x720. For example, if the window's width is 1280x730, then <code>hd_bottom</code> will be -5.
</p>
<h3 id='-----hd_top-'><code>hd_top</code> <a style='font-size: small; float: right;' href='#-----hd_top-'>link</a></h3> 
<p>
Returns the position of the top edge of the screen at the logical scale of 1280x720. For example, if the window's width is 1280x730, then <code>hd_top</code> will be 725.
</p>
<h3 id='-----hd_offset_x-'><code>hd_offset_x</code> <a style='font-size: small; float: right;' href='#-----hd_offset_x-'>link</a></h3> 
<p>
Returns the number of pixels that the 1280x720 canvas is offset from the left so that it's centered in the screen.
</p>
<h3 id='-----hd_offset_y-'><code>hd_offset_y</code> <a style='font-size: small; float: right;' href='#-----hd_offset_y-'>link</a></h3> 
<p>
Returns the number of pixels that the 1280x720 canvas is offset from the bottom so that it's centered in the screen.
</p>
<h3 id='-----window_width-'><code>window_width</code> <a style='font-size: small; float: right;' href='#-----window_width-'>link</a></h3> 
<p>
Returns the true width of the window. High DPI settings are not taken into consideration.
</p>
<h3 id='-----window_height-'><code>window_height</code> <a style='font-size: small; float: right;' href='#-----window_height-'>link</a></h3> 
<p>
Returns the true height of the window. High DPI settings are not taken into consideration.
</p>
<h3 id='-----native_width-'><code>native_width</code> <a style='font-size: small; float: right;' href='#-----native_width-'>link</a></h3> 
<p>
Returns the true width of the window. High DPI settings (macOS, iOS, Android) are taken into consideration.
</p>
<h3 id='-----native_height-'><code>native_height</code> <a style='font-size: small; float: right;' href='#-----native_height-'>link</a></h3> 
<p>
Returns the true height of the window. High DPI settings (macOS, iOS, Android) are taken into consideration.
</p>
<h3 id='-----native_scale-'><code>native_scale</code> <a style='font-size: small; float: right;' href='#-----native_scale-'>link</a></h3> 
<p>
Returns a decimal value representing the rendering scale of the game.
</p>
<ul>
<li>720p: 1.0</li>
<li>HD+: 1.25</li>
<li>1080p, Full HD: 1.5</li>
<li>Full HD+: 1.75</li>
<li>1440p: 2.0</li>
<li>1880p: 2.5</li>
<li>4k: 3.0</li>
<li>5k: 4.0</li>
</ul>
<h3 id='-----native_scale_enum-'><code>native_scale_enum</code> <a style='font-size: small; float: right;' href='#-----native_scale_enum-'>link</a></h3> 
<p>
Returns an integer value representing the rendering scale of the game.
</p>
<ul>
<li>720p: 100</li>
<li>HD+: 125</li>
<li>1080p, Full HD: 150</li>
<li>Full HD+: 175</li>
<li>1440p: 200</li>
<li>1880p: 250</li>
<li>4k: 300</li>
<li>5k: 400</li>
</ul>
<p>
The enum value is taken into consideration when rendering a sprite through texture atlases.
</p>
<p>
Given the following code:
</p>
<pre>def tick args
  args.outputs.sprites &lt;&lt; { x: 0, y: 0, w: 100, h: 100, path: "sprites/player.png" }
end
</pre>
<p>
The sprite path of <code>sprites/player.png</code> will be replaced according to the following naming conventions (fallback to a lower resolution is automatically handled if a sprite with naming convention isn't found):
</p>
<ul>
<li>720p: <code>sprites/player.png</code> (100x100)</li>
<li>HD+: <code>sprites/player@125.png</code> (125x125)</li>
<li>1080p: <code>sprites/player@150.png</code> (150x150)</li>
<li>1440p: <code>sprites/player@200.png</code> (200x200)</li>
<li>1880p: <code>sprites/player@250.png</code> (250x250)</li>
<li>4k: <code>sprites/player@300.png</code> (300x300)</li>
<li>5k: <code>sprites/player@400.png</code> (400x400)</li>
</ul>
<h1 id='--geometry-(-args-geometry-)'>Geometry (<code>args.geometry</code>) <a style='font-size: small; float: right;' href='#--geometry-(-args-geometry-)'>link</a></h1> 
<p>
The Geometry <code>module</code> contains methods for calculations that are frequently used in game development. For convenience, this <code>module</code> is mixed into <code>Hash</code>, <code>Array</code>, and DragonRuby's <code>Entity</code> class. It is also available in a functional variant at <code>args.geometry</code>.
</p>
<p>
Many of the geometric functions assume the objects have a certain shape:
</p>
<ul>
<li><code>Points</code> are assumed to respond to <code>x, y</code>.</li>
<li><code>Rectangles</code> are assumed to respond to <code>x, y, w, h</code>.</li>
<li><code>Lines</code> are assumed to respond to <code>x, y, x2, y2</code>.</li>
</ul>
<pre>def tick args
  # Geometry is mixed into Hash, Array, and Entity

  # define to rectangles
  rect_1 = { x: 0, y: 0, w: 100, h: 100 }
  rect_2 = { x: 50, y: 50, w: 100, h: 100 }

  # call geometry method function from instance of a Hash class
  puts rect_1.intersect_rect?(rect_2)

  # OR

  # use the geometry methods functionally
  puts args.geometry.intersect_rect?(rect_1, rect_2)
end
</pre>
<h2 id='----intersect_rect--'><code>intersect_rect?</code> <a style='font-size: small; float: right;' href='#----intersect_rect--'>link</a></h2> 
<p>
Invocation variants:
</p>
<ul>
<li><code>instance.intersect_rect?(other, tolerance)</code></li>
<li><code>args.geometry.intersect_rect?(rect_1, rect_2, tolerance)</code></li>
<li><code>args.inputs.mouse.intersect_rect?(other, tolerance)</code></li>
</ul>
<p>
Given two rectangle primitives this function will return <code>true</code> or <code>false</code> depending on if the two rectangles intersect or not. An optional final parameter can be passed in representing the <code>tolerence</code> of overlap needed to be considered a true intersection. The default value of <code>tolerance</code> is <code>0.1</code> which keeps the function from returning true if only the edges of the rectangles overlap.
</p>
<p>
<code>:anchor_x</code>, and <code>anchor_y</code> is taken into consideration if the objects respond to these methods.
</p>
<p>
Here is an example where one rectangle is stationary, and another rectangle is controlled using directional input. The rectangles change color from blue to read if they intersect.
</p>
<pre>def tick args
  # define a rectangle in state and position it
  # at the center of the screen with a color of blue
  args.state.box_1 ||= {
    x: 640 - 20,
    y: 360 - 20,
    w: 40,
    h: 40,
    r: 0,
    g: 0,
    b: 255
  }

  # create another rectangle in state and position it
  # at the far left center
  args.state.box_2 ||= {
    x: 0,
    y: 360 - 20,
    w: 40,
    h: 40,
    r: 0,
    g: 0,
    b: 255
  }

  # take the directional input and use that to move the second rectangle around
  # increase or decrease the x value based on if left or right is held
  args.state.box_2.x += args.inputs.left_right * 5
  # increase or decrease the y value based on if up or down is held
  args.state.box_2.y += args.inputs.up_down * 5

  # change the colors of the rectangles based on whether they
  # intersect or not
  if args.state.box_1.intersect_rect? args.state.box_2
    args.state.box_1.r = 255
    args.state.box_1.g = 0
    args.state.box_1.b = 0

    args.state.box_2.r = 255
    args.state.box_2.g = 0
    args.state.box_2.b = 0
  else
    args.state.box_1.r = 0
    args.state.box_1.g = 0
    args.state.box_1.b = 255

    args.state.box_2.r = 0
    args.state.box_2.g = 0
    args.state.box_2.b = 255
  end

  # render the rectangles as border primitives on the screen
  args.outputs.borders &lt;&lt; args.state.box_1
  args.outputs.borders &lt;&lt; args.state.box_2
end
</pre>
<h2 id='----inside_rect--'><code>inside_rect?</code> <a style='font-size: small; float: right;' href='#----inside_rect--'>link</a></h2> 
<p>
Invocation variants:
</p>
<ul>
<li><code>instance.inside_rect?(other)</code></li>
<li><code>args.geometry.inside_rect?(rect_1, rect_2)</code></li>
</ul>
<p>
Given two rectangle primitives this function will return <code>true</code> or <code>false</code> depending on if the first rectangle (or <code>self</code>) is inside of the second rectangle.
</p>
<p>
Here is an example where one rectangle is stationary, and another rectangle is controlled using directional input. The rectangles change color from blue to read if the movable rectangle is entirely inside the stationary rectangle.
</p>
<p>
<code>:anchor_x</code>, and <code>anchor_y</code> is taken into consideration if the objects respond to these methods.
</p>
<pre>def tick args
  # define a rectangle in state and position it
  # at the center of the screen with a color of blue
  args.state.box_1 ||= {
    x: 640 - 40,
    y: 360 - 40,
    w: 80,
    h: 80,
    r: 0,
    g: 0,
    b: 255
  }

  # create another rectangle in state and position it
  # at the far left center
  args.state.box_2 ||= {
    x: 0,
    y: 360 - 10,
    w: 20,
    h: 20,
    r: 0,
    g: 0,
    b: 255
  }

  # take the directional input and use that to move the second rectangle around
  # increase or decrease the x value based on if left or right is held
  args.state.box_2.x += args.inputs.left_right * 5
  # increase or decrease the y value based on if up or down is held
  args.state.box_2.y += args.inputs.up_down * 5

  # change the colors of the rectangles based on whether they
  # intersect or not
  if args.state.box_2.inside_rect? args.state.box_1
    args.state.box_1.r = 255
    args.state.box_1.g = 0
    args.state.box_1.b = 0

    args.state.box_2.r = 255
    args.state.box_2.g = 0
    args.state.box_2.b = 0
  else
    args.state.box_1.r = 0
    args.state.box_1.g = 0
    args.state.box_1.b = 255

    args.state.box_2.r = 0
    args.state.box_2.g = 0
    args.state.box_2.b = 255
  end

  # render the rectangles as border primitives on the screen
  args.outputs.borders &lt;&lt; args.state.box_1
  args.outputs.borders &lt;&lt; args.state.box_2
end
</pre>
<h2 id='----scale_rect-'><code>scale_rect</code> <a style='font-size: small; float: right;' href='#----scale_rect-'>link</a></h2> 
<p>
Given a <code>Rectangle</code> this function returns a new rectangle with a scaled size.
</p>
<ul>
<li><code>ratio</code>: the ratio by which to scale the rect. A ratio of 2 will double the dimensions of the rect while a ratio of 0.5 will halve its dimensions.</li>
<li><code>anchor_x</code> and <code>anchor_y</code> specify the point within the rect from which to resize it. Setting both to 0 will affect the width and height of the rect, leaving x and y unchanged. Setting both to 0.5 will scale all sides of the rect proportionally from the center.</li>
</ul>
<pre>def tick args
  # a rect at the center of the screen
  args.state.rect_1 ||= { x: 640 - 20, y: 360 - 20, w: 40, h: 40 }

  # render the rect
  args.outputs.borders &lt;&lt; args.state.rect_1

  # the rect half the size with the x and y position unchanged
  args.outputs.borders &lt;&lt; args.state.rect_1.scale_rect(0.5)

  # the rect double the size, repositioned in the center given anchor optional arguments
  args.outputs.borders &lt;&lt; args.state.rect_1.scale_rect(2, 0.5, 0.5)
end
</pre>
<h2 id='----scale_rect_extended-'><code>scale_rect_extended</code> <a style='font-size: small; float: right;' href='#----scale_rect_extended-'>link</a></h2> 
<p>
The behavior is similar to <code>scale_rect</code> except that you can independently control the scale of each axis. The parameters are all named:
</p>
<ul>
<li><code>percentage_x</code>: percentage to change the width (default value of 1.0)</li>
<li><code>percentage_y</code>: percentage to change the height (default value of 1.0)</li>
<li><code>anchor_x</code>: anchor repositioning of x (default value of 0.0)</li>
<li><code>anchor_y</code>: anchor repositioning of y (default value of 0.0)</li>
</ul>
<pre>def tick args
  baseline_rect = { x: 640 - 20, y: 360 - 20, w: 40, h: 40 }
  args.state.rect_1 ||= baseline_rect
  args.state.rect_2 ||= baseline_rect.scale_rect_extended(percentage_x: 2,
                                                          percentage_y: 0.5,
                                                          anchor_x: 0.5,
                                                          anchor_y: 1.0)
  args.outputs.borders &lt;&lt; args.state.rect_1
  args.outputs.borders &lt;&lt; args.state.rect_2
end
</pre>
<h2 id='----anchor_rect-'><code>anchor_rect</code> <a style='font-size: small; float: right;' href='#----anchor_rect-'>link</a></h2> 
<p>
Returns a new rect that is anchored by an <code>anchor_x</code> and <code>anchor_y</code> value. The width and height of the rectangle is taken into consideration when determining the anchor position:
</p>
<pre>def tick args
  args.state.rect ||= {
    x: 640,
    y: 360,
    w: 100,
    h: 100
  }

  # rect's center: 640 + 50, 360 + 50
  args.outputs.borders &lt;&lt; args.state.rect.anchor_rect(0, 0)

  # rect's center: 640, 360
  args.outputs.borders &lt;&lt; args.state.rect.anchor_rect(0.5, 0.5)

  # rect's center: 640, 360
  args.outputs.borders &lt;&lt; args.state.rect.anchor_rect(0.5, 0)
end
</pre>
<h2 id='----angle_from-'><code>angle_from</code> <a style='font-size: small; float: right;' href='#----angle_from-'>link</a></h2> 
<p>
Invocation variants:
</p>
<ul>
<li><code>args.geometry.angle_from start_point, end_point</code></li>
<li><code>start_point.angle_from end_point</code></li>
</ul>
<p>
Returns an angle in degrees from the <code>end_point</code> to the <code>start_point</code> (if you want the value in radians, you can call <code>.to_radians</code> on the value returned):
</p>
<pre>def tick args
  rect_1 ||= {
    x: 0,
    y: 0,
  }

  rect_2 ||= {
    x: 100,
    y: 100,
  }

  angle = rect_1.angle_from rect_2 # returns 225 degrees
  angle_radians = angle.to_radians
  args.outputs.labels &lt;&lt; { x: 30, y: 30.from_top, text: "#{angle}, #{angle_radians}" }

  angle = args.geometry.angle_from rect_1, rect_2 # returns 225 degrees
  angle_radians = angle.to_radians
  args.outputs.labels &lt;&lt; { x: 30, y: 60.from_top, text: "#{angle}, #{angle_radians}" }
end
</pre>
<h2 id='----angle_to-'><code>angle_to</code> <a style='font-size: small; float: right;' href='#----angle_to-'>link</a></h2> 
<p>
Invocation variants:
</p>
<ul>
<li><code>args.geometry.angle_to start_point, end_point</code></li>
<li><code>start_point.angle_to end_point</code></li>
</ul>
<p>
Returns an angle in degrees to the <code>end_point</code> from the <code>start_point</code> (if you want the value in radians, you can call <code>.to_radians</code> on the value returned):
</p>
<pre>def tick args
  rect_1 ||= {
    x: 0,
    y: 0,
  }

  rect_2 ||= {
    x: 100,
    y: 100,
  }

  angle = rect_1.angle_to rect_2 # returns 45 degrees
  angle_radians = angle.to_radians
  args.outputs.labels &lt;&lt; { x: 30, y: 30.from_top, text: "#{angle}, #{angle_radians}" }

  angle = args.geometry.angle_to rect_1, rect_2 # returns 45 degrees
  angle_radians = angle.to_radians
  args.outputs.labels &lt;&lt; { x: 30, y: 60.from_top, text: "#{angle}, #{angle_radians}" }
end
</pre>
<h2 id='----distance-'><code>distance</code> <a style='font-size: small; float: right;' href='#----distance-'>link</a></h2> 
<p>
Returns the distance between two points;
</p>
<pre>def tick args
  rect_1 ||= {
    x: 0,
    y: 0,
  }

  rect_2 ||= {
    x: 100,
    y: 100,
  }

  distance = args.geometry.distance rect_1, rect_2
  args.outputs.labels &lt;&lt; {
    x: 30,
    y: 30.from_top,
    text: "#{distance}"
  }

  args.outputs.lines &lt;&lt; {
    x: rect_1.x,
    y: rect_1.y,
    x2: rect_2.x,
    y2: rect_2.y
  }
end
</pre>
<h2 id='----point_inside_circle--'><code>point_inside_circle?</code> <a style='font-size: small; float: right;' href='#----point_inside_circle--'>link</a></h2> 
<p>
Invocation variants:
</p>
<ul>
<li><code>point_1.point_inside_circle? circle_center, circle_radius</code></li>
<li><code>args.geometry.point_inside_circle? point_1, circle_center, circle_radius</code></li>
</ul>
<p>
Returns <code>true</code> if a point is inside of a circle defined as a center point and radius.
</p>
<pre>def tick args
  # define circle center
  args.state.circle_center ||= {
    x: 640,
    y: 360
  }

  # define circle radius
  args.state.circle_radius ||= 100

  # define point
  args.state.point_1 ||= {
    x: 100,
    y: 100
  }

  # allow point to be moved using keyboard
  args.state.point_1.x += args.inputs.left_right * 5
  args.state.point_1.y += args.inputs.up_down * 5

  # determine if point is inside of circle
  intersection = args.geometry.point_inside_circle? args.state.point_1,
                                                    args.state.circle_center,
                                                    args.state.circle_radius

  # render point as a square
  args.outputs.sprites &lt;&lt; {
    x: args.state.point_1.x - 20,
    y: args.state.point_1.y - 20,
    w: 40,
    h: 40,
    path: "sprites/square/blue.png"
  }

  # if there is an intersection, render a red circle
  # otherwise render a blue circle
  if intersection
    args.outputs.sprites &lt;&lt; {
      x: args.state.circle_center.x - args.state.circle_radius,
      y: args.state.circle_center.y - args.state.circle_radius,
      w: args.state.circle_radius * 2,
      h: args.state.circle_radius * 2,
      path: "sprites/circle/red.png",
      a: 128
    }
  else
    args.outputs.sprites &lt;&lt; {
      x: args.state.circle_center.x - args.state.circle_radius,
      y: args.state.circle_center.y - args.state.circle_radius,
      w: args.state.circle_radius * 2,
      h: args.state.circle_radius * 2,
      path: "sprites/circle/blue.png",
      a: 128
    }
  end
end
</pre>
<h2 id='----center_inside_rect-'><code>center_inside_rect</code> <a style='font-size: small; float: right;' href='#----center_inside_rect-'>link</a></h2> 
<p>
Invocation variants:
</p>
<ul>
<li><code>target_rect.center_inside_rect reference_rect</code></li>
<li><code>args.geometry.center_inside_rect target_rect, reference_rect</code></li>
</ul>
<p>
Given a target rect and a reference rect, the target rect is centered inside the reference rect (a new rect is returned).
</p>
<pre>def tick args
  rect_1 = {
    x: 0,
    y: 0,
    w: 100,
    h: 100
  }

  rect_2 = {
    x: 640 - 100,
    y: 360 - 100,
    w: 200,
    h: 200
  }

  centered_rect = args.geometry.center_inside_rect rect_1, rect_2
  # OR
  # centered_rect = rect_1.center_inside_rect rect_2

  args.outputs.solids &lt;&lt; rect_1.merge(r: 255)
  args.outputs.solids &lt;&lt; rect_2.merge(b: 255)
  args.outputs.solids &lt;&lt; centered_rect.merge(g: 255)
end
</pre>
<h2 id='----ray_test-'><code>ray_test</code> <a style='font-size: small; float: right;' href='#----ray_test-'>link</a></h2> 
<p>
Given a point and a line, <code>ray_test</code> returns one of the following symbols based on the location of the point relative to the line: <code>:left</code>, <code>:right</code>, <code>:on</code>
</p>
<pre>def tick args
  # create a point based off of the mouse location
  point = {
    x: args.inputs.mouse.x,
    y: args.inputs.mouse.y
  }

  # draw a line from the bottom left to the top right
  line = {
    x: 0,
    y: 0,
    x2: 1280,
    y2: 720
  }

  # perform ray_test on point and line
  ray = args.geometry.ray_test point, line

  # output the results of ray test at mouse location
  args.outputs.labels &lt;&lt; {
    x: point.x,
    y: point.y + 25,
    text: "#{ray}",
    alignment_enum: 1,
    vertical_alignment_enum: 1,
  }

  # render line
  args.outputs.lines &lt;&lt; line

  # render point
  args.outputs.solids &lt;&lt; {
    x: point.x - 5,
    y: point.y - 5,
    w: 10,
    h: 10
  }
end
</pre>
<h2 id='----line_rise_run-'><code>line_rise_run</code> <a style='font-size: small; float: right;' href='#----line_rise_run-'>link</a></h2> 
<p>
Given a line, this function returns a Hash with <code>x</code> and <code>y</code> keys representing a normalized representation of the rise and run of the line.
</p>
<pre>def tick args
  # draw a line from the bottom left to the top right
  line = {
    x: 0,
    y: 0,
    x2: 1280,
    y2: 720
  }

  # get rise and run of line
  rise_run = args.geometry.line_rise_run line

  # output the rise and run of line
  args.outputs.labels &lt;&lt; {
    x: 640,
    y: 360,
    text: "#{rise_run}",
    alignment_enum: 1,
    vertical_alignment_enum: 1,
  }

  # render the line
  args.outputs.lines &lt;&lt; line
end
</pre>
<h2 id='----rotate_point-'><code>rotate_point</code> <a style='font-size: small; float: right;' href='#----rotate_point-'>link</a></h2> 
<p>
Given a point and an angle in degrees, a new point is returned that is rotated around the origin by the degrees amount. An optional third argument can be provided to rotate the angle around a point other than the origin.
</p>
<pre>def tick args
  args.state.rotate_amount ||= 0
  args.state.rotate_amount  += 1

  if args.state.rotate_amount &gt;= 360
    args.state.rotate_amount = 0
  end

  point_1 = {
    x: 100,
    y: 100
  }

  # rotate point around 0, 0
  rotated_point_1 = args.geometry.rotate_point point_1,
                                               args.state.rotate_amount

  args.outputs.solids &lt;&lt; {
    x: rotated_point_1.x - 5,
    y: rotated_point_1.y - 5,
    w: 10,
    h: 10
  }

  point_2 = {
    x: 640 + 100,
    y: 360 + 100
  }

  # rotate point around center screen
  rotated_point_2 = args.geometry.rotate_point point_2,
                                               args.state.rotate_amount,
                                               x: 640, y: 360

  args.outputs.solids &lt;&lt; {
    x: rotated_point_2.x - 5,
    y: rotated_point_2.y - 5,
    w: 10,
    h: 10
  }
end
</pre>
<h2 id='----find_intersect_rect-'><code>find_intersect_rect</code> <a style='font-size: small; float: right;' href='#----find_intersect_rect-'>link</a></h2> 
<p>
Given a rect and a collection of rects, <code>find_intersect_rect</code> returns the first rect that intersects with the the first parameter.
</p>
<p>
<code>:anchor_x</code>, and <code>anchor_y</code> is taken into consideration if the objects respond to these methods.
</p>
<p>
If you find yourself doing this:
</p>
<pre>collision = args.state.terrain.find { |t| t.intersect_rect? args.state.player }
</pre>
<p>
Consider using <code>find_intersect_rect</code> instead (it's more descriptive and faster):
</p>
<pre>collision = args.geometry.find_intersect_rect args.state.player, args.state.terrain
</pre>
<h2 id='----find_all_intersect_rect-'><code>find_all_intersect_rect</code> <a style='font-size: small; float: right;' href='#----find_all_intersect_rect-'>link</a></h2> 
<p>
Given a rect and a collection of rects, <code>find_all_intersect_rect</code> returns all rects that intersects with the the first parameter.
</p>
<p>
<code>:anchor_x</code>, and <code>anchor_y</code> is taken into consideration if the objects respond to these methods.
</p>
<p>
If you find yourself doing this:
</p>
<pre>collisions = args.state.terrain.find_all { |t| t.intersect_rect? args.state.player }
</pre>
<p>
Consider using <code>find_all_intersect_rect</code> instead (it's more descriptive and faster):
</p>
<pre>collisions = args.geometry.find_all_intersect_rect args.state.player, args.state.terrain
</pre>
<h2 id='----find_intersect_rect_quad_tree-'><code>find_intersect_rect_quad_tree</code> <a style='font-size: small; float: right;' href='#----find_intersect_rect_quad_tree-'>link</a></h2> 
<p>
This is a faster collision algorithm for determining if a rectangle intersects any rectangle in an array. In order to use <code>find_intersect_rect_quad_tree</code>, you must first generate a quad tree data structure using <code>create_quad_tree</code>. Use this function if <code>find_intersect_rect</code> isn't fast enough.
</p>
<pre>def tick args
  # create a player
  args.state.player ||= {
    x: 640 - 10,
    y: 360 - 10,
    w: 20,
    h: 20
  }

  # allow control of player movement using arrow keys
  args.state.player.x += args.inputs.left_right * 5
  args.state.player.y += args.inputs.up_down * 5

  # generate 40 random rectangles
  args.state.boxes ||= 40.map do
    {
      x: 1180 * rand + 50,
      y: 620 * rand + 50,
      w: 100,
      h: 100
    }
  end

  # generate a quad tree based off of rectangles.
  # the quad tree should only be generated once for
  # a given array of rectangles. if the rectangles
  # change, then the quad tree must be regenerated
  args.state.quad_tree ||= args.geometry.quad_tree_create args.state.boxes

  # use quad tree and find_intersect_rect_quad_tree to determine collision with player
  collision = args.geometry.find_intersect_rect_quad_tree args.state.player,
                                                          args.state.quad_tree

  # if there is a collision render a red box
  if collision
    args.outputs.solids &lt;&lt; collision.merge(r: 255)
  end

  # render player as green
  args.outputs.solids &lt;&lt; args.state.player.merge(g: 255)

  # render boxes as borders
  args.outputs.borders &lt;&lt; args.state.boxes
end
</pre>
<h2 id='----find_all_intersect_rect_quad_tree-'><code>find_all_intersect_rect_quad_tree</code> <a style='font-size: small; float: right;' href='#----find_all_intersect_rect_quad_tree-'>link</a></h2> 
<p>
This is a faster collision algorithm for determining if a rectangle intersects other rectangles in an array. In order to use <code>find_all_intersect_rect_quad_tree</code>, you must first generate a quad tree data structure using <code>create_quad_tree</code>. Use this function if <code>find_all_intersect_rect</code> isn't fast enough.
</p>
<pre>def tick args
  # create a player
  args.state.player ||= {
    x: 640 - 10,
    y: 360 - 10,
    w: 20,
    h: 20
  }

  # allow control of player movement using arrow keys
  args.state.player.x += args.inputs.left_right * 5
  args.state.player.y += args.inputs.up_down * 5

  # generate 40 random rectangles
  args.state.boxes ||= 40.map do
    {
      x: 1180 * rand + 50,
      y: 620 * rand + 50,
      w: 100,
      h: 100
    }
  end

  # generate a quad tree based off of rectangles.
  # the quad tree should only be generated once for
  # a given array of rectangles. if the rectangles
  # change, then the quad tree must be regenerated
  args.state.quad_tree ||= args.geometry.quad_tree_create args.state.boxes

  # use quad tree and find_intersect_rect_quad_tree to determine collision with player
  collisions = args.geometry.find_all_intersect_rect_quad_tree args.state.player,
                                                              args.state.quad_tree

  # if there is a collision render a red box
  args.outputs.solids &lt;&lt; collisions.map { |c| c.merge(r: 255) }

  # render player as green
  args.outputs.solids &lt;&lt; args.state.player.merge(g: 255)

  # render boxes as borders
  args.outputs.borders &lt;&lt; args.state.boxes
end
</pre>
<h2 id='----create_quad_tree-'><code>create_quad_tree</code> <a style='font-size: small; float: right;' href='#----create_quad_tree-'>link</a></h2> 
<p>
Generates a quad tree from an array of rectangles. See <code>find_intersect_rect_quad_tree</code> for usage.
</p>
<h1 id='--audio-(-args-audio-)'>Audio (<code>args.audio</code>) <a style='font-size: small; float: right;' href='#--audio-(-args-audio-)'>link</a></h1> 
<p>
Hash that contains audio sources that are playing.
</p>
<p>
Sounds that don't specify <code>looping: true</code> will be removed automatically from the hash after the playback ends. Looping sounds or sounds that should stop early must be removed manually.
</p>
<p>
When you assign a hash to an audio output, a <code>:length</code> key will be added to the hash on the following tick. This will tell you the duration of the audio file in seconds (float).
</p>
<h2 id='---one-time-sounds'>One-Time Sounds <a style='font-size: small; float: right;' href='#---one-time-sounds'>link</a></h2> 
<p>
Here's how to play audio one-time (does not loop).
</p>
<pre>def tick args
  # play a one-time non-looping sound every second
  if (args.state.tick_count % 60) == 0
    args.audio[:coin] = { input: "sounds/coin.wav" }
    # OR
    args.outputs.sounds &lt;&lt; "sounds/coin.wav"
  end
end
</pre>
<h2 id='---looping-audio'>Looping Audio <a style='font-size: small; float: right;' href='#---looping-audio'>link</a></h2> 
<p>
Here's how to play audio that loops (eg background music), and how to stop the sound.
</p>
<pre>def tick args
  if args.state.tick_count == 0
    args.audio[:bg_music] = { input: "sounds/bg-music.ogg", looping: true }
  end

  # stop sound if space key is pressed
  if args.inputs.keyboard.key_down.space
    args.audio[:bg_music] = nil
    # OR
    args.audio.delete :bg_music
  end
end
</pre>
<h2 id='---setting-additional-audio-properties'>Setting Additional Audio Properties <a style='font-size: small; float: right;' href='#---setting-additional-audio-properties'>link</a></h2> 
<p>
Here are additional properties that can be set.
</p>
<pre>def tick args
  # The values below (except for input of course) are the default values that apply if you don't
  # specify the value in the hash.
  args.audio[:my_audio] ||= {
    input: 'sound/boom.wav',  # file path relative to mygame directory
    gain:    1.0,             # Volume (float value 0.0 to 1.0)
    pitch:   1.0,             # Pitch of the sound (1.0 = original pitch)
    paused:  false,           # Set to true to pause the sound at the current playback position
    looping: true,            # Set to true to loop the sound/music until you stop it
    foobar:  :baz,            # additional keys/values can be safely added to help with context/game logic (ie metadata)
    x: 0.0, y: 0.0, z: 0.0    # Relative position to the listener, x, y, z from -1.0 to 1.0
  }
end
</pre>
<p>
IMPORTANT: Please take note that <code>gain</code> and <code>pitch</code> must be given <code>float</code> values (eg <code>gain: 1.0</code>, not <code>gain: 1</code> or <code>game: 0</code>).
</p>
<h2 id='---advanced-audio-manipulate-(crossfade)'>Advanced Audio Manipulate (Crossfade) <a style='font-size: small; float: right;' href='#---advanced-audio-manipulate-(crossfade)'>link</a></h2> 
<p>
Take a look at the Audio Mixer sample app for a non-trival example of how to use these properties. The sample app is located within the DragonRuby zip file at <code>./samples/07_advanced_audio/01_audio_mixer</code>.
</p>
<p>
Here's an example of crossfading two bg music tracks.
</p>
<pre>def tick args
  # start bg-1.ogg at the start
  if args.state.tick_count == 0
    args.audio[:bg_music] = { input: "sounds/bg-1.ogg", looping: true, gain: 0.0 }
  end

  # if space is pressed cross fade to new bg music
  if args.inputs.keyboard.key_down.space
    # get the current bg music and create a new audio entry that represents the crossfade
    current_bg_music = args.audio[:bg_music]

    # cross fade audio entry
    args.audio[:bg_music_fade] = {
      input:    current_bg_music[:input],
      looping:  true,
      gain:     current_bg_music[:gain],
      pitch:    current_bg_music[:pitch],
      paused:   false,
      playtime: current_bg_music[:playtime]
    }

    # replace the current playing background music (toggling between bg-1.ogg and bg-2.ogg)
    # set the gain/volume to 0.0 (this will be increased to 1.0 accross ticks)
    new_background_music = { looping: true, gain: 0.0 }

    # determine track to play (swap between bg-1 and bg-2)
    new_background_music[:input] = if current_bg_music.input == "sounds/bg-1.ogg"
                                     "sounds/bg-2.ogg"
                                   else
                                     "sounds/bg-2.ogg"
                                   end

    # bg music audio entry
    args.audio[:bg_music] = new_background_music
  end

  # process cross fade (happens every tick)
  # increase the volume of bg_music every tick until it's at 100%
  if args.audio[:bg_music] &amp;&amp; args.audio[:bg_music].gain &lt; 1.0
    # increase the gain 1% every tick until we are at 100%
    args.audio[:bg_music].gain += 0.01
    # clamp value to 1.0 max value
    args.audio[:bg_music].gain = 1.0 if args.audio[:bg_music].gain &gt; 1.0
  end

  # decrease the volume of cross fade bg music until it's 0.0, then delete it
  if args.audio[:bg_music_fade] &amp;&amp; args.audio[:bg_music_fade].gain &gt; 0.0
    # decrease by 1% every frame
    args.audio[:bg_music_fade].gain -= 0.01
    # delete audio when it's at 0%
    if args.audio[:bg_music_fade].gain &lt;= 0.0
      args.audio[:bg_music_fade] = nil
    end
  end
end
</pre>
<h2 id='---audio-encoding-trouble-shooting'>Audio encoding trouble shooting <a style='font-size: small; float: right;' href='#---audio-encoding-trouble-shooting'>link</a></h2> 
<p>
If audio doesn't seem to be working, try re-encoding it via <code>ffmpeg</code>:
</p>
<pre># re-encode ogg
ffmpeg -i ./mygame/sounds/SOUND.ogg -ac 2 -b:a 160k -ar 44100 -acodec libvorbis ./mygame/sounds/SOUND-converted.ogg

# convert wav to ogg
ffmpeg -i ./mygame/sounds/SOUND.wav -ac 2 -b:a 160k -ar 44100 -acodec libvorbis ./mygame/sounds/SOUND-converted.ogg
</pre>
<h2 id='---audio-synthesis'>Audio synthesis <a style='font-size: small; float: right;' href='#---audio-synthesis'>link</a></h2> 
<p>
Instead of a path to an audio file you can specify an array <code>[channels, sample_rate, sound_source]</code> for <code>input</code> to procedurally generate sound. You do this by providing an array of float values between -1.0 and 1.0 that describe the waveform you want to play.
</p>
<ul>
<li><code>channels</code> is the number of channels: 1 = mono, 2 = stereo</li>
<li><code>sample_rate</code> is the number of values per seconds you will provide to describe the audio wave</li>
<li><code>sound_source</code> The source of your sound. See below</li>
</ul>
<h3 id='----sound-source'>Sound source <a style='font-size: small; float: right;' href='#----sound-source'>link</a></h3> 
<p>
A sound source can be one of two things:
</p>
<ul>
<li>A <code>Proc</code> object that is called on demand to generate the next samples to play. Every call should generate
  enough samples for at least 0.1 to 0.5 seconds to get continuous playback without audio skips.   The audio will continue playing endlessly until removed, so the <code>looping</code> option will have no effect.</li>
<li>An array of sample values that will be played back once. This is useful for procedurally generated one-off SFX.
  <code>looping</code> will work as expected</li>
</ul>
<p>
When you specify 2 for <code>channels</code>, then the generated sample array will be played back in an interleaved manner. The first element is the first sample for the left channel, the second element is the first sample for the right channel, the third element is the second sample for the left channel etc.
</p>
<h3 id='----example-'>Example: <a style='font-size: small; float: right;' href='#----example-'>link</a></h3> 
<pre>def tick args
  sample_rate = 48000

  generate_sine_wave = lambda do
    frequency = 440.0 # A5
    samples_per_period = (sample_rate / frequency).ceil
    one_period = samples_per_period.map_with_index { |i|
      Math.sin((2 * Math::PI) * (i / samples_per_period))
    }
    one_period * frequency # Generate 1 second worth of sound
  end

  args.audio[:my_audio] ||= {
    input: [1, sample_rate, generate_sine_wave]
  }
end
</pre>
<h1 id='--easing-(-args-easing-)'>Easing (<code>args.easing</code>) <a style='font-size: small; float: right;' href='#--easing-(-args-easing-)'>link</a></h1> 
<p>
A set of functions that allow you to determine the current progression of an easing function.
</p>
<h2 id='----ease-'><code>ease</code> <a style='font-size: small; float: right;' href='#----ease-'>link</a></h2> 
<p>
This function will give you a float value between <code>0</code> and <code>1</code> that represents a percentage. You need to give the funcation a <code>start_tick</code>, <code>current_tick</code>, duration, and easing <code>definitions</code>.
</p>
<p>
This YouTube video is a fantastic introduction to easing functions: <a href='https://www.youtube.com/watch?v=mr5xkf6zSzk'>https://www.youtube.com/watch?v=mr5xkf6zSzk</a>
</p>
<h3 id='----examples'>Examples <a style='font-size: small; float: right;' href='#----examples'>link</a></h3> 
<p>
This example shows how to fade in a label at frame 60 over two seconds (120 ticks). The <code>:identity</code> definition implies a linear fade: <code>f(x) -&gt; x</code>.
</p>
<pre>def tick args
  fade_in_at   = 60
  current_tick = args.state.tick_count
  duration     = 120
  percentage   = args.easing.ease fade_in_at,
                                  current_tick,
                                  duration,
                                  :identity
  alpha = 255 * percentage
  args.outputs.labels &lt;&lt; { x: 640,
                           y: 320, text: "#{percentage.to_sf}",
                           alignment_enum: 1,
                           a: alpha }
end
</pre>
<p>
This example will move a box at a linear speed from 0 to 1280.
</p>
<pre>def tick args
  start_time = 10
  duration = 60
  current_progress = args.easing.ease start_time,
                                      args.state.tick_count,
                                      duration,
                                      :identity
  args.outputs.solids &lt;&lt; { x: 1280 * current_progress, y: 360, w: 10, h: 10 }
end
</pre>
<h3 id='----easing-definitions'>Easing Definitions <a style='font-size: small; float: right;' href='#----easing-definitions'>link</a></h3> 
<p>
There are a number of easing definitions availble to you:
</p>
<h4><code>:identity</code></h4>
<p>
The easing definition for <code>:identity</code> is <code>f(x) = x</code>. For example, if <code>start_tick</code> is <code>0</code>, <code>current_tick</code> is <code>50</code>, and <code>duration</code> is <code>100</code>, then <code>args.easing.ease 0, 50, 100, :identity</code> will return <code>0.5</code> (since tick <code>50</code> is half way between <code>0</code> and <code>100</code>).
</p>
<h4><code>:flip</code></h4>
<p>
The easing definition for <code>:flip</code> is <code>f(x) = 1 - x</code>. For example, if <code>start_tick</code> is <code>0</code>, <code>current_tick</code> is <code>10</code>, and <code>duration</code> is <code>100</code>, then <code>args.easing.ease 0, 10, 100, :flip</code> will return <code>0.9</code> (since tick <code>10</code> means 100% - 10%).
</p>
<h4><code>:quad</code>, <code>:cube</code>, <code>:quart</code>, <code>:quint</code></h4>
<p>
These are the power easing definitions. <code>:quad</code> is <code>f(x) = x * x</code> (<code>x</code> squared), <code>:cube</code> is <code>f(x) = x * x * x</code>  (<code>x</code> cubed), etc.
</p>
<p>
The power easing definitions represent Smooth Start easing (the percentage changes slow at first and speeds up at the end).
</p>
<h5>Example</h5>
<p>
Here is an example of Smooth Start (the percentage changes slow at first and speeds up at the end).
</p>
<pre>def tick args
  start_tick   = 60
  current_tick = args.state.tick_count
  duration     = 120
  percentage   = args.easing.ease start_tick,
                                  current_tick,
                                  duration,
                                  :quad
  start_x      = 100
  end_x        = 1180
  distance_x   = end_x - start_x
  final_x      = start_x + (distance_x * percentage)

  start_y      = 100
  end_y        = 620
  distance_y   = end_y - start_y
  final_y      = start_y + (distance_y * percentage)

  args.outputs.labels &lt;&lt; { x: final_x,
                           y: final_y,
                           text: "#{percentage.to_sf}",
                           alignment_enum: 1 }
end
</pre>
<h4>Combining Easing Definitions</h4>
<p>
The base easing definitions can be combined to create common easing functions.
</p>
<h5>Example</h5>
<p>
Here is an example of Smooth Stop (the percentage changes fast at first and slows down at the end).
</p>
<pre>def tick args
  start_tick   = 60
  current_tick = args.state.tick_count
  duration     = 120

  # :flip, :quad, :flip is Smooth Stop
  percentage   = args.easing.ease start_tick,
                                  current_tick,
                                  duration,
                                  :flip, :quad, :flip
  start_x      = 100
  end_x        = 1180
  distance_x   = end_x - start_x
  final_x      = start_x + (distance_x * percentage)

  start_y      = 100
  end_y        = 620
  distance_y   = end_y - start_y
  final_y      = start_y + (distance_y * percentage)

  args.outputs.labels &lt;&lt; { x: final_x,
                           y: final_y,
                           text: "#{percentage.to_sf}",
                           alignment_enum: 1 }
end
</pre>
<h4>Custom Easing Functions</h4>
<p>
You can define your own easing functions by passing in a <code>lambda</code> as a <code>definition</code> or extending the <code>Easing</code> module.
</p>
<h5>Example - Using Lambdas</h5>
<p>
This easing function goes from <code>0</code> to <code>1</code> for the first half of the ease, then <code>1</code> to <code>0</code> for the second half of the ease.
</p>
<pre>def tick args
  fade_in_at    = 60
  current_tick  = args.state.tick_count
  duration      = 600
  easing_lambda = lambda do |percentage, start_tick, duration|
                    fx = percentage
                    if fx &lt; 0.5
                      fx = percentage * 2
                    else
                      fx = 1 - (percentage - 0.5) * 2
                    end
                    fx
                  end

  percentage    = args.easing.ease fade_in_at,
                                   current_tick,
                                   duration,
                                   easing_lambda

  alpha = 255 * percentage
  args.outputs.labels &lt;&lt; { x: 640,
                           y: 320,
                           a: alpha,
                           text: "#{percentage.to_sf}",
                           alignment_enum: 1 }
end
</pre>
<h5>Example - Extending Easing Definitions</h5>
<p>
If you don't want to create a lambda, you can register an easing definition like so:
</p>
<pre># 1. Extend the Easing module
module Easing
  def self.saw_tooth x
    if x &lt; 0.5
      x * 2
    else
      1 - (x - 0.5) * 2
    end
  end
end

def tick args
  fade_in_at    = 60
  current_tick  = args.state.tick_count
  duration      = 600

  # 2. Reference easing definition by name
  percentage    = args.easing.ease fade_in_at,
                                   current_tick,
                                   duration,
                                   :saw_tooth

  alpha = 255 * percentage
  args.outputs.labels &lt;&lt; { x: 640,
                           y: 320,
                           a: alpha,
                           text: "#{percentage.to_sf}",
                           alignment_enum: 1 }

end
</pre>
<h1 id='--pixel-arrays-(-args-pixel_arrays-)'>Pixel Arrays (<code>args.pixel_arrays</code>) <a style='font-size: small; float: right;' href='#--pixel-arrays-(-args-pixel_arrays-)'>link</a></h1> 
<p>
A <code>PixelArray</code> object with a width, height and an Array of pixels which are hexadecimal color values in ABGR format.
</p>
<p>
You can create a pixel array like this:
</p>
<pre>w = 200
h = 100
args.pixel_array(:my_pixel_array).w = w
args.pixel_array(:my_pixel_array).h = h
</pre>
<p>
You'll also need to fill the pixels with values, if they are <code>nil</code>, the array will render with the checkerboard texture.  You can use #00000000 to fill with transparent pixels if desired.
</p>
<pre>gs.pixel_array(:my_pixel_array).pixels.fill #FF00FF00, 0, w * h
</pre>
<p>
Note: To convert from rgb hex (like skyblue #87CEEB) to abgr hex, you split it in pairs pair (eg <code>87</code> <code>CE</code> <code>EB</code>) and reverse the order (eg <code>EB</code> <code>CE</code> <code>87</code>) add join them again: <code>#EBCE87</code>. Then add the alpha component in front ie: <code>FF</code> for full opacity: <code>#FFEBCE87</code>.
</p>
<p>
You can draw it by using the symbol for <code>:path</code>
</p>
<pre>args.outputs.sprites &lt;&lt; { x: 500, y: 300, w: 200, h: 100, path: :my_pixel_array) }
</pre>
<p>
If you want access a specific x, y position, you can do it like this for a bottom-left coordinate system:
</p>
<pre>x = 150
y = 33
args.pixel_array(:my_pixel_array).pixels[(height - y) * width + x] = 0xFFFFFFFF
</pre>
<h2 id='---related-sample-apps'>Related Sample Apps <a style='font-size: small; float: right;' href='#---related-sample-apps'>link</a></h2> 
<ul>
<li>Animation using pixel arrays: <code>./samples/07_advanced_rendering/06_pixel_arrays</code></li>
<li>Load a pixel array from a png: <code>./samples/07_advanced_rendering/06_pixel_arrays_from_file/</code></li>
</ul>
<h1 id='--cvars-(-args-cvars-)'>CVars (<code>args.cvars</code>) <a style='font-size: small; float: right;' href='#--cvars-(-args-cvars-)'>link</a></h1> 
<p>
Hash contains metadata pulled from the files under the <code>./metadata</code> directory. To get the keys that are available type <code>$args.cvars.keys</code> in the Console. Here is an example of how to retrieve the game version number:
</p>
<pre>def tick args
  args.outputs.labels &lt;&lt; {
    x: 640,
    y: 360,
    text: args.cvars["game_metadata.version"].value.to_s
  }
end
</pre>
<p>
Each CVar has the following properties <code>value</code>, <code>name</code>, <code>description</code>, <code>type</code>, <code>locked</code>.
</p>
<h1 id='--outputs-(-args-outputs-)'>Outputs (<code>args.outputs</code>) <a style='font-size: small; float: right;' href='#--outputs-(-args-outputs-)'>link</a></h1> 
<p>
Outputs is how you render primitives to the screen. The minimal setup for rendering something to the screen is via a <code>tick</code> method defined in mygame/app/main.rb
</p>
<pre>def tick args
  args.outputs.solids     &lt;&lt; [0, 0, 100, 100]
  args.outputs.sprites    &lt;&lt; [100, 100, 100, 100, "sprites/square/blue.png"]
  args.outputs.labels     &lt;&lt; [200, 200, "Hello World"]
  args.outputs.lines      &lt;&lt; [300, 300, 400, 400]
end
</pre>
<h2 id='---render-order'>Render Order <a style='font-size: small; float: right;' href='#---render-order'>link</a></h2> 
<p>
Primitives are rendered first-in, first-out. The rendering order (sorted by bottom-most to top-most):
</p>
<ul>
<li><code>solids</code></li>
<li><code>sprites</code></li>
<li><code>primitives</code>: Accepts all render primitives. Useful when you want to bypass the default rendering orders for rendering (eg. rendering solids on top of sprites).</li>
<li><code>labels</code></li>
<li><code>lines</code></li>
<li><code>borders</code></li>
<li><code>debug</code>: Accepts all render primitives. Use this to render primitives for debugging (production builds of your game will not render this layer).</li>
</ul>
<h2 id='----solids-'><code>solids</code> <a style='font-size: small; float: right;' href='#----solids-'>link</a></h2> 
<p>
Add primitives to this collection to render a solid to the screen.
</p>
<h3 id='----rendering-a-solid-using-an-array'>Rendering a solid using an Array <a style='font-size: small; float: right;' href='#----rendering-a-solid-using-an-array'>link</a></h3> 
<p>
Creates a solid black rectangle located at 100, 100. 160 pixels wide and 90 pixels tall.
</p>
<pre>def tick args
  #                         X    Y  WIDTH  HEIGHT
  args.outputs.solids &lt;&lt; [100, 100,   160,     90]
end
</pre>
<h3 id='----rendering-a-solid-using-an-array-with-colors-and-alpha'>Rendering a solid using an Array with colors and alpha <a style='font-size: small; float: right;' href='#----rendering-a-solid-using-an-array-with-colors-and-alpha'>link</a></h3> 
<p>
The value for the color and alpha is a number between <code>0</code> and <code>255</code>. The alpha property is optional and will be set to <code>255</code> if not specified.
</p>
<p>
Creates a green solid rectangle with an opacity of 50%.
</p>
<pre>def tick args
  #                         X    Y  WIDTH  HEIGHT  RED  GREEN  BLUE  ALPHA
  args.outputs.solids &lt;&lt; [100, 100,   160,     90,   0,   255,    0,   128]
end
</pre>
<h3 id='----rendering-a-solid-using-a-hash'>Rendering a solid using a Hash <a style='font-size: small; float: right;' href='#----rendering-a-solid-using-a-hash'>link</a></h3> 
<p>
If you want a more readable invocation. You can use the following hash to create a solid. Any parameters that are not specified will be given a default value. The keys of the hash can be provided in any order.
</p>
<pre>def tick args
  args.outputs.solids &lt;&lt; {
    x:    0,
    y:    0,
    w:  100,
    h:  100,
    r:    0,
    g:  255,
    b:    0,
    a:  255,
    anchor_x: 0,
    anchor_y: 0,
    blendmode_enum: 1
  }
end
</pre>
<h3 id='----rendering-a-solid-using-a-class'>Rendering a solid using a Class <a style='font-size: small; float: right;' href='#----rendering-a-solid-using-a-class'>link</a></h3> 
<p>
You can also create a class with solid properties and render it as a primitive. ALL properties must be on the class. *Additionally*, a method called <code>primitive_marker</code> must be defined on the class.
</p>
<p>
Here is an example:
</p>
<pre># Create type with ALL solid properties AND primitive_marker
class Solid
  attr_accessor :x, :y, :w, :h, :r, :g, :b, :a, :anchor_x, :anchor_y, :blendmode_enum

  def primitive_marker
    :solid # or :border
  end
end

# Inherit from type
class Square &lt; Solid
  # constructor
  def initialize x, y, size
    self.x = x
    self.y = y
    self.w = size
    self.h = size
  end
end

def tick args
  # render solid/border
  args.outputs.solids  &lt;&lt; Square.new(10, 10, 32)
end
</pre>
<h2 id='----borders-'><code>borders</code> <a style='font-size: small; float: right;' href='#----borders-'>link</a></h2> 
<p>
Add primitives to this collection to render an unfilled solid to the screen. Take a look at the documentation for Outputs#solids.
</p>
<p>
The only difference between the two primitives is where they are added.
</p>
<p>
Instead of using <code>args.outputs.solids</code>:
</p>
<pre>def tick args
  #                         X    Y  WIDTH  HEIGHT
  args.outputs.solids &lt;&lt; [100, 100,   160,     90]
end
</pre>
<p>
You have to use <code>args.outputs.borders</code>:
</p>
<pre>def tick args
  #                           X    Y  WIDTH  HEIGHT
  args.outputs.borders &lt;&lt; [100, 100,   160,     90]
end
</pre>
<h2 id='----sprites-'><code>sprites</code> <a style='font-size: small; float: right;' href='#----sprites-'>link</a></h2> 
<p>
Add primitives to this collection to render a sprite to the screen.
</p>
<h3 id='----rendering-a-sprite-using-an-array'>Rendering a sprite using an Array <a style='font-size: small; float: right;' href='#----rendering-a-sprite-using-an-array'>link</a></h3> 
<p>
Creates a sprite of a white circle located at 100, 100. 160 pixels wide and 90 pixels tall.
</p>
<pre>def tick args
  #                         X    Y   WIDTH   HEIGHT                      PATH
  args.outputs.sprites &lt;&lt; [100, 100,   160,     90, "sprites/circle/white.png]
end
</pre>
<h3 id='----rendering-a-sprite-using-an-array-with-colors-and-alpha'>Rendering a sprite using an Array with colors and alpha <a style='font-size: small; float: right;' href='#----rendering-a-sprite-using-an-array-with-colors-and-alpha'>link</a></h3> 
<p>
The value for the color and alpha is a number between <code>0</code> and <code>255</code>. The alpha property is optional and will be set to <code>255</code> if not specified.
</p>
<p>
Creates a green circle sprite with an opacity of 50%.
</p>
<pre>def tick args
  #                         X    Y  WIDTH  HEIGHT           PATH                ANGLE  ALPHA  RED  GREEN  BLUE
  args.outputs.sprites &lt;&lt; [100, 100,  160,     90, "sprites/circle/white.png",     0,    128,   0,   255,    0]
end
</pre>
<h3 id='----rendering-a-sprite-using-a-hash'>Rendering a sprite using a Hash <a style='font-size: small; float: right;' href='#----rendering-a-sprite-using-a-hash'>link</a></h3> 
<p>
If you want a more readable invocation. You can use the following hash to create a sprite. Any parameters that are not specified will be given a default value. The keys of the hash can be provided in any order.
</p>
<pre>def tick args
  args.outputs.sprites &lt;&lt; {
    x:                             0,
    y:                             0,
    w:                           100,
    h:                           100,
    path: "sprites/circle/white.png",
    angle:                         0,
    a:                           255,
    r:                             0,
    g:                           255,
    b:                             0
  }
end
</pre>
<h3 id='----rendering-a-sprite-using-a-class'>Rendering a sprite using a Class <a style='font-size: small; float: right;' href='#----rendering-a-sprite-using-a-class'>link</a></h3> 
<p>
You can also create a class with solid/border properties and render it as a primitive. ALL properties must be on the class. *Additionally*, a method called <code>primitive_marker</code> must be defined on the class.
</p>
<p>
Here is an example:
</p>
<pre># Create type with ALL sprite properties AND primitive_marker
class Sprite
attr_accessor :x, :y, :w, :h, :path, :angle, :a, :r, :g, :b, :tile_x,
              :tile_y, :tile_w, :tile_h, :flip_horizontally,
              :flip_vertically, :angle_anchor_x, :angle_anchor_y, :id,
              :angle_x, :angle_y, :z,
              :source_x, :source_y, :source_w, :source_h, :blendmode_enum,
              :source_x2, :source_y2, :source_x3, :source_y3, :x2, :y2, :x3, :y3,
              :anchor_x, :anchor_y

  def primitive_marker
    :sprite
  end
end

# Inherit from type
class Circle &lt; Sprite
# constructor
  def initialize x, y, size, path
    self.x = x
    self.y = y
    self.w = size
    self.h = size
    self.path = path
  end

  def serialize
    {x:self.x, y:self.y, w:self.w, h:self.h, path:self.path}
  end

  def inspect
    serialize.to_s
  end

  def to_s
    serialize.to_s
  end
end

def tick args
  # render circle sprite
  args.outputs.sprites  &lt;&lt; Circle.new(10, 10, 32,"sprites/circle/white.png")
end
</pre>
<h2 id='----labels-'><code>labels</code> <a style='font-size: small; float: right;' href='#----labels-'>link</a></h2> 
<p>
Add primitives to this collection to render a label.
</p>
<h3 id='----rendering-a-label-using-an-array'>Rendering a label using an Array <a style='font-size: small; float: right;' href='#----rendering-a-label-using-an-array'>link</a></h3> 
<p>
Labels represented as Arrays/Tuples:
</p>
<pre>def tick args
                         #        X         Y              TEXT   SIZE_ENUM
  args.outputs.labels &lt;&lt; [175 + 150, 610 - 50, "Smaller label.",         0]
end
</pre>
<p>
Here are all the properties that you can set with a label represented as an Array. It's recommended to move over to using Hashes once you've specified a lot of properties.
</p>
<pre>def tick args
  args.outputs.labels &lt;&lt; [
    640,                   # X
    360,                   # Y
    "Hello world",         # TEXT
    0,                     # SIZE_ENUM
    1,                     # ALIGNMENT_ENUM
    0,                     # RED
    0,                     # GREEN
    0,                     # BLUE
    255,                   # ALPHA
    "fonts/coolfont.ttf"   # FONT
  ]
end
d
</pre>
<h3 id='----rendering-a-label-using-a-hash'>Rendering a label using a Hash <a style='font-size: small; float: right;' href='#----rendering-a-label-using-a-hash'>link</a></h3> 
<pre>def tick args
  args.outputs.labels &lt;&lt; {
      x:                       200,
      y:                       550,
      text:                    "dragonruby",
      size_enum:               2,
      alignment_enum:          1, # 0 = left, 1 = center, 2 = right
      r:                       155,
      g:                       50,
      b:                       50,
      a:                       255,
      font:                    "fonts/manaspc.ttf",
      vertical_alignment_enum: 0  # 0 = bottom, 1 = center, 2 = top
  }
end
</pre>
<h2 id='----screenshots-'><code>Screenshots</code> <a style='font-size: small; float: right;' href='#----screenshots-'>link</a></h2> 
<p>
Add a hash to this collection to take a screenshot and save as png file. The keys of the hash can be provided in any order.
</p>
<pre>def tick args
  args.outputs.screenshots &lt;&lt; {
    x: 0, y: 0, w: 100, h: 100,    # Which portion of the screen should be captured
    path: 'screenshot.png',        # Output path of PNG file (inside game directory)
    r: 255, g: 255, b: 255, a: 0   # Optional chroma key
  }
end
</pre>
<h3 id='----chroma-key-(making-a-color-transparent)'>Chroma key (Making a color transparent) <a style='font-size: small; float: right;' href='#----chroma-key-(making-a-color-transparent)'>link</a></h3> 
<p>
By specifying the r, g, b and a keys of the hash you change the transparency of a color in the resulting PNG file. This can be useful if you want to create files with transparent background like spritesheets. The transparency of the color specified by <code>r</code>, <code>g</code>, <code>b</code> will be set to the transparency specified by <code>a</code>.
</p>
<p>
The example above sets the color white (255, 255, 255) as transparent.
</p>
<h1 id='--layout-(-args-layout-)'>Layout (<code>args.layout</code>) <a style='font-size: small; float: right;' href='#--layout-(-args-layout-)'>link</a></h1> 
<p>
Layout provides apis for placing primitives on a virtual grid that's within the "safe area" accross all platforms. This virtual grid is useful for rendering static controls (buttons, menu items, configuration screens, etc).
</p>
<p>
For reference implementations, take a look at the following sample apps:
</p>
<ul>
<li><code>./samples/07_advanced_rendering/18_layouts</code></li>
<li><code>./samples/07_advanced_rendering_hd/04_layouts_and_portrait_mode</code></li>
<li><code>./samples/99_genre_rpg_turn_based/turn_based_battle</code></li>
</ul>
<p>
The following example creates two menu items and updates a label with the button that was clicked:
</p>
<pre>def tick args
  # render debug_primitives of args.layout for help with placement
  # args.outputs.primitives &lt;&lt; args.layout.debug_primitives

  # capture the location for a label centered at the top
  args.state.label_rect ||= args.layout.rect(row: 0, col: 10, w: 4, h: 1)
  # state variable to hold the current click status
  args.state.label_message ||= "click a menu item"

  # capture the location of two menu items positioned in the center
  # with a cell width of 4 and cell height of 2
  args.state.menu_item_1_rect ||= args.layout.rect(row: 1, col: 10, w: 4, h: 2)
  args.state.menu_item_2_rect ||= args.layout.rect(row: 3, col: 10, w: 4, h: 2)

  # render the label at the center of the label_rect
  args.outputs.labels &lt;&lt; args.state.label_rect.center.merge(text: args.state.label_message,
                                                            anchor_x: 0.5,
                                                            anchor_y: 0.5)

  # render menu items
  args.outputs.sprites &lt;&lt; args.state.menu_item_1_rect.merge(path: :solid,
                                                            r: 100,
                                                            g: 100,
                                                            b: 200)
  args.outputs.labels &lt;&lt; args.state.menu_item_1_rect.center.merge(text: "item 1",
                                                                  r: 255,
                                                                  g: 255,
                                                                  b: 255,
                                                                  anchor_x: 0.5,
                                                                  anchor_y: 0.5)

  args.outputs.sprites &lt;&lt; args.state.menu_item_2_rect.merge(path: :solid,
                                                            r: 100,
                                                            g: 100,
                                                            b: 200)
  args.outputs.labels &lt;&lt; args.state.menu_item_2_rect.center.merge(text: "item 2",
                                                                  r: 255,
                                                                  g: 255,
                                                                  b: 255,
                                                                  anchor_x: 0.5,
                                                                  anchor_y: 0.5)

  # if click occurs, then determine which menu item was clicked
  if args.inputs.mouse.click
    if args.inputs.mouse.intersect_rect?(args.state.menu_item_1_rect)
      args.state.label_message = "menu item 1 clicked"
    elsif args.inputs.mouse.intersect_rect?(args.state.menu_item_2_rect)
      args.state.label_message = "menu item 2 clicked"
    else
      args.state.label_message = "click a menu item"
    end
  end
end
</pre>
<h2 id='----rect-'><code>rect</code> <a style='font-size: small; float: right;' href='#----rect-'>link</a></h2> 
<p>
Given a <code>row:</code>, <code>col:</code>, <code>w:</code>, <code>h:</code>, returns a <code>Hash</code> with properties <code>x</code>, <code>y</code>, <code>w</code>, <code>h</code>, and <code>center</code> (which contains a <code>Hash</code> with <code>x</code>, <code>y</code>). The virtual grid is 12 rows by 24 columns (or 24 columns by 12 rows in portrait mode).
</p>
<h2 id='----debug_primitives-'><code>debug_primitives</code> <a style='font-size: small; float: right;' href='#----debug_primitives-'>link</a></h2> 
<p>
Function returns an array of primities that can be rendered to the screen to help you place items within the grid.
</p>
<p>
Example:
</p>
<pre>def tick args
  args.outputs.primitives &lt;&lt; args.layout.debug_primitives
end
</pre>
<h1 id='---array-'><code>Array</code> <a style='font-size: small; float: right;' href='#---array-'>link</a></h1> 
<p>
The Array class has been extend to provide methods that will help in common game development tasks. Array is one of the most powerful classes in Ruby and a very fundamental component of Game Toolkit.
</p>
<h2 id='----map_2d-'><code>map_2d</code> <a style='font-size: small; float: right;' href='#----map_2d-'>link</a></h2> 
<p>
Assuming the array is an array of arrays, Given a block, each 2D array index invoked against the block. A 2D array is a common way to store data/layout for a stage.
</p>
<pre>repl do
  stage = [
    [:enemy, :empty, :player],
    [:empty, :empty,  :empty],
    [:enemy, :empty,  :enemy],
  ]

  occupied_tiles = stage.map_2d do |row, col, tile|
    if tile == :empty
      nil
    else
      [row, col, tile]
    end
  end.reject_nil

  puts "Stage:"
  puts stage

  puts "Occupied Tiles"
  puts occupied_tiles
end
</pre>
<h2 id='----include_any--'><code>include_any?</code> <a style='font-size: small; float: right;' href='#----include_any--'>link</a></h2> 
<p>
Given a collection of items, the function will return <code>true</code> if any of <code>self</code>'s items exists in the collection of items passed in:
</p>
<h2 id='----any_intersect_rect--'><code>any_intersect_rect?</code> <a style='font-size: small; float: right;' href='#----any_intersect_rect--'>link</a></h2> 
<p>
Assuming the array contains objects that respond to <code>left</code>, <code>right</code>, <code>top</code>, <code>bottom</code>, this method returns <code>true</code> if any of the elements within the array intersect the object being passed in. You are given an optional parameter called <code>tolerance</code> which informs how close to the other rectangles the elements need to be for it to be considered intersecting.
</p>
<p>
The default tolerance is set to <code>0.1</code>, which means that the primitives are not considered intersecting unless they are overlapping by more than <code>0.1</code>.
</p>
<pre>repl do
  # Here is a player class that has position and implement
  # the ~attr_rect~ contract.
  class Player
    attr_rect
    attr_accessor :x, :y, :w, :h

    def initialize x, y, w, h
      @x = x
      @y = y
      @w = w
      @h = h
    end

    def serialize
      { x: @x, y: @y, w: @w, h: @h }
    end

    def inspect
      "#{serialize}"
    end

    def to_s
      "#{serialize}"
    end
  end

  # Here is a definition of two walls.
  walls = [
     [10, 10, 10, 10],
     { x: 20, y: 20, w: 10, h: 10 },
   ]

  # Display the walls.
  puts "Walls."
  puts walls
  puts ""

  # Check any_intersect_rect? on player
  player = Player.new 30, 20, 10, 10
  puts "Is Player #{player} touching wall?"
  puts (walls.any_intersect_rect? player)
  # =&gt; false
  # The value is false because of the default tolerance is 0.1.
  # The overlap of the player rect and any of the wall rects is
  # less than 0.1 (for those that intersect).
  puts ""

  player = Player.new 9, 10, 10, 10
  puts "Is Player #{player} touching wall?"
  puts (walls.any_intersect_rect? player)
  # =&gt; true
  puts ""
end
</pre>
<h2 id='----map-'><code>map</code> <a style='font-size: small; float: right;' href='#----map-'>link</a></h2> 
<p>
The function given a block returns a new <code>Enumerable</code> of values.
</p>
<p>
Example of using <code>Array#map</code> in conjunction with <code>args.state</code> and <code>args.outputs.sprites</code> to render sprites to the screen.
</p>
<pre>def tick args
  # define the colors of the rainbow in ~args.state~
  # as an ~Array~ of ~Hash~es with :order and :name.
  # :order will be used to determine render location
  #  and :name will be used to determine sprite path.
  args.state.rainbow_colors ||= [
    { order: 0, name: :red    },
    { order: 1, name: :orange },
    { order: 2, name: :yellow },
    { order: 3, name: :green  },
    { order: 4, name: :blue   },
    { order: 5, name: :indigo },
    { order: 6, name: :violet },
  ]

  # render sprites diagonally to the screen
  # with a width and height of 50.
  args.outputs
      .sprites &lt;&lt; args.state
                      .rainbow_colors
                      .map do |color| # &lt;-- ~Array#map~ usage
                        [
                          color[:order] * 50,
                          color[:order] * 50,
                          50,
                          50,
                          "sprites/square-#{color[:name]}.png"
                        ]
                      end
end
</pre>
<h2 id='----each-'><code>each</code> <a style='font-size: small; float: right;' href='#----each-'>link</a></h2> 
<p>
The function, given a block, invokes the block for each item in the <code>Array</code>. <code>Array#each</code> is synonymous to foreach constructs in other languages.
</p>
<p>
Example of using <code>Array#each</code> in conjunction with <code>args.state</code> and <code>args.outputs.sprites</code> to render sprites to the screen:
</p>
<pre>def tick args
  # define the colors of the rainbow in ~args.state~
  # as an ~Array~ of ~Hash~es with :order and :name.
  # :order will be used to determine render location
  #  and :name will be used to determine sprite path.
  args.state.rainbow_colors ||= [
    { order: 0, name: :red    },
    { order: 1, name: :orange },
    { order: 2, name: :yellow },
    { order: 3, name: :green  },
    { order: 4, name: :blue   },
    { order: 5, name: :indigo },
    { order: 6, name: :violet },
  ]

  # render sprites diagonally to the screen
  # with a width and height of 50.
  args.state
      .rainbow_colors
      .map do |color| # &lt;-- ~Array#each~ usage
        args.outputs.sprites &lt;&lt; [
          color[:order] * 50,
          color[:order] * 50,
          50,
          50,
          "sprites/square-#{color[:name]}.png"
        ]
      end
end
</pre>
<h2 id='----reject_nil-'><code>reject_nil</code> <a style='font-size: small; float: right;' href='#----reject_nil-'>link</a></h2> 
<p>
Returns an <code>Enumerable</code> rejecting items that are <code>nil</code>, this is an alias for <code>Array#compact</code>:
</p>
<pre>repl do
  a = [1, nil, 4, false, :a]
  puts a.reject_nil
  # =&gt; [1, 4, false, :a]
  puts a.compact
  # =&gt; [1, 4, false, :a]
end
</pre>
<h2 id='----reject_false-'><code>reject_false</code> <a style='font-size: small; float: right;' href='#----reject_false-'>link</a></h2> 
<p>
Returns an `Enumerable` rejecting items that are `nil` or `false`.
</p>
<pre>repl do
  a = [1, nil, 4, false, :a]
  puts a.reject_false
  # =&gt; [1, 4, :a]
end
</pre>
<h2 id='----product-'><code>product</code> <a style='font-size: small; float: right;' href='#----product-'>link</a></h2> 
<p>
Returns all combinations of values between two arrays.
</p>
<p>
Here are some examples of using <code>product</code>. Paste the following code at the bottom of main.rb and save the file to see the results:
</p>
<pre>repl do
  a = [0, 1]
  puts a.product
  # =&gt; [[0, 0], [0, 1], [1, 0], [1, 1]]
end
</pre>
<pre>repl do
  a = [ 0,  1]
  b = [:a, :b]
  puts a.product b
  # =&gt; [[0, :a], [0, :b], [1, :a], [1, :b]]
end
</pre>
<h1 id='---numeric-'><code>Numeric</code> <a style='font-size: small; float: right;' href='#---numeric-'>link</a></h1> 
<p>
The <code>Numeric</code> class has been extend to provide methods that will help in common game development tasks.
</p>
<h2 id='----frame_index-'><code>frame_index</code> <a style='font-size: small; float: right;' href='#----frame_index-'>link</a></h2> 
<p>
This function is helpful for determining the index of frame-by-frame   sprite animation. The numeric value <code>self</code> represents the moment the   animation started.
</p>
<p>
<code>frame_index</code> takes three additional parameters:
</p>
<ul>
<li>How many frames exist in the sprite animation.</li>
<li>How long to hold each animation for.</li>
<li>Whether the animation should repeat.</li>
</ul>
<p>
<code>frame_index</code> will return <code>nil</code> if the time for the animation is out of bounds of the parameter specification.
</p>
<p>
Example using variables:
</p>
<pre>def tick args
  start_looping_at = 0
  number_of_sprites = 6
  number_of_frames_to_show_each_sprite = 4
  does_sprite_loop = true

  sprite_index =
    start_looping_at.frame_index number_of_sprites,
                                 number_of_frames_to_show_each_sprite,
                                 does_sprite_loop

  sprite_index ||= 0

  args.outputs.sprites &lt;&lt; [
    640 - 50,
    360 - 50,
    100,
    100,
    "sprites/dragon-#{sprite_index}.png"
  ]
end
</pre>
<p>
Example using named parameters. The named parameters version allows you to also specify a <code>repeat_index</code> which is useful if your animation has starting frames that shouldn't be considered when looped:
</p>
<pre>def tick args
  start_looping_at = 0

  sprite_index =
    start_looping_at.frame_index count: 6,
                                 hold_for: 4,
                                 repeat: true,
                                 repeat_index: 0,
                                 tick_count_override: args.state.tick_count

  sprite_index ||= 0

  args.outputs.sprites &lt;&lt; [
    640 - 50,
    360 - 50,
    100,
    100,
    "sprites/dragon-#{sprite_index}.png"
  ]
end
</pre>
<p>
The named parameter variant of <code>frame_index</code> is also available on <code>Numeric</code>:
</p>
<pre>def tick args
  sprite_index =
    Numeric.frame_index start_at: 0,
                        count: 6,
                        hold_for: 4,
                        repeat: true,
                        repeat_index: 0,
                        tick_count_override: args.state.tick_count

  sprite_index ||= 0

  args.outputs.sprites &lt;&lt; [
    640 - 50,
    360 - 50,
    100,
    100,
    "sprites/dragon-#{sprite_index}.png"
  ]
end
</pre>
<h2 id='----elapsed_time-'><code>elapsed_time</code> <a style='font-size: small; float: right;' href='#----elapsed_time-'>link</a></h2> 
<p>
For a given number, the elapsed frames since that number is returned. `Kernel.tick_count` is used to determine how many frames have elapsed. An optional numeric argument can be passed in which will be used instead of `Kernel.tick_count`.
</p>
<p>
Here is an example of how elapsed_time can be used.
</p>
<pre>def tick args
  args.state.last_click_at ||= 0

  # record when a mouse click occurs
  if args.inputs.mouse.click
    args.state.last_click_at = args.state.tick_count
  end

  # Use Numeric#elapsed_time to determine how long it's been
  if args.state.last_click_at.elapsed_time &gt; 120
    args.outputs.labels &lt;&lt; [10, 710, "It has been over 2 seconds since the mouse was clicked."]
  end
end
</pre>
<p>
And here is an example where the override parameter is passed in:
</p>
<pre>def tick args
  args.state.last_click_at ||= 0

  # create a state variable that tracks time at half the speed of args.state.tick_count
  args.state.simulation_tick = args.state.tick_count.idiv 2

  # record when a mouse click occurs
  if args.inputs.mouse.click
    args.state.last_click_at = args.state.simulation_tick
  end

  # Use Numeric#elapsed_time to determine how long it's been
  if (args.state.last_click_at.elapsed_time args.state.simulation_tick) &gt; 120
    args.outputs.labels &lt;&lt; [10, 710, "It has been over 4 seconds since the mouse was clicked."]
  end
end
</pre>
<h2 id='----elapsed--'><code>elapsed?</code> <a style='font-size: small; float: right;' href='#----elapsed--'>link</a></h2> 
<p>
Returns true if <code>Numeric#elapsed_time</code> is greater than the number. An optional parameter can be passed into <code>elapsed?</code> which is added to the number before evaluating whether <code>elapsed?</code> is true.
</p>
<p>
Example usage (no optional parameter):
</p>
<pre>def tick args
  args.state.box_queue ||= []

  if args.state.box_queue.empty?
    args.state.box_queue &lt;&lt; { name: :red,
                              destroy_at: args.state.tick_count + 60 }
    args.state.box_queue &lt;&lt; { name: :green,
                              destroy_at: args.state.tick_count + 60 }
    args.state.box_queue &lt;&lt; { name: :blue,
                              destroy_at: args.state.tick_count + 120 }
  end

  boxes_to_destroy = args.state
                         .box_queue
                         .find_all { |b| b[:destroy_at].elapsed? }

  if !boxes_to_destroy.empty?
    puts "boxes to destroy count: #{boxes_to_destroy.length}"
  end

  boxes_to_destroy.each { |b| puts "box #{b} was elapsed? on #{args.state.tick_count}." }

  args.state.box_queue -= boxes_to_destroy
end
</pre>
<p>
Example usage (with optional parameter):
</p>
<pre>def tick args
  args.state.box_queue ||= []

  if args.state.box_queue.empty?
    args.state.box_queue &lt;&lt; { name: :red,
                              create_at: args.state.tick_count + 120,
                              lifespan: 60 }
    args.state.box_queue &lt;&lt; { name: :green,
                              create_at: args.state.tick_count + 120,
                              lifespan: 60 }
    args.state.box_queue &lt;&lt; { name: :blue,
                              create_at: args.state.tick_count + 120,
                              lifespan: 120 }
  end

  # lifespan is passed in as a parameter to ~elapsed?~
  boxes_to_destroy = args.state
                         .box_queue
                         .find_all { |b| b[:create_at].elapsed? b[:lifespan] }

  if !boxes_to_destroy.empty?
    puts "boxes to destroy count: #{boxes_to_destroy.length}"
  end

  boxes_to_destroy.each { |b| puts "box #{b} was elapsed? on #{args.state.tick_count}." }

  args.state.box_queue -= boxes_to_destroy
end
</pre>
<h2 id='----new--'><code>new?</code> <a style='font-size: small; float: right;' href='#----new--'>link</a></h2> 
<p>
Returns true if <code>Numeric#elapsed_time == 0</code>. Essentially communicating that number is equal to the current frame.
</p>
<p>
Example usage:
</p>
<pre>def tick args
  args.state.box_queue ||= []

  if args.state.box_queue.empty?
    args.state.box_queue &lt;&lt; { name: :red,
                              create_at: args.state.tick_count + 60 }
  end

  boxes_to_spawn_this_frame = args.state
                                  .box_queue
                                  .find_all { |b| b[:create_at].new? }

  boxes_to_spawn_this_frame.each { |b| puts "box #{b} was new? on #{args.state.tick_count}." }

  args.state.box_queue -= boxes_to_spawn_this_frame
end
</pre>
<h1 id='---kernel-'><code>Kernel</code> <a style='font-size: small; float: right;' href='#---kernel-'>link</a></h1> 
<p>
Kernel in the DragonRuby Runtime has patches for how standard out is handled and also contains a unit of time in games called a tick.
</p>
<h2 id='----tick_count-'><code>tick_count</code> <a style='font-size: small; float: right;' href='#----tick_count-'>link</a></h2> 
<p>
Returns the current tick of the game. This value is reset if you call $gtk.reset.
</p>
<h2 id='----global_tick_count-'><code>global_tick_count</code> <a style='font-size: small; float: right;' href='#----global_tick_count-'>link</a></h2> 
<p>
Returns the current tick of the application from the point it was started. This value is never reset.
</p>
    </div>
  </body>
</html>
